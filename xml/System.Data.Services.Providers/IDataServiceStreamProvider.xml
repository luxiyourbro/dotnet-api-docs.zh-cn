<Type Name="IDataServiceStreamProvider" FullName="System.Data.Services.Providers.IDataServiceStreamProvider">
  <TypeSignature Language="C#" Value="public interface IDataServiceStreamProvider" />
  <TypeSignature Language="ILAsm" Value=".class public interface auto ansi abstract IDataServiceStreamProvider" />
  <TypeSignature Language="DocId" Value="T:System.Data.Services.Providers.IDataServiceStreamProvider" />
  <TypeSignature Language="VB.NET" Value="Public Interface IDataServiceStreamProvider" />
  <TypeSignature Language="C++ CLI" Value="public interface class IDataServiceStreamProvider" />
  <AssemblyInfo>
    <AssemblyName>System.Data.Services</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Interfaces />
  <Docs>
    <summary><span data-ttu-id="3d32d-101">使得二进制数据能够被访问并被更改为属于某实体（为媒体链接项）的媒体资源。</span><span class="sxs-lookup"><span data-stu-id="3d32d-101">Enables binary data to be accessed and changed as a media resource that belongs to an entity that is a media link entry.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="3d32d-102">开放式数据协议 (OData) 可让您通过使用基于以下构造的机制，独立于数据源中的项定义由数据服务公开的实体的二进制数据属性：</span><span class="sxs-lookup"><span data-stu-id="3d32d-102">The Open Data Protocol (OData) enables a binary data property of an entity exposed by a data service to be defined independently of an entry in a data feed by using a mechanism based on the following constructs:</span></span>  
  
-   <span data-ttu-id="3d32d-103">媒体资源 - 二进制大型对象数据（即为二进制数据），例如视频、音频、图像或其他媒体资源。</span><span class="sxs-lookup"><span data-stu-id="3d32d-103">Media resource - the binary large object data that is binary data, such as a video, audio, image or other media resources.</span></span>  
  
-   <span data-ttu-id="3d32d-104">媒体链接项 - 数据源中表示实体并具有对相关媒体资源的引用的 AtomPub 项。</span><span class="sxs-lookup"><span data-stu-id="3d32d-104">Media link entry - an AtomPub entry in a data feed that represents an entity and that has a reference to a related media resource.</span></span>  
  
 <span data-ttu-id="3d32d-105">有关详细信息，请参阅[流提供程序](~/docs/framework/data/wcf/streaming-provider-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3d32d-105">For more information, see [Streaming Provider](~/docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span></span>  
  
 ]]></format>
    </remarks>
  </Docs>
  <Members>
    <Member MemberName="DeleteStream">
      <MemberSignature Language="C#" Value="public void DeleteStream (object entity, System.Data.Services.DataServiceOperationContext operationContext);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void DeleteStream(object entity, class System.Data.Services.DataServiceOperationContext operationContext) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Data.Services.Providers.IDataServiceStreamProvider.DeleteStream(System.Object,System.Data.Services.DataServiceOperationContext)" />
      <MemberSignature Language="VB.NET" Value="Public Sub DeleteStream (entity As Object, operationContext As DataServiceOperationContext)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void DeleteStream(System::Object ^ entity, System::Data::Services::DataServiceOperationContext ^ operationContext);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Data.Services</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="entity" Type="System.Object" />
        <Parameter Name="operationContext" Type="System.Data.Services.DataServiceOperationContext" />
      </Parameters>
      <Docs>
        <param name="entity"><span data-ttu-id="3d32d-106">被删除的媒体链接项。</span><span class="sxs-lookup"><span data-stu-id="3d32d-106">The media link entry that is deleted.</span></span></param>
        <param name="operationContext"><span data-ttu-id="3d32d-107">处理请求的 <see cref="T:System.Data.Services.DataServiceOperationContext" /> 实例。</span><span class="sxs-lookup"><span data-stu-id="3d32d-107">The <see cref="T:System.Data.Services.DataServiceOperationContext" /> instance that processes the request.</span></span></param>
        <summary><span data-ttu-id="3d32d-108">删除媒体链接项时，将删除关联的媒体资源。</span><span class="sxs-lookup"><span data-stu-id="3d32d-108">Deletes the associated media resource when a media link entry is deleted.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="3d32d-109">当其关联媒体链接项从数据服务中删除时，<xref:System.Data.Services.Providers.IDataServiceStreamProvider.DeleteStream%2A> 方法将提供用于删除媒体资源的实现。</span><span class="sxs-lookup"><span data-stu-id="3d32d-109">The <xref:System.Data.Services.Providers.IDataServiceStreamProvider.DeleteStream%2A> method provides the implementation to delete a media resource when its associated media link entry is deleted from the data service.</span></span> <span data-ttu-id="3d32d-110">有关详细信息，请参阅[流提供程序](~/docs/framework/data/wcf/streaming-provider-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3d32d-110">For more information, see [Streaming Provider](~/docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException"><span data-ttu-id="3d32d-111">当 <paramref name="entity" /> 或 <paramref name="operationContext" /> 为 <see langword="null" /> 时。</span><span class="sxs-lookup"><span data-stu-id="3d32d-111">When <paramref name="entity" /> or <paramref name="operationContext" /> are <see langword="null" />.</span></span></exception>
        <exception cref="T:System.ArgumentException"><span data-ttu-id="3d32d-112">当 <paramref name="entity" /> 不是具有要进行流式处理的二进制属性的实体时。</span><span class="sxs-lookup"><span data-stu-id="3d32d-112">When <paramref name="entity" /> is not an entity that has a binary property to stream.</span></span></exception>
        <exception cref="T:System.Data.Services.DataServiceException"><span data-ttu-id="3d32d-113">当与 <paramref name="entity" /> 关联的流不能被删除时。</span><span class="sxs-lookup"><span data-stu-id="3d32d-113">When the stream associated with the <paramref name="entity" /> cannot be deleted.</span></span></exception>
      </Docs>
    </Member>
    <Member MemberName="GetReadStream">
      <MemberSignature Language="C#" Value="public System.IO.Stream GetReadStream (object entity, string etag, Nullable&lt;bool&gt; checkETagForEquality, System.Data.Services.DataServiceOperationContext operationContext);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance class System.IO.Stream GetReadStream(object entity, string etag, valuetype System.Nullable`1&lt;bool&gt; checkETagForEquality, class System.Data.Services.DataServiceOperationContext operationContext) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStream(System.Object,System.String,System.Nullable{System.Boolean},System.Data.Services.DataServiceOperationContext)" />
      <MemberSignature Language="VB.NET" Value="Public Function GetReadStream (entity As Object, etag As String, checkETagForEquality As Nullable(Of Boolean), operationContext As DataServiceOperationContext) As Stream" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::IO::Stream ^ GetReadStream(System::Object ^ entity, System::String ^ etag, Nullable&lt;bool&gt; checkETagForEquality, System::Data::Services::DataServiceOperationContext ^ operationContext);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Data.Services</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.IO.Stream</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="entity" Type="System.Object" />
        <Parameter Name="etag" Type="System.String" />
        <Parameter Name="checkETagForEquality" Type="System.Nullable&lt;System.Boolean&gt;" />
        <Parameter Name="operationContext" Type="System.Data.Services.DataServiceOperationContext" />
      </Parameters>
      <Docs>
        <param name="entity"><span data-ttu-id="3d32d-114">一个实体，它是具有相关媒体资源的媒体链接项。</span><span class="sxs-lookup"><span data-stu-id="3d32d-114">The entity that is a media link entry with a related media resource.</span></span></param>
        <param name="etag"><span data-ttu-id="3d32d-115">将 eTag 值作为发送到数据服务的 HTTP 请求的一部分发送。</span><span class="sxs-lookup"><span data-stu-id="3d32d-115">The eTag value sent as part of the HTTP request that is sent to the data service.</span></span></param>
        <param name="checkETagForEquality"><span data-ttu-id="3d32d-116">一个可以为 null 的 <see cref="T:System.Boolean" /> 值，该值确定数据服务是否必须为所使用的 eTag 类型。</span><span class="sxs-lookup"><span data-stu-id="3d32d-116">A nullable <see cref="T:System.Boolean" /> value that determines whether the data service must the type of eTag that is used.</span></span></param>
        <param name="operationContext"><span data-ttu-id="3d32d-117">数据服务用于处理请求的 <see cref="T:System.Data.Services.DataServiceOperationContext" /> 实例。</span><span class="sxs-lookup"><span data-stu-id="3d32d-117">The <see cref="T:System.Data.Services.DataServiceOperationContext" /> instance used by the data service to process the request.</span></span></param>
        <summary><span data-ttu-id="3d32d-118">返回包含指定实体的媒体资源数据的流，该实体为媒体链接项。</span><span class="sxs-lookup"><span data-stu-id="3d32d-118">Returns a stream that contains the media resource data for the specified entity, which is a media link entry.</span></span></summary>
        <returns><span data-ttu-id="3d32d-119">包含 <see cref="T:System.IO.Stream" /> 的二进制属性数据的数据 <paramref name="entity" />。</span><span class="sxs-lookup"><span data-stu-id="3d32d-119">The data <see cref="T:System.IO.Stream" /> that contains the binary property data of the <paramref name="entity" />.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="3d32d-120">`eTag` 是 If-Match 或 If-None-Match 标头的值。</span><span class="sxs-lookup"><span data-stu-id="3d32d-120">`eTag` is the value of an If-Match or If-None-Match header.</span></span> <span data-ttu-id="3d32d-121">支持以下值：</span><span class="sxs-lookup"><span data-stu-id="3d32d-121">The following values are supported:</span></span>  
  
-   <span data-ttu-id="3d32d-122">`true` -当 eTag 表示 If-match 标头。</span><span class="sxs-lookup"><span data-stu-id="3d32d-122">`true` - when the eTag represents an If-Match header.</span></span>  
  
-   <span data-ttu-id="3d32d-123">`false` -当 eTag 表示一个无-If-match 标头。</span><span class="sxs-lookup"><span data-stu-id="3d32d-123">`false` - when the eTag represents an If-None-Match header.</span></span>  
  
-   <span data-ttu-id="3d32d-124">`null` -一个 If-match 或 None-If-match 标头不存在请求中。</span><span class="sxs-lookup"><span data-stu-id="3d32d-124">`null` - when an If-Match or If-None-Match header is not present in the request.</span></span>  
  
 <span data-ttu-id="3d32d-125">当客户端请求指定 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStream%2A>（这是媒体链接项）的媒体资源时，数据服务方法运行时将调用 `entity` 方法以获取数据服务返回到客户端的流。</span><span class="sxs-lookup"><span data-stu-id="3d32d-125">The <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStream%2A> method is called by the data service runtime to acquire the stream that the data service returns to the client when the client requests the media resource for the specified `entity`, which is a media link entry.</span></span> <span data-ttu-id="3d32d-126">有关详细信息，请参阅[流提供程序](~/docs/framework/data/wcf/streaming-provider-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3d32d-126">For more information, see [Streaming Provider](~/docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="GetReadStreamUri">
      <MemberSignature Language="C#" Value="public Uri GetReadStreamUri (object entity, System.Data.Services.DataServiceOperationContext operationContext);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance class System.Uri GetReadStreamUri(object entity, class System.Data.Services.DataServiceOperationContext operationContext) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStreamUri(System.Object,System.Data.Services.DataServiceOperationContext)" />
      <MemberSignature Language="VB.NET" Value="Public Function GetReadStreamUri (entity As Object, operationContext As DataServiceOperationContext) As Uri" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; Uri ^ GetReadStreamUri(System::Object ^ entity, System::Data::Services::DataServiceOperationContext ^ operationContext);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Data.Services</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Uri</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="entity" Type="System.Object" />
        <Parameter Name="operationContext" Type="System.Data.Services.DataServiceOperationContext" />
      </Parameters>
      <Docs>
        <param name="entity"><span data-ttu-id="3d32d-127">一个实体，它是具有相关媒体资源的媒体链接项。</span><span class="sxs-lookup"><span data-stu-id="3d32d-127">The entity that is a media link entry with a related media resource.</span></span></param>
        <param name="operationContext"><span data-ttu-id="3d32d-128">数据服务用于处理请求的 <see cref="T:System.Data.Services.DataServiceOperationContext" /> 实例。</span><span class="sxs-lookup"><span data-stu-id="3d32d-128">The <see cref="T:System.Data.Services.DataServiceOperationContext" /> instance used by the data service to process the request.</span></span></param>
        <summary><span data-ttu-id="3d32d-129">返回用于请求属于指定实体的媒体资源的 URI。</span><span class="sxs-lookup"><span data-stu-id="3d32d-129">Returns the URI that is used to request the media resource that belongs to the specified entity.</span></span></summary>
        <returns><span data-ttu-id="3d32d-130">用于请求二进制数据流的 <see cref="T:System.Uri" /> 值。</span><span class="sxs-lookup"><span data-stu-id="3d32d-130">A <see cref="T:System.Uri" /> value that is used to request the binary data stream.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="3d32d-131">当客户端检索（即 GET）媒体资源的请求时，数据服务运行时将调用 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStreamUri%2A> 方法以获得客户端应使用的 URI。</span><span class="sxs-lookup"><span data-stu-id="3d32d-131">The <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStreamUri%2A> method is called by the data service runtime to obtain the URI that clients should use when they make retrieve (i.e., GET) requests for the media resource.</span></span>  
  
 <span data-ttu-id="3d32d-132">通过 <xref:System.Uri> 方法实现返回的 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStreamUri%2A> 值将用作媒体链接项中的编辑媒体链接，以引用媒体资源的位置。</span><span class="sxs-lookup"><span data-stu-id="3d32d-132">The <xref:System.Uri> value returned by the <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStreamUri%2A> method implementation is used as the edit-media link in the media link entry to references the location of the media resource.</span></span>  
  
 <span data-ttu-id="3d32d-133">当此方法实现返回 null 时，数据服务将构造默认的 <xref:System.Uri>，这通常是附加有 `/$value` 的实体的 URI。</span><span class="sxs-lookup"><span data-stu-id="3d32d-133">When the method implementation returns null, the data service will construct a default <xref:System.Uri>, which is usually the URI of the entity appended with `/$value`.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="GetStreamContentType">
      <MemberSignature Language="C#" Value="public string GetStreamContentType (object entity, System.Data.Services.DataServiceOperationContext operationContext);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance string GetStreamContentType(object entity, class System.Data.Services.DataServiceOperationContext operationContext) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamContentType(System.Object,System.Data.Services.DataServiceOperationContext)" />
      <MemberSignature Language="VB.NET" Value="Public Function GetStreamContentType (entity As Object, operationContext As DataServiceOperationContext) As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::String ^ GetStreamContentType(System::Object ^ entity, System::Data::Services::DataServiceOperationContext ^ operationContext);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Data.Services</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="entity" Type="System.Object" />
        <Parameter Name="operationContext" Type="System.Data.Services.DataServiceOperationContext" />
      </Parameters>
      <Docs>
        <param name="entity"><span data-ttu-id="3d32d-134">一个实体，它是具有相关媒体资源的媒体链接项。</span><span class="sxs-lookup"><span data-stu-id="3d32d-134">The entity that is a media link entry with a related media resource.</span></span></param>
        <param name="operationContext"><span data-ttu-id="3d32d-135">数据服务用于处理请求的 <see cref="T:System.Data.Services.DataServiceOperationContext" /> 实例。</span><span class="sxs-lookup"><span data-stu-id="3d32d-135">The <see cref="T:System.Data.Services.DataServiceOperationContext" /> instance used by the data service to process the request.</span></span></param>
        <summary><span data-ttu-id="3d32d-136">返回属于指定实体的媒体资源的内容类型。</span><span class="sxs-lookup"><span data-stu-id="3d32d-136">Returns the content type of the media resource that belongs to the specified entity.</span></span></summary>
        <returns><span data-ttu-id="3d32d-137">二进制数据的有效 Content-Type。</span><span class="sxs-lookup"><span data-stu-id="3d32d-137">A valid Content-Type of the binary data.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="3d32d-138">数据服务运行时调用 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamContentType%2A> 方法，以检索属于指定的 `entity` 的媒体资源的 Content-Type。</span><span class="sxs-lookup"><span data-stu-id="3d32d-138">The <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamContentType%2A> method is called by the data service runtime to retrieve the Content-Type of the media resource that belongs to the specified `entity`.</span></span> <span data-ttu-id="3d32d-139">使用 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamContentType%2A> 方法实现设置媒体资源的 Content-Type。</span><span class="sxs-lookup"><span data-stu-id="3d32d-139">Use the <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamContentType%2A> method implementation to set the Content-Type of the media resource.</span></span> <span data-ttu-id="3d32d-140">不要在 <xref:System.Data.Services.Providers.IDataServiceStreamProvider> 提供程序实现中直接设置 Content-Type 标头。</span><span class="sxs-lookup"><span data-stu-id="3d32d-140">Do not directly set the Content-Type header in your <xref:System.Data.Services.Providers.IDataServiceStreamProvider> provider implementation.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="GetStreamETag">
      <MemberSignature Language="C#" Value="public string GetStreamETag (object entity, System.Data.Services.DataServiceOperationContext operationContext);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance string GetStreamETag(object entity, class System.Data.Services.DataServiceOperationContext operationContext) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamETag(System.Object,System.Data.Services.DataServiceOperationContext)" />
      <MemberSignature Language="VB.NET" Value="Public Function GetStreamETag (entity As Object, operationContext As DataServiceOperationContext) As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::String ^ GetStreamETag(System::Object ^ entity, System::Data::Services::DataServiceOperationContext ^ operationContext);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Data.Services</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="entity" Type="System.Object" />
        <Parameter Name="operationContext" Type="System.Data.Services.DataServiceOperationContext" />
      </Parameters>
      <Docs>
        <param name="entity"><span data-ttu-id="3d32d-141">一个实体，它是具有相关媒体资源的媒体链接项。</span><span class="sxs-lookup"><span data-stu-id="3d32d-141">The entity that is a media link entry with a related media resource.</span></span></param>
        <param name="operationContext"><span data-ttu-id="3d32d-142">数据服务用于处理请求的 <see cref="T:System.Data.Services.DataServiceOperationContext" /> 实例。</span><span class="sxs-lookup"><span data-stu-id="3d32d-142">The <see cref="T:System.Data.Services.DataServiceOperationContext" /> instance used by the data service to process the request.</span></span></param>
        <summary><span data-ttu-id="3d32d-143">返回属于指定媒体链接项的媒体资源的 eTag。</span><span class="sxs-lookup"><span data-stu-id="3d32d-143">Returns the eTag of the media resource that belongs to the specified media link entry.</span></span></summary>
        <returns><span data-ttu-id="3d32d-144">与 <paramref name="entity" /> 关联的媒体资源的 eTag。</span><span class="sxs-lookup"><span data-stu-id="3d32d-144">eTag of the media resource associated with the <paramref name="entity" />.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="3d32d-145">数据服务运行时调用 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamETag%2A>方法，以检索与 `entity` 相关联的媒体资源的 eTag。</span><span class="sxs-lookup"><span data-stu-id="3d32d-145">The <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamETag%2A> method is called by the data service runtime to retrieve the eTag of the media resource that is associated with the `entity`.</span></span>  
  
 <span data-ttu-id="3d32d-146">您必须实现 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamETag%2A> 方法，以使数据服务能够管理媒体资源的并发性。</span><span class="sxs-lookup"><span data-stu-id="3d32d-146">You must implement the <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamETag%2A> method to enable the data service to manage concurrency for the media resource.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="GetWriteStream">
      <MemberSignature Language="C#" Value="public System.IO.Stream GetWriteStream (object entity, string etag, Nullable&lt;bool&gt; checkETagForEquality, System.Data.Services.DataServiceOperationContext operationContext);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance class System.IO.Stream GetWriteStream(object entity, string etag, valuetype System.Nullable`1&lt;bool&gt; checkETagForEquality, class System.Data.Services.DataServiceOperationContext operationContext) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream(System.Object,System.String,System.Nullable{System.Boolean},System.Data.Services.DataServiceOperationContext)" />
      <MemberSignature Language="VB.NET" Value="Public Function GetWriteStream (entity As Object, etag As String, checkETagForEquality As Nullable(Of Boolean), operationContext As DataServiceOperationContext) As Stream" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::IO::Stream ^ GetWriteStream(System::Object ^ entity, System::String ^ etag, Nullable&lt;bool&gt; checkETagForEquality, System::Data::Services::DataServiceOperationContext ^ operationContext);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Data.Services</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.IO.Stream</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="entity" Type="System.Object" />
        <Parameter Name="etag" Type="System.String" />
        <Parameter Name="checkETagForEquality" Type="System.Nullable&lt;System.Boolean&gt;" />
        <Parameter Name="operationContext" Type="System.Data.Services.DataServiceOperationContext" />
      </Parameters>
      <Docs>
        <param name="entity"><span data-ttu-id="3d32d-147">一个实体，它是具有相关媒体资源的媒体链接项。</span><span class="sxs-lookup"><span data-stu-id="3d32d-147">The entity that is a media link entry with a related media resource.</span></span></param>
        <param name="etag"><span data-ttu-id="3d32d-148">作为发送到数据服务的 HTTP 请求的一部分发送的 eTag 值。</span><span class="sxs-lookup"><span data-stu-id="3d32d-148">The eTag value that is sent as part of the HTTP request that is sent to the data service.</span></span></param>
        <param name="checkETagForEquality"><span data-ttu-id="3d32d-149">一个可以为 null 的 <see cref="T:System.Boolean" /> 值，该值指示客户端请求的并发检查的类型。</span><span class="sxs-lookup"><span data-stu-id="3d32d-149">A nullable <see cref="T:System.Boolean" /> value that indicates the type of concurrency check requested by the client.</span></span></param>
        <param name="operationContext"><span data-ttu-id="3d32d-150">数据服务用于处理请求的 <see cref="T:System.Data.Services.DataServiceOperationContext" /> 实例。</span><span class="sxs-lookup"><span data-stu-id="3d32d-150">The <see cref="T:System.Data.Services.DataServiceOperationContext" /> instance that is used by the data service to process the request.</span></span></param>
        <summary><span data-ttu-id="3d32d-151">返回一个流，数据服务使用此流为从属于指定实体的客户端接收的媒体资源写入二进制数据。</span><span class="sxs-lookup"><span data-stu-id="3d32d-151">Returns the stream that the data service uses to write the binary data for the media resource received from the client that belongs to the specified entity.</span></span></summary>
        <returns><span data-ttu-id="3d32d-152">有效的 <see cref="T:System.Stream" />，数据服务用来写入从客户端收到的二进制数据的内容。</span><span class="sxs-lookup"><span data-stu-id="3d32d-152">A valid <see cref="T:System.Stream" /> the data service uses to write the contents of a binary data received from the client.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="3d32d-153">当与 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> 关联的媒体资源正在处理插入或更新操作时，数据服务运行时将调用 `entity` 方法。</span><span class="sxs-lookup"><span data-stu-id="3d32d-153">The <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> method is called by the data service runtime when an insert or update operation is being processed for the media resource that is associated with the `entity`.</span></span>  
  
 <span data-ttu-id="3d32d-154"><xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A>方法应永远不会返回`null`值。</span><span class="sxs-lookup"><span data-stu-id="3d32d-154">The <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> method should never return a `null` value.</span></span>  
  
 <span data-ttu-id="3d32d-155">`operationContext` 将作为参数提供，因为此接口方法的实现器将需要来自 HTTP 请求标头的信息以便创建写入流。</span><span class="sxs-lookup"><span data-stu-id="3d32d-155">The `operationContext` is supplied as an argument because an implementer of this interface method will need information from the HTTP request headers to create a write stream.</span></span> <span data-ttu-id="3d32d-156">当您实现此方法时，您必须根据需要执行并发性检查。</span><span class="sxs-lookup"><span data-stu-id="3d32d-156">When you implement this method, you must perform concurrency checks as needed.</span></span> <span data-ttu-id="3d32d-157">如果在请求中，包含 If-match 或 None-If-match 请求标头`etag`将不会`null`。</span><span class="sxs-lookup"><span data-stu-id="3d32d-157">If an If-Match or If-None-Match request header was included in the request, the `etag` will not be `null`.</span></span> <span data-ttu-id="3d32d-158">在此情况下，这种方法必须执行适当的并发性检查。</span><span class="sxs-lookup"><span data-stu-id="3d32d-158">In this case, this method must perform the appropriate concurrency check.</span></span> <span data-ttu-id="3d32d-159">如果通过并发性检查，则此方法应返回所请求的流。</span><span class="sxs-lookup"><span data-stu-id="3d32d-159">If the concurrency check passes, this method should return the requested stream.</span></span> <span data-ttu-id="3d32d-160">如果并发性检查失败，则该方法应引发 <xref:System.Data.Services.DataServiceException> 并显示适当的 HTTP 响应代码。</span><span class="sxs-lookup"><span data-stu-id="3d32d-160">If the concurrency checks fail, the method should raise a <xref:System.Data.Services.DataServiceException> with the appropriate HTTP response code.</span></span>  
  
 <span data-ttu-id="3d32d-161">`eTag` 是 If-Match 或 If-None-Match 标头的值。</span><span class="sxs-lookup"><span data-stu-id="3d32d-161">`eTag` is the value of an If-Match or If-None-Match header.</span></span>  
  
 <span data-ttu-id="3d32d-162">以下值的`checkETagForEquality`支持：</span><span class="sxs-lookup"><span data-stu-id="3d32d-162">The following values of `checkETagForEquality` are supported:</span></span>  
  
-   <span data-ttu-id="3d32d-163">`true` -当 eTag 表示 If-match 标头。</span><span class="sxs-lookup"><span data-stu-id="3d32d-163">`true` - when the eTag represents an If-Match header.</span></span>  
  
-   <span data-ttu-id="3d32d-164">`false` -当 eTag 表示一个无-If-match 标头。</span><span class="sxs-lookup"><span data-stu-id="3d32d-164">`false` - when the eTag represents an If-None-Match header.</span></span>  
  
-   <span data-ttu-id="3d32d-165">`null` -一个 If-match 或 None-If-match 标头不存在请求中。</span><span class="sxs-lookup"><span data-stu-id="3d32d-165">`null` - when an If-Match or If-None-Match header is not present in the request.</span></span>  
  
 <span data-ttu-id="3d32d-166">当您实现此方法时，您不得设置 Content-Type 或 eTag HTTP 响应标头，因为它们由数据服务运行时设置。</span><span class="sxs-lookup"><span data-stu-id="3d32d-166">When you implement this method, you must not set the Content-Type or eTag HTTP response headers because they are set by the data service runtime.</span></span> <span data-ttu-id="3d32d-167">您可以通过使用所提供的 `operationContext` 设置剩余 HTTP 响应标头。</span><span class="sxs-lookup"><span data-stu-id="3d32d-167">You may set the remaining HTTP response headers by using the supplied `operationContext`.</span></span>  
  
 <span data-ttu-id="3d32d-168">当实现此方法时，您应该只设置成功响应所需的 `operationContext` 属性。</span><span class="sxs-lookup"><span data-stu-id="3d32d-168">When you implement this method, you should only set the properties on `operationContext` that are required for a successful response.</span></span> <span data-ttu-id="3d32d-169">更改其他 `operationContext` 属性可能会损坏来自数据服务的响应。</span><span class="sxs-lookup"><span data-stu-id="3d32d-169">Changing other properties on `operationContext` may corrupt the response from the data service.</span></span>  
  
 <span data-ttu-id="3d32d-170">当所有字节都成功都写入流时，数据服务运行时将关闭流。</span><span class="sxs-lookup"><span data-stu-id="3d32d-170">The data service runtime closes the stream when all bytes have been successfully written to the stream.</span></span> <span data-ttu-id="3d32d-171">如果在写入到流时出现错误，数据服务将对客户端生成错误响应。</span><span class="sxs-lookup"><span data-stu-id="3d32d-171">If an error occurs while writing to the stream, the data service generates an error response to the client.</span></span>  
  
 <span data-ttu-id="3d32d-172">当您实现 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> 方法时，您应引发以下例外，如下所示：</span><span class="sxs-lookup"><span data-stu-id="3d32d-172">When you implement the <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> method, you should raise the following exceptions as indicated:</span></span>  
  
|<span data-ttu-id="3d32d-173">异常类型</span><span class="sxs-lookup"><span data-stu-id="3d32d-173">Exception type</span></span>|<span data-ttu-id="3d32d-174">条件</span><span class="sxs-lookup"><span data-stu-id="3d32d-174">Condition</span></span>|  
|--------------------|---------------|  
|<xref:System.ArgumentNullException>|<span data-ttu-id="3d32d-175">当 `entity` 或 `operationContext` 为 `null` 时。</span><span class="sxs-lookup"><span data-stu-id="3d32d-175">When `entity` or `operationContext` are `null`.</span></span>|  
|<xref:System.ArgumentException>|<span data-ttu-id="3d32d-176">当 `entity` 不含二进制属性时。</span><span class="sxs-lookup"><span data-stu-id="3d32d-176">When `entity` does not have a binary property.</span></span>|  
|<xref:System.Data.Services.DataServiceException>|<span data-ttu-id="3d32d-177">当不能返回有效的流时。</span><span class="sxs-lookup"><span data-stu-id="3d32d-177">When a valid stream cannot be returned.</span></span>|  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="ResolveType">
      <MemberSignature Language="C#" Value="public string ResolveType (string entitySetName, System.Data.Services.DataServiceOperationContext operationContext);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance string ResolveType(string entitySetName, class System.Data.Services.DataServiceOperationContext operationContext) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Data.Services.Providers.IDataServiceStreamProvider.ResolveType(System.String,System.Data.Services.DataServiceOperationContext)" />
      <MemberSignature Language="VB.NET" Value="Public Function ResolveType (entitySetName As String, operationContext As DataServiceOperationContext) As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::String ^ ResolveType(System::String ^ entitySetName, System::Data::Services::DataServiceOperationContext ^ operationContext);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Data.Services</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="entitySetName" Type="System.String" />
        <Parameter Name="operationContext" Type="System.Data.Services.DataServiceOperationContext" />
      </Parameters>
      <Docs>
        <param name="entitySetName"><span data-ttu-id="3d32d-178">完全限定的实体集名称。</span><span class="sxs-lookup"><span data-stu-id="3d32d-178">Fully-qualified entity set name.</span></span></param>
        <param name="operationContext"><span data-ttu-id="3d32d-179">数据服务用于处理请求的 <see cref="T:System.Data.Services.DataServiceOperationContext" /> 实例。</span><span class="sxs-lookup"><span data-stu-id="3d32d-179">The <see cref="T:System.Data.Services.DataServiceOperationContext" /> instance that is used by the data service to process the request.</span></span></param>
        <summary><span data-ttu-id="3d32d-180">返回一个命名空间限定的类型名称，该名称表示数据服务运行时必须为媒体链接入口创建的类型，该媒体链接入口与正在插入的媒体资源的数据流相关联。</span><span class="sxs-lookup"><span data-stu-id="3d32d-180">Returns a namespace-qualified type name that represents the type that the data service runtime must create for the media link entry that is associated with the data stream for the media resource that is being inserted.</span></span></summary>
        <returns><span data-ttu-id="3d32d-181">命名空间限定的类型名称。</span><span class="sxs-lookup"><span data-stu-id="3d32d-181">A namespace-qualified type name.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="3d32d-182">当新的媒体链接项实体正在与其媒体资源一起处于创建过程中时，数据服务将调用 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.ResolveType%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="3d32d-182">The <xref:System.Data.Services.Providers.IDataServiceStreamProvider.ResolveType%2A> method is called by the data service when a new entity that is a media link entry is being created together with its media resource.</span></span> <span data-ttu-id="3d32d-183">此方法的实现器必须检查 `operationContext` 中的请求标头，并返回一个命名空间限定的类型名称，该名称表示数据服务运行时必须实例化的类型，以便创建与新的媒体资源相关联的媒体链接项。</span><span class="sxs-lookup"><span data-stu-id="3d32d-183">An implementer of this method must inspect the request headers in `operationContext` and return the namespace qualified type name that represents the type that the data service runtime must instantiate to create the media link entry that is associated with the new media resource.</span></span> <span data-ttu-id="3d32d-184">表示此类型名称的字符串将传递给 <xref:System.Data.Services.IUpdatable.CreateResource%2A> 方法，以创建媒体链接项。</span><span class="sxs-lookup"><span data-stu-id="3d32d-184">The string that represents this type name is passed to the <xref:System.Data.Services.IUpdatable.CreateResource%2A> method to create the media link entry.</span></span>  
  
 <span data-ttu-id="3d32d-185">当您实现 <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> 方法时，您应引发以下例外，如下所示：</span><span class="sxs-lookup"><span data-stu-id="3d32d-185">When you implement the <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> method, you should raise the following exceptions as indicated:</span></span>  
  
|<span data-ttu-id="3d32d-186">异常类型</span><span class="sxs-lookup"><span data-stu-id="3d32d-186">Exception type</span></span>|<span data-ttu-id="3d32d-187">条件</span><span class="sxs-lookup"><span data-stu-id="3d32d-187">Condition</span></span>|  
|--------------------|---------------|  
|<xref:System.ArgumentNullException>|<span data-ttu-id="3d32d-188">当 `operationContext` 为 `null` 时。</span><span class="sxs-lookup"><span data-stu-id="3d32d-188">When `operationContext` is `null`.</span></span>|  
|<xref:System.Data.Services.DataServiceException>|<span data-ttu-id="3d32d-189">当无法基于 `operationContext` 解析实体类型名称时。</span><span class="sxs-lookup"><span data-stu-id="3d32d-189">When an entity type name cannot be resolved based on the `operationContext`.</span></span>|  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="StreamBufferSize">
      <MemberSignature Language="C#" Value="public int StreamBufferSize { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance int32 StreamBufferSize" />
      <MemberSignature Language="DocId" Value="P:System.Data.Services.Providers.IDataServiceStreamProvider.StreamBufferSize" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property StreamBufferSize As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property int StreamBufferSize { int get(); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Data.Services</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="3d32d-190">获取流缓冲区的大小。</span><span class="sxs-lookup"><span data-stu-id="3d32d-190">Gets the size of the stream buffer.</span></span></summary>
        <value><span data-ttu-id="3d32d-191">表示缓冲区大小的整数。</span><span class="sxs-lookup"><span data-stu-id="3d32d-191">Integer that represents the size of buffer.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="3d32d-192">默认缓存区大小为 64K 字节。</span><span class="sxs-lookup"><span data-stu-id="3d32d-192">The default buffer size is 64K bytes.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>