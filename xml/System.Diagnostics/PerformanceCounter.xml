<Type Name="PerformanceCounter" FullName="System.Diagnostics.PerformanceCounter">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="15a8a3d84ecf722d426519eb7db8180c8edcb341" />
    <Meta Name="ms.sourcegitcommit" Value="434f60616a9793fa8436744549fc856e94f7a648" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="zh-CN" />
    <Meta Name="ms.lasthandoff" Value="08/25/2018" />
    <Meta Name="ms.locfileid" Value="39973048" />
  </Metadata>
  <TypeSignature Language="C#" Value="public sealed class PerformanceCounter : System.ComponentModel.Component, System.ComponentModel.ISupportInitialize" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi sealed beforefieldinit PerformanceCounter extends System.ComponentModel.Component implements class System.ComponentModel.ISupportInitialize" />
  <TypeSignature Language="DocId" Value="T:System.Diagnostics.PerformanceCounter" />
  <TypeSignature Language="VB.NET" Value="Public NotInheritable Class PerformanceCounter&#xA;Inherits Component&#xA;Implements ISupportInitialize" />
  <TypeSignature Language="C++ CLI" Value="public ref class PerformanceCounter sealed : System::ComponentModel::Component, System::ComponentModel::ISupportInitialize" />
  <TypeSignature Language="F#" Value="type PerformanceCounter = class&#xA;    inherit Component&#xA;    interface ISupportInitialize" />
  <AssemblyInfo>
    <AssemblyName>System</AssemblyName>
    <AssemblyVersion>1.0.5000.0</AssemblyVersion>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.ComponentModel.Component</BaseTypeName>
  </Base>
  <Interfaces>
    <Interface>
      <InterfaceName>System.ComponentModel.ISupportInitialize</InterfaceName>
    </Interface>
  </Interfaces>
  <Attributes>
    <Attribute FrameworkAlternate="xamarinmac-3.0">
      <AttributeName>System.ComponentModel.InstallerType(typeof(System.Diagnostics.PerformanceCounterInstaller))</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-1.1">
      <AttributeName>System.ComponentModel.Designer("Microsoft.VisualStudio.Install.PerformanceCounterDesigner, Microsoft.VisualStudio, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-1.1">
      <AttributeName>System.ComponentModel.InstallerType("System.Diagnostics.PerformanceCounterInstaller,System.Configuration.Install, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
      <AttributeName>System.ComponentModel.InstallerType("System.Diagnostics.PerformanceCounterInstaller,System.Configuration.Install, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
      <AttributeName>System.ComponentModel.InstallerType("System.Diagnostics.PerformanceCounterInstaller,System.Configuration.Install, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
  </Attributes>
  <Docs>
    <summary>
      <span data-ttu-id="c5c0b-101">表示 Windows NT 性能计数器组件。</span>
      <span class="sxs-lookup">
        <span data-stu-id="c5c0b-101">Represents a Windows NT performance counter component.</span>
      </span>
    </summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-102"><xref:System.Diagnostics.PerformanceCounter>组件可用于读取现有预定义的或自定义计数器和发布 （写入） 性能数据到自定义计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-102">The <xref:System.Diagnostics.PerformanceCounter> component can be used for both reading existing predefined or custom counters and publishing (writing) performance data to custom counters.</span></span>  
  
 <span data-ttu-id="c5c0b-103">有许多 Windows 性能监视器中列出的预定义的计数器[添加计数器对话框的](http://go.microsoft.com/fwlink/p/?LinkId=257854)。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-103">There are numerous predefined counters listed in the Windows Performance Monitor's [Add Counters dialog box](http://go.microsoft.com/fwlink/p/?LinkId=257854).</span></span> <span data-ttu-id="c5c0b-104">若要了解有关.NET Framework 性能计数器信息，请参阅[性能计数器](~/docs/framework/debug-trace-profile/performance-counters.md)。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-104">To learn about the .NET Framework performance counters, see [Performance Counters](~/docs/framework/debug-trace-profile/performance-counters.md).</span></span>  
  
 <span data-ttu-id="c5c0b-105">此类型实现<xref:System.IDisposable>接口。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-105">This type implements the <xref:System.IDisposable> interface.</span></span> <span data-ttu-id="c5c0b-106">在使用完类型后，您应直接或间接释放类型。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-106">When you have finished using the type, you should dispose of it either directly or indirectly.</span></span> <span data-ttu-id="c5c0b-107">若要直接释放类型，调用其<xref:System.IDisposable.Dispose%2A>中的方法`try` / `catch`块。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-107">To dispose of the type directly, call its <xref:System.IDisposable.Dispose%2A> method in a `try`/`catch` block.</span></span> <span data-ttu-id="c5c0b-108">若要间接释放类型，请使用 `using`（在 C# 中）或 `Using`（在 Visual Basic 中）等语言构造。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-108">To dispose of it indirectly, use a language construct such as `using` (in C#) or `Using` (in Visual Basic).</span></span> <span data-ttu-id="c5c0b-109">有关详细信息，请参阅中的"使用对象实现 IDisposable"一节<xref:System.IDisposable>接口主题。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-109">For more information, see the "Using an Object that Implements IDisposable" section in the <xref:System.IDisposable> interface topic.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="c5c0b-110">在版本 1.0 和 1.1 版.NET Framework 中，此类要求直接调用方是完全受信任。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-110">In versions 1.0 and 1.1 of the .NET Framework, this class requires immediate callers to be fully trusted.</span></span> <span data-ttu-id="c5c0b-111">从.NET Framework 2.0 版开始，此类要求<xref:System.Diagnostics.PerformanceCounterPermission>针对特定操作。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-111">Starting with the .NET Framework version 2.0, this class requires <xref:System.Diagnostics.PerformanceCounterPermission> for specific actions.</span></span> <span data-ttu-id="c5c0b-112">强烈建议<xref:System.Diagnostics.PerformanceCounterPermission>不授予不完全受信任的代码。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-112">It is strongly recommended that <xref:System.Diagnostics.PerformanceCounterPermission> not be granted to semi-trusted code.</span></span>  <span data-ttu-id="c5c0b-113">能够读取和写入性能计数器允许代码执行操作，例如枚举执行进程并获取其相关信息。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-113">The ability to read and write performance counters allows code to perform actions such as enumerating executing processes and obtaining information about them.</span></span>  
>   
>  <span data-ttu-id="c5c0b-114">此外，传递<xref:System.Diagnostics.PerformanceCounter>对象与不太受信任的代码可以创建一个安全问题。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-114">In addition, passing a <xref:System.Diagnostics.PerformanceCounter> object to less-trusted code can create a security issue.</span></span> <span data-ttu-id="c5c0b-115">永远不会传递性能计数器对象，如<xref:System.Diagnostics.PerformanceCounterCategory>或<xref:System.Diagnostics.PerformanceCounter>到不太受信任的代码。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-115">Never pass performance counter objects, such as a <xref:System.Diagnostics.PerformanceCounterCategory> or <xref:System.Diagnostics.PerformanceCounter>, to less trusted code.</span></span>  
  
 <span data-ttu-id="c5c0b-116">若要读取从性能计数器，创建的实例<xref:System.Diagnostics.PerformanceCounter>类中，设置<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，以及 （可选）<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>或<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>属性，，然后调用<xref:System.Diagnostics.PerformanceCounter.NextValue%2A>方法以执行性能计数器读取。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-116">To read from a performance counter, create an instance of the <xref:System.Diagnostics.PerformanceCounter> class, set the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and, optionally, the <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> or <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> properties, and then call the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method to take a performance counter reading.</span></span>  
  
 <span data-ttu-id="c5c0b-117">若要发布性能计数器数据，创建一个或多个使用自定义计数器<xref:System.Diagnostics.PerformanceCounterCategory.Create%2A?displayProperty=nameWithType>方法中，创建的实例<xref:System.Diagnostics.PerformanceCounter>类中，设置<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>，<xref:System.Diagnostics.PerformanceCounter.CounterName%2A>和 （可选）<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>或<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>属性，然后调用<xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>， <xref:System.Diagnostics.PerformanceCounter.Increment%2A>，或<xref:System.Diagnostics.PerformanceCounter.Decrement%2A>方法，或者设置<xref:System.Diagnostics.PerformanceCounter.RawValue%2A>属性来更改自定义计数器的值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-117">To publish performance counter data, create one or more custom counters using the <xref:System.Diagnostics.PerformanceCounterCategory.Create%2A?displayProperty=nameWithType> method, create an instance of the <xref:System.Diagnostics.PerformanceCounter> class, set the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> and, optionally, <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> or <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> properties, and then call the <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, or <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods, or set the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property to change the value of your custom counter.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-118"><xref:System.Diagnostics.PerformanceCounter.Increment%2A>， <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>，和<xref:System.Diagnostics.PerformanceCounter.Decrement%2A>方法使用联锁更新计数器值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-118">The <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, and <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods use interlocks to update the counter value.</span></span> <span data-ttu-id="c5c0b-119">这可以帮助使计数器值准确在多线程或多进程的情况下，但也会产生对性能产生负面影响。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-119">This helps keep the counter value accurate in multithreaded or multiprocess scenarios, but also results in a performance penalty.</span></span> <span data-ttu-id="c5c0b-120">如果不需要的准确性，互锁操作提供，可以更新<xref:System.Diagnostics.PerformanceCounter.RawValue%2A>属性直接为最多 5 倍的性能提高。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-120">If you do not need the accuracy that interlocked operations provide, you can update the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property directly for up to a 5 times performance improvement.</span></span>  <span data-ttu-id="c5c0b-121">但是，在多线程方案中，为计数器值的某些更新可能被忽略，从而导致不准确的数据。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-121">However, in multithreaded scenarios, some updates to the counter value might be ignored, resulting in inaccurate data.</span></span>  
  
 <span data-ttu-id="c5c0b-122">该计数器是按性能收集数据的机制。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-122">The counter is the mechanism by which performance data is collected.</span></span> <span data-ttu-id="c5c0b-123">注册表存储的所有计数器，其中每个相关系统功能的特定区域的名称。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-123">The registry stores the names of all the counters, each of which is related to a specific area of system functionality.</span></span> <span data-ttu-id="c5c0b-124">示例包括处理器的忙时间、 内存使用情况或通过网络连接接收的字节数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-124">Examples include a processor's busy time, memory usage, or the number of bytes received over a network connection.</span></span>  
  
 <span data-ttu-id="c5c0b-125">通过其名称和其位置唯一标识每个计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-125">Each counter is uniquely identified through its name and its location.</span></span> <span data-ttu-id="c5c0b-126">在文件路径包括驱动器、 目录、 一个或多个子目录和文件名称相同的方式，计数器的信息包含以下四个元素： 计算机、 类别、 类别实例和计数器名称。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-126">In the same way that a file path includes a drive, a directory, one or more subdirectories, and a file name, counter information consists of four elements: the computer, the category, the category instance, and the counter name.</span></span>  
  
 <span data-ttu-id="c5c0b-127">类别或性能对象，该计数器测量的数据，必须包括的计数器信息。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-127">The counter information must include the category, or performance object, that the counter measures data for.</span></span> <span data-ttu-id="c5c0b-128">计算机的类别包括物理组件，如处理器、 磁盘和内存。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-128">A computer's categories include physical components, such as processors, disks, and memory.</span></span> <span data-ttu-id="c5c0b-129">也有系统类别，如进程和线程。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-129">There are also system categories, such as processes and threads.</span></span> <span data-ttu-id="c5c0b-130">分配有一组标准计数器和每个类别相关的功能元素在计算机中。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-130">Each category is related to a functional element within the computer and has a set of standard counters assigned to it.</span></span> <span data-ttu-id="c5c0b-131">在 Windows 2000 系统监视器中，添加计数器对话框的性能对象下拉列表中列出了这些对象，你必须将其包含的计数器路径中。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-131">These objects are listed in the Performance object drop-down list of the Add Counters dialog box within the Windows 2000 System Monitor, and you must include them in the counter path.</span></span> <span data-ttu-id="c5c0b-132">性能数据是按分组到类别它相关。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-132">Performance data is grouped by the category to which is it related.</span></span>  
  
 <span data-ttu-id="c5c0b-133">在某些情况下，可以存在同一类别的多个副本。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-133">In certain cases, several copies of the same category can exist.</span></span> <span data-ttu-id="c5c0b-134">例如，多个进程和线程同时运行，并且有些计算机包含多个处理器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-134">For example, several processes and threads run simultaneously, and some computers contain more than one processor.</span></span> <span data-ttu-id="c5c0b-135">类别副本称为类别实例，并且每个实例都有一组分配给它的标准计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-135">The category copies are called category instances, and each instance has a set of standard counters assigned to it.</span></span> <span data-ttu-id="c5c0b-136">如果类别可以有多个实例，实例规范必须包含的计数器信息中。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-136">If a category can have more than one instance, an instance specification must be included in the counter information.</span></span>  
  
 <span data-ttu-id="c5c0b-137">若要获取执行必要的计算所需的初始或上一个值的计数器的性能数据，请调用<xref:System.Diagnostics.PerformanceCounter.NextValue%2A>方法两次，并使用返回的信息，根据你的应用程序的需要。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-137">To obtain performance data for counters that required an initial or previous value for performing the necessary calculation, call the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method twice and use the information returned as your application requires.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-138">与安装的性能计数器类别[!INCLUDE[dnprdnlong](~/includes/dnprdnlong-md.md)]使用单独的共享的内存，每个性能计数器类别都有自己的内存。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-138">Performance counter categories installed with the [!INCLUDE[dnprdnlong](~/includes/dnprdnlong-md.md)] use separate shared memory, with each performance counter category having its own memory.</span></span> <span data-ttu-id="c5c0b-139">可以通过创建 DWORD 注册表项 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services 中名为 FileMappingSize 指定单独的共享内存的大小\\*\<类别名称 >* \性能。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-139">You can specify the size of separate shared memory by creating a DWORD named FileMappingSize in the registry key HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\\*\<category name>* \Performance.</span></span> <span data-ttu-id="c5c0b-140">FileMappingSize 值设置为该类别的共享的内存大小。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-140">The FileMappingSize value is set to the shared memory size of the category.</span></span> <span data-ttu-id="c5c0b-141">默认大小为 131072 十进制。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-141">The default size is 131072 decimal.</span></span> <span data-ttu-id="c5c0b-142">如果不存在，FileMappingSize 值`fileMappingSize`特性值`performanceCounters`使用 Machine.config 文件中指定的元素时，从而导致额外的配置文件处理的开销。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-142">If the FileMappingSize value is not present, the `fileMappingSize` attribute value for the `performanceCounters` element specified in the Machine.config file is used, causing additional overhead for configuration file processing.</span></span> <span data-ttu-id="c5c0b-143">您可以通过在注册表中设置的文件映射大小来实现对应用程序启动性能的改进。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-143">You can realize a performance improvement for application startup by setting the file mapping size in the registry.</span></span> <span data-ttu-id="c5c0b-144">有关文件映射大小的详细信息，请参阅[ &lt;performanceCounters&gt;](~/docs/framework/configure-apps/file-schema/trace-debug/performancecounters-element.md)。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-144">For more information about the file mapping size, see [&lt;performanceCounters&gt;](~/docs/framework/configure-apps/file-schema/trace-debug/performancecounters-element.md).</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c5c0b-145">下面的代码示例演示如何将<xref:System.Diagnostics.PerformanceCounter>类来创建和使用<xref:System.Diagnostics.PerformanceCounterType.AverageCount64>计数器类型。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-145">The following code example demonstrates the use of the <xref:System.Diagnostics.PerformanceCounter> class to create and use an <xref:System.Diagnostics.PerformanceCounterType.AverageCount64> counter type.</span></span> <span data-ttu-id="c5c0b-146">该示例创建类别、 计数器设置、 从该计数器，并调用收集数据<xref:System.Diagnostics.CounterSampleCalculator>类来解释性能计数器数据。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-146">The example creates categories, sets up counters, collects data from the counters, and calls the <xref:System.Diagnostics.CounterSampleCalculator> class to interpret the performance counter data.</span></span> <span data-ttu-id="c5c0b-147">在控制台窗口中显示的中间和最后一个结果。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-147">The intermediate and final results are displayed in the console window.</span></span> <span data-ttu-id="c5c0b-148">其他性能计数器类型的其他示例，请参阅<xref:System.Diagnostics.PerformanceCounterType>枚举。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-148">For additional examples of other performance counter types, see the <xref:System.Diagnostics.PerformanceCounterType> enumeration.</span></span>  
  
 [!code-cpp[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CPP/averagecount32.cpp#1)]
 [!code-csharp[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CS/averagecount32.cs#1)]
 [!code-vb[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/VB/averagecount32.vb#1)]  
  
 ]]></format>
    </remarks>
    <altmember cref="T:System.Diagnostics.PerformanceCounterType" />
    <altmember cref="T:System.Diagnostics.CounterCreationData" />
    <altmember cref="T:System.Diagnostics.CounterCreationDataCollection" />
    <altmember cref="T:System.Diagnostics.CounterSample" />
    <altmember cref="T:System.Diagnostics.CounterSampleCalculator" />
  </Docs>
  <Members>
    <MemberGroup MemberName=".ctor">
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Docs>
        <permission cref="F:System.Security.Permissions.SecurityAction.LinkDemand">
          <span data-ttu-id="c5c0b-149">对于直接调用方的完全信任。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-149">for full trust for the immediate caller.</span>
          </span>
          <span data-ttu-id="c5c0b-150">部分受信任的代码不能使用此类。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-150">This class cannot be used by partially trusted code.</span>
          </span>
        </permission>
        <summary>
          <span data-ttu-id="c5c0b-151">初始化 <see cref="T:System.Diagnostics.PerformanceCounter" /> 类的新实例。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-151">Initializes a new instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class.</span>
          </span>
        </summary>
      </Docs>
    </MemberGroup>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor" />
      <MemberSignature Language="VB.NET" Value="Public Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-152">初始化 <see cref="T:System.Diagnostics.PerformanceCounter" /> 类的新的只读实例，但不将该实例与任何系统性能计数器或自定义性能计数器关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-152">Initializes a new, read-only instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class, without associating the instance with any system or custom performance counter.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-153">构造函数设置的此重载<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，并<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>属性设置为空字符串 ("")，并设置<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>到本地计算机的属性 ("。")。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-153">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> properties to empty strings (""), and sets the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to the local computer, (".").</span></span>  
  
 <span data-ttu-id="c5c0b-154">此构造函数不初始化性能计数器，因此不会将该实例关联的本地计算机上的现有计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-154">This constructor does not initialize the performance counter, so it does not associate the instance with an existing counter on the local computer.</span></span> <span data-ttu-id="c5c0b-155">若要指向特定的性能计数器，设置<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，和 （可选）<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>和<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>属性，然后才能读取的任何其他属性或尝试从计数器读取。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-155">To point to a specific performance counter, set the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and, optionally, the <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> and <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> properties before reading any other properties or attempting to read from a counter.</span></span> <span data-ttu-id="c5c0b-156">若要写入的性能计数器，设置<xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A>属性设置为`false`。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-156">To write to a performance counter, set the <xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A> property to `false`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-157"><xref:System.Security.Permissions.HostProtectionAttribute>特性应用于此成员具有以下<xref:System.Security.Permissions.HostProtectionAttribute.Resources%2A>属性值： <xref:System.Security.Permissions.HostProtectionResource.Synchronization> &#124; <xref:System.Security.Permissions.HostProtectionResource.SharedState>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-157">The <xref:System.Security.Permissions.HostProtectionAttribute> attribute applied to this member has the following <xref:System.Security.Permissions.HostProtectionAttribute.Resources%2A> property value: <xref:System.Security.Permissions.HostProtectionResource.Synchronization> &#124; <xref:System.Security.Permissions.HostProtectionResource.SharedState>.</span></span> <span data-ttu-id="c5c0b-158"><xref:System.Security.Permissions.HostProtectionAttribute> 不影响桌面应用程序（通常通过双击图标、键入命令或在浏览器中输入 URL 来启动这些应用程序）。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-158">The <xref:System.Security.Permissions.HostProtectionAttribute> does not affect desktop applications (which are typically started by double-clicking an icon, typing a command, or entering a URL in a browser).</span></span> <span data-ttu-id="c5c0b-159">有关详细信息，请参阅<xref:System.Security.Permissions.HostProtectionAttribute>类或[SQL Server 编程和宿主保护属性](~/docs/framework/performance/sql-server-programming-and-host-protection-attributes.md)。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-159">For more information, see the <xref:System.Security.Permissions.HostProtectionAttribute> class or [SQL Server Programming and Host Protection Attributes](~/docs/framework/performance/sql-server-programming-and-host-protection-attributes.md).</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c5c0b-160">下面的代码示例创建的默认实例<xref:System.Diagnostics.PerformanceCounter>类。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-160">The following code example creates a default instance of the <xref:System.Diagnostics.PerformanceCounter> class.</span></span> <span data-ttu-id="c5c0b-161">创建实例后， <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，并<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>属性的值为组和是对的调用结果<xref:System.Diagnostics.PerformanceCounter.NextValue%2A>显示方法。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-161">After the instance is created, the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> property values are set, and the results of a call to the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method are displayed.</span></span>  
  
 [!code-cpp[PerfCounter#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerfCounter/CPP/perfcounter.cpp#1)]
 [!code-csharp[PerfCounter#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerfCounter/CS/perfcounter.cs#1)]
 [!code-vb[PerfCounter#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerfCounter/VB/perfcounter.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-162">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-162">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-163">用于写入的性能计数器类别，如果<see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" />属性是<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-163">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span>
          </span>
          <span data-ttu-id="c5c0b-164">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-164">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter (string categoryName, string counterName);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string categoryName, string counterName) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor(System.String,System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (categoryName As String, counterName As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter(System::String ^ categoryName, System::String ^ counterName);" />
      <MemberSignature Language="F#" Value="new System.Diagnostics.PerformanceCounter : string * string -&gt; System.Diagnostics.PerformanceCounter" Usage="new System.Diagnostics.PerformanceCounter (categoryName, counterName)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters>
        <Parameter Name="categoryName" Type="System.String" />
        <Parameter Name="counterName" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="categoryName">
          <span data-ttu-id="c5c0b-165">此性能计数器关联的性能计数器类别（性能对象）的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-165">The name of the performance counter category (performance object) with which this performance counter is associated.</span>
          </span>
        </param>
        <param name="counterName">
          <span data-ttu-id="c5c0b-166">性能计数器的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-166">The name of the performance counter.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="c5c0b-167">初始化 <see cref="T:System.Diagnostics.PerformanceCounter" /> 类的新的只读实例，并将其与本地计算机上指定的系统性能计数器或自定义性能计数器关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-167">Initializes a new, read-only instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class and associates it with the specified system or custom performance counter on the local computer.</span>
          </span>
          <span data-ttu-id="c5c0b-168">此构造函数要求该类别包含单个实例。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-168">This constructor requires that the category have a single instance.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-169">参数字符串不区分大小写。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-169">The parameter strings are not case-sensitive.</span></span>  
  
 <span data-ttu-id="c5c0b-170">使用此重载来访问属于类别包含单个性能计数器类别实例在本地计算机上的计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-170">Use this overload to access a counter on the local computer that belongs to a category containing a single performance counter category instance.</span></span> <span data-ttu-id="c5c0b-171">如果你尝试使用此构造函数来指出此<xref:System.Diagnostics.PerformanceCounter>实例与包含多个实例，该构造函数引发异常的类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-171">If you attempt to use this constructor to point this <xref:System.Diagnostics.PerformanceCounter> instance to a category that contains multiple instances, the constructor throws an exception.</span></span> <span data-ttu-id="c5c0b-172">此重载可以访问任何只读或读/写计数器，但却是在只读模式下。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-172">This overload can access any read-only or read/write counter, but does so in a read-only mode.</span></span> <span data-ttu-id="c5c0b-173">一个<xref:System.Diagnostics.PerformanceCounter>创建使用此重载实例无法写入该计数器，即使计数器本身为读/写。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-173">A <xref:System.Diagnostics.PerformanceCounter> instance created using this overload cannot write to the counter, even if the counter itself is read/write.</span></span>  
  
 <span data-ttu-id="c5c0b-174">构造函数设置的此重载<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>和<xref:System.Diagnostics.PerformanceCounter.CounterName%2A>的值的属性中传递，设置<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>属性设置为本地计算机"。"，并设置<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>属性为空字符串 ("")。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-174">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> and <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> properties to the values you pass in, sets the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to the local computer, ".", and sets the <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> property to an empty string ("").</span></span>  
  
 <span data-ttu-id="c5c0b-175">此构造函数初始化性能计数器，并将该实例与本地计算机上的现有计数器 （系统或自定义计数器） 相关联。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-175">This constructor initializes the performance counter and associates the instance with an existing counter (either a system or a custom counter) on the local computer.</span></span> <span data-ttu-id="c5c0b-176">为传入的值<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>和<xref:System.Diagnostics.PerformanceCounter.CounterName%2A>属性必须指向本地计算机上的现有性能计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-176">The values that you pass in for the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> and <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> properties must point to an existing performance counter on the local computer.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-177">若要阅读 Windows Vista、 Windows XP Professional x64 Edition 或 Windows Server 2003 中的性能计数器，您必须是 Performance Monitor Users 组的成员或具有管理权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-177">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="c5c0b-178">若要避免无需提升你的特权来访问 Windows Vista 中的性能计数器，请将自己添加到 Performance Monitor Users 组。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-178">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="c5c0b-179">在 Windows Vista 中，用户帐户控制 (UAC) 决定用户的特权。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-179">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="c5c0b-180">如果您是内置的 Administrators 组的成员，将为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-180">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="c5c0b-181">默认情况下，您拥有标准用户角色。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-181">By default, you are in the standard user role.</span></span> <span data-ttu-id="c5c0b-182">若要执行访问性能计数器的代码，首先必须将你的特权从标准用户提升至管理员。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-182">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="c5c0b-183">你可以通过以下方式执行此操作：右键单击应用程序图标并指示需以管理员身份运行。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-183">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-184">
            <paramref name="categoryName" /> 为空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-184">
              <paramref name="categoryName" /> is an empty string ("").</span>
          </span>
          <span data-ttu-id="c5c0b-185">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-185">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-186">
            <paramref name="counterName" /> 为空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-186">
              <paramref name="counterName" /> is an empty string ("").</span>
          </span>
          <span data-ttu-id="c5c0b-187">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-187">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-188">指定的类别不存在。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-188">The category specified does not exist.</span>
          </span>
          <span data-ttu-id="c5c0b-189">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-189">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-190">指定的类别被标记为多实例类别，需要使用实例名来创建性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-190">The category specified is marked as multi-instance and requires the performance counter to be created with an instance name.</span>
          </span>
          <span data-ttu-id="c5c0b-191">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-191">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-192">
            <paramref name="categoryName" /> 和 <paramref name="counterName" /> 已本地化为不同的语言。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-192">
              <paramref name="categoryName" /> and <paramref name="counterName" /> have been localized into different languages.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="c5c0b-193">
            <paramref name="categoryName" /> 或 <paramref name="counterName" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-193">
              <paramref name="categoryName" /> or <paramref name="counterName" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-194">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-194">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-195">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-195">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <exception cref="T:System.UnauthorizedAccessException">
          <span data-ttu-id="c5c0b-196">以不具有管理特权的用户身份正在执行的代码尝试读取性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-196">Code that is executing without administrative privileges attempted to read a performance counter.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-197">用于写入的性能计数器类别，如果<see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" />属性是<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-197">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span>
          </span>
          <span data-ttu-id="c5c0b-198">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-198">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter (string categoryName, string counterName, bool readOnly);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string categoryName, string counterName, bool readOnly) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor(System.String,System.String,System.Boolean)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (categoryName As String, counterName As String, readOnly As Boolean)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter(System::String ^ categoryName, System::String ^ counterName, bool readOnly);" />
      <MemberSignature Language="F#" Value="new System.Diagnostics.PerformanceCounter : string * string * bool -&gt; System.Diagnostics.PerformanceCounter" Usage="new System.Diagnostics.PerformanceCounter (categoryName, counterName, readOnly)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters>
        <Parameter Name="categoryName" Type="System.String" />
        <Parameter Name="counterName" Type="System.String" />
        <Parameter Name="readOnly" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="categoryName">
          <span data-ttu-id="c5c0b-199">此性能计数器关联的性能计数器类别（性能对象）的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-199">The name of the performance counter category (performance object) with which this performance counter is associated.</span>
          </span>
        </param>
        <param name="counterName">
          <span data-ttu-id="c5c0b-200">性能计数器的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-200">The name of the performance counter.</span>
          </span>
        </param>
        <param name="readOnly">
          <span data-ttu-id="c5c0b-201">若要以只读模式访问计数器（但计数器本身可能是可读/写的），则为 <see langword="true" />；若要以读/写模式访问计数器，则为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-201">
              <see langword="true" /> to access the counter in read-only mode (although the counter itself could be read/write); <see langword="false" /> to access the counter in read/write mode.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="c5c0b-202">初始化 <see cref="T:System.Diagnostics.PerformanceCounter" /> 类的新的只读或读/写实例，并将其与本地计算机上指定的系统性能计数器或自定义性能计数器关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-202">Initializes a new, read-only or read/write instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class and associates it with the specified system or custom performance counter on the local computer.</span>
          </span>
          <span data-ttu-id="c5c0b-203">此构造函数要求该类别包含单个实例。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-203">This constructor requires that the category contain a single instance.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-204">参数字符串不区分大小写。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-204">The parameter strings are not case-sensitive.</span></span>  
  
 <span data-ttu-id="c5c0b-205">使用此重载以访问的只读或读/写属于类别包含单个性能计数器类别实例在本地计算机上的计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-205">Use this overload to access a read-only or read/write counter on the local computer that belongs to a category containing a single performance counter category instance.</span></span> <span data-ttu-id="c5c0b-206">如果你尝试使用此构造函数来指出此<xref:System.Diagnostics.PerformanceCounter>实例与包含多个实例，该构造函数引发异常的类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-206">If you attempt to use this constructor to point this <xref:System.Diagnostics.PerformanceCounter> instance to a category that contains multiple instances, the constructor throws an exception.</span></span>  
  
 <span data-ttu-id="c5c0b-207">构造函数设置的此重载<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，并<xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A>中传递的值的属性，设置<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>属性设置为本地计算机"。"，并设置<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>属性为空字符串 ("")。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-207">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A> properties to the values you pass in, sets the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to the local computer, ".", and sets the <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> property to an empty string ("").</span></span>  
  
 <span data-ttu-id="c5c0b-208">此构造函数初始化性能计数器，并将该实例与本地计算机上的现有计数器 （系统或自定义计数器） 相关联。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-208">This constructor initializes the performance counter and associates the instance with an existing counter (either a system or a custom counter) on the local computer.</span></span> <span data-ttu-id="c5c0b-209">为传入的值<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>和<xref:System.Diagnostics.PerformanceCounter.CounterName%2A>属性必须指向本地计算机上的现有性能计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-209">The values that you pass in for the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> and <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> properties must point to an existing performance counter on the local computer.</span></span> <span data-ttu-id="c5c0b-210">如果您指向与性能计数器实例不是有效的调用的构造函数引发异常。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-210">If the performance counter instance that you point to is not valid, calling the constructor throws an exception.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-211">可以使用此重载以连接到系统计数器，但无法写入到系统计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-211">You can use this overload to connect to a system counter, but you cannot write to a system counter.</span></span> <span data-ttu-id="c5c0b-212">因此，设置`readOnly`到`false`何时连接到系统计数器将导致引发异常的构造函数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-212">Therefore, setting `readOnly` to `false` when connecting to a system counter causes the constructor to throw an exception.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-213">若要阅读 Windows Vista、 Windows XP Professional x64 Edition 或 Windows Server 2003 中的性能计数器，您必须是 Performance Monitor Users 组的成员或具有管理权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-213">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="c5c0b-214">若要避免无需提升你的特权来访问 Windows Vista 中的性能计数器，请将自己添加到 Performance Monitor Users 组。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-214">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="c5c0b-215">在 Windows Vista 中，用户帐户控制 (UAC) 决定用户的特权。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-215">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="c5c0b-216">如果您是内置的 Administrators 组的成员，将为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-216">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="c5c0b-217">默认情况下，您拥有标准用户角色。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-217">By default, you are in the standard user role.</span></span> <span data-ttu-id="c5c0b-218">若要执行访问性能计数器的代码，首先必须将你的特权从标准用户提升至管理员。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-218">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="c5c0b-219">你可以通过以下方式执行此操作：右键单击应用程序图标并指示需以管理员身份运行。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-219">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c5c0b-220">下面的代码示例创建的实例<xref:System.Diagnostics.PerformanceCounter>类。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-220">The following code example creates an instance of the <xref:System.Diagnostics.PerformanceCounter> class.</span></span> <span data-ttu-id="c5c0b-221">该示例将类别名称、 计数器名称和标志值，该值指示该计数器不只读的。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-221">The example passes in category names, counter names, and a flag value indicating that the counter is not read-only.</span></span> <span data-ttu-id="c5c0b-222">此代码示例摘自一个更大示例的<xref:System.Diagnostics.PerformanceCounter>类。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-222">This code example is part of a larger example for the <xref:System.Diagnostics.PerformanceCounter> class.</span></span>  
  
 [!code-cpp[PerformanceCounterType.AverageCounter64#2](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CPP/averagecount32.cpp#2)]
 [!code-csharp[PerformanceCounterType.AverageCounter64#2](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CS/averagecount32.cs#2)]
 [!code-vb[PerformanceCounterType.AverageCounter64#2](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/VB/averagecount32.vb#2)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-223">
            <paramref name="categoryName" /> 是空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-223">The <paramref name="categoryName" /> is an empty string ("").</span>
          </span>
          <span data-ttu-id="c5c0b-224">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-224">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-225">
            <paramref name="counterName" /> 是空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-225">The <paramref name="counterName" /> is an empty string ("").</span>
          </span>
          <span data-ttu-id="c5c0b-226">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-226">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-227">指定的类别不存在。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-227">The category specified does not exist.</span>
          </span>
          <span data-ttu-id="c5c0b-228">（如果 <paramref name="readOnly" /> 为 <see langword="true" />）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-228">(if <paramref name="readOnly" /> is <see langword="true" />).</span>
          </span>
          <span data-ttu-id="c5c0b-229">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-229">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-230">指定的类别不是 .NET Framework 自定义类别（如果 <paramref name="readOnly" /> 为 <see langword="false" />）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-230">The category specified is not a .NET Framework custom category (if <paramref name="readOnly" /> is <see langword="false" />).</span>
          </span>
          <span data-ttu-id="c5c0b-231">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-231">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-232">指定的类别被标记为多实例类别，需要使用实例名来创建性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-232">The category specified is marked as multi-instance and requires the performance counter to be created with an instance name.</span>
          </span>
          <span data-ttu-id="c5c0b-233">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-233">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-234">
            <paramref name="categoryName" /> 和 <paramref name="counterName" /> 已本地化为不同的语言。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-234">
              <paramref name="categoryName" /> and <paramref name="counterName" /> have been localized into different languages.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="c5c0b-235">
            <paramref name="categoryName" /> 或 <paramref name="counterName" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-235">
              <paramref name="categoryName" /> or <paramref name="counterName" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-236">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-236">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-237">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-237">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <exception cref="T:System.UnauthorizedAccessException">
          <span data-ttu-id="c5c0b-238">以不具有管理特权的用户身份正在执行的代码尝试读取性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-238">Code that is executing without administrative privileges attempted to read a performance counter.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-239">用于写入的性能计数器类别，如果<see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" />属性是<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-239">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span>
          </span>
          <span data-ttu-id="c5c0b-240">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-240">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter (string categoryName, string counterName, string instanceName);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string categoryName, string counterName, string instanceName) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor(System.String,System.String,System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (categoryName As String, counterName As String, instanceName As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter(System::String ^ categoryName, System::String ^ counterName, System::String ^ instanceName);" />
      <MemberSignature Language="F#" Value="new System.Diagnostics.PerformanceCounter : string * string * string -&gt; System.Diagnostics.PerformanceCounter" Usage="new System.Diagnostics.PerformanceCounter (categoryName, counterName, instanceName)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters>
        <Parameter Name="categoryName" Type="System.String" />
        <Parameter Name="counterName" Type="System.String" />
        <Parameter Name="instanceName" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="categoryName">
          <span data-ttu-id="c5c0b-241">此性能计数器关联的性能计数器类别（性能对象）的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-241">The name of the performance counter category (performance object) with which this performance counter is associated.</span>
          </span>
        </param>
        <param name="counterName">
          <span data-ttu-id="c5c0b-242">性能计数器的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-242">The name of the performance counter.</span>
          </span>
        </param>
        <param name="instanceName">
          <span data-ttu-id="c5c0b-243">性能计数器类别实例的名称，或者为空字符串 ("")（如果该类别包含单个实例）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-243">The name of the performance counter category instance, or an empty string (""), if the category contains a single instance.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="c5c0b-244">初始化 <see cref="T:System.Diagnostics.PerformanceCounter" /> 类的新的只读实例，并将其与本地计算机上指定的系统性能计数器或自定义性能计数器及类别实例关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-244">Initializes a new, read-only instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class and associates it with the specified system or custom performance counter and category instance on the local computer.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-245">参数字符串不区分大小写。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-245">The parameter strings are not case-sensitive.</span></span>  
  
 <span data-ttu-id="c5c0b-246">构造函数设置的此重载<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，并<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>中，将传递的值的属性和设置<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>属性设置为本地计算机"。"。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-246">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> properties to the values you pass in, and sets the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to the local computer, ".".</span></span>  
  
 <span data-ttu-id="c5c0b-247">此构造函数初始化性能计数器，并将该实例与本地计算机上的现有计数器 （系统或自定义计数器） 相关联。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-247">This constructor initializes the performance counter and associates the instance with an existing counter (either a system or a custom counter) on the local computer.</span></span> <span data-ttu-id="c5c0b-248">为传入的值<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，和<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>属性必须指向本地计算机上的现有性能计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-248">The values that you pass in for the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> properties must point to an existing performance counter on the local computer.</span></span> <span data-ttu-id="c5c0b-249">如果您指向与性能计数器实例不是有效的调用的构造函数引发异常。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-249">If the performance counter instance you point to is not valid, calling the constructor throws an exception.</span></span>  
  
 <span data-ttu-id="c5c0b-250">此重载可以访问任何只读或读/写计数器，但却是在只读模式下。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-250">This overload can access any read-only or read/write counter, but does so in a read-only mode.</span></span> <span data-ttu-id="c5c0b-251">一个<xref:System.Diagnostics.PerformanceCounter>创建使用此重载实例无法写入该计数器，即使计数器本身为读/写。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-251">A <xref:System.Diagnostics.PerformanceCounter> instance created using this overload cannot write to the counter, even if the counter itself is read/write.</span></span>  
  
 <span data-ttu-id="c5c0b-252">若要创建性能类别实例，指定`instanceName`上<xref:System.Diagnostics.PerformanceCounter.%23ctor%2A>构造函数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-252">To create a performance category instance, specify an `instanceName` on the <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A> constructor.</span></span> <span data-ttu-id="c5c0b-253">如果指定的类别实例，则`instanceName`已存在的新对象将引用现有的类别实例。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-253">If the category instance specified by `instanceName` already exists the new object will reference the existing category instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-254">若要阅读 Windows Vista、 Windows XP Professional x64 Edition 或 Windows Server 2003 中的性能计数器，您必须是 Performance Monitor Users 组的成员或具有管理权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-254">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="c5c0b-255">若要避免无需提升你的特权来访问 Windows Vista 中的性能计数器，请将自己添加到 Performance Monitor Users 组。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-255">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="c5c0b-256">在 Windows Vista 中，用户帐户控制 (UAC) 决定用户的特权。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-256">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="c5c0b-257">如果您是内置的 Administrators 组的成员，将为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-257">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="c5c0b-258">默认情况下，您拥有标准用户角色。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-258">By default, you are in the standard user role.</span></span> <span data-ttu-id="c5c0b-259">若要执行访问性能计数器的代码，首先必须将你的特权从标准用户提升至管理员。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-259">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="c5c0b-260">你可以通过以下方式执行此操作：右键单击应用程序图标并指示需以管理员身份运行。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-260">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-261">
            <paramref name="categoryName" /> 为空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-261">
              <paramref name="categoryName" /> is an empty string ("").</span>
          </span>
          <span data-ttu-id="c5c0b-262">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-262">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-263">
            <paramref name="counterName" /> 为空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-263">
              <paramref name="counterName" /> is an empty string ("").</span>
          </span>
          <span data-ttu-id="c5c0b-264">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-264">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-265">指定的类别无效。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-265">The category specified is not valid.</span>
          </span>
          <span data-ttu-id="c5c0b-266">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-266">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-267">指定的类别被标记为多实例类别，需要使用实例名来创建性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-267">The category specified is marked as multi-instance and requires the performance counter to be created with an instance name.</span>
          </span>
          <span data-ttu-id="c5c0b-268">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-268">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-269">
            <paramref name="instanceName" /> 的长度超过 127 个字符。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-269">
              <paramref name="instanceName" /> is longer than 127 characters.</span>
          </span>
          <span data-ttu-id="c5c0b-270">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-270">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-271">
            <paramref name="categoryName" /> 和 <paramref name="counterName" /> 已本地化为不同的语言。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-271">
              <paramref name="categoryName" /> and <paramref name="counterName" /> have been localized into different languages.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="c5c0b-272">
            <paramref name="categoryName" /> 或 <paramref name="counterName" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-272">
              <paramref name="categoryName" /> or <paramref name="counterName" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-273">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-273">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-274">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-274">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <exception cref="T:System.UnauthorizedAccessException">
          <span data-ttu-id="c5c0b-275">以不具有管理特权的用户身份正在执行的代码尝试读取性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-275">Code that is executing without administrative privileges attempted to read a performance counter.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-276">用于写入的性能计数器类别，如果<see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" />属性是<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-276">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span>
          </span>
          <span data-ttu-id="c5c0b-277">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-277">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter (string categoryName, string counterName, string instanceName, bool readOnly);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string categoryName, string counterName, string instanceName, bool readOnly) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor(System.String,System.String,System.String,System.Boolean)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (categoryName As String, counterName As String, instanceName As String, readOnly As Boolean)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter(System::String ^ categoryName, System::String ^ counterName, System::String ^ instanceName, bool readOnly);" />
      <MemberSignature Language="F#" Value="new System.Diagnostics.PerformanceCounter : string * string * string * bool -&gt; System.Diagnostics.PerformanceCounter" Usage="new System.Diagnostics.PerformanceCounter (categoryName, counterName, instanceName, readOnly)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="categoryName" Type="System.String" />
        <Parameter Name="counterName" Type="System.String" />
        <Parameter Name="instanceName" Type="System.String" />
        <Parameter Name="readOnly" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="categoryName">
          <span data-ttu-id="c5c0b-278">此性能计数器关联的性能计数器类别（性能对象）的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-278">The name of the performance counter category (performance object) with which this performance counter is associated.</span>
          </span>
        </param>
        <param name="counterName">
          <span data-ttu-id="c5c0b-279">性能计数器的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-279">The name of the performance counter.</span>
          </span>
        </param>
        <param name="instanceName">
          <span data-ttu-id="c5c0b-280">性能计数器类别实例的名称，或者为空字符串 ("")（如果该类别包含单个实例）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-280">The name of the performance counter category instance, or an empty string (""), if the category contains a single instance.</span>
          </span>
        </param>
        <param name="readOnly">
          <span data-ttu-id="c5c0b-281">若要以只读模式访问计数器，则为 <see langword="true" />；若要以读/写模式访问计数器，则为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-281">
              <see langword="true" /> to access a counter in read-only mode; <see langword="false" /> to access a counter in read/write mode.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="c5c0b-282">初始化 <see cref="T:System.Diagnostics.PerformanceCounter" /> 类的新的只读实例或读/写实例，并将其与本地计算机上指定的系统性能计数器或自定义性能计数器及类别实例关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-282">Initializes a new, read-only or read/write instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class and associates it with the specified system or custom performance counter and category instance on the local computer.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-283">参数字符串不区分大小写。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-283">The parameter strings are not case-sensitive.</span></span>  
  
 <span data-ttu-id="c5c0b-284">此重载用于访问性能计数器在只读或读/写模式。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-284">Use this overload to access a performance counter in either read-only or read/write mode.</span></span>  
  
 <span data-ttu-id="c5c0b-285">构造函数设置的此重载<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，并<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>中，它并设置传递到值的属性<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>属性设置为本地计算机"。"。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-285">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> properties to the values you pass in, it and sets the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to the local computer, ".".</span></span>  
  
 <span data-ttu-id="c5c0b-286">此构造函数初始化性能计数器，并将该实例与本地计算机上的现有计数器 （系统或自定义计数器） 相关联。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-286">This constructor initializes the performance counter and associates the instance with an existing counter (either a system or a custom counter) on the local computer.</span></span> <span data-ttu-id="c5c0b-287">为传入的值<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，和<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>属性必须指向本地计算机上的现有性能计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-287">The values that you pass in for the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> properties must point to an existing performance counter on the local computer.</span></span> <span data-ttu-id="c5c0b-288">如果您指向与性能计数器实例不是有效的调用的构造函数引发异常。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-288">If the performance counter instance that you point to is not valid, calling the constructor throws an exception.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-289">可以使用此重载以连接到系统计数器，但无法写入到系统计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-289">You can use this overload to connect to a system counter, but you cannot write to a system counter.</span></span> <span data-ttu-id="c5c0b-290">因此，设置`readOnly`到`false`何时连接到系统计数器将导致引发异常的构造函数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-290">Therefore, setting `readOnly` to `false` when connecting to a system counter causes the constructor to throw an exception.</span></span>  
  
 <span data-ttu-id="c5c0b-291">若要创建性能类别实例，指定`instanceName`上<xref:System.Diagnostics.PerformanceCounter.%23ctor%2A>构造函数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-291">To create a performance category instance, specify an `instanceName` on the <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A> constructor.</span></span> <span data-ttu-id="c5c0b-292">如果指定的类别实例，则`instanceName`已存在的新对象将引用现有的类别实例。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-292">If the category instance specified by `instanceName` already exists the new object will reference the existing category instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-293">若要阅读 Windows Vista、 Windows XP Professional x64 Edition 或 Windows Server 2003 中的性能计数器，您必须是 Performance Monitor Users 组的成员或具有管理权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-293">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="c5c0b-294">若要避免无需提升你的特权来访问 Windows Vista 中的性能计数器，请将自己添加到 Performance Monitor Users 组。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-294">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="c5c0b-295">在 Windows Vista 中，用户帐户控制 (UAC) 决定用户的特权。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-295">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="c5c0b-296">如果您是内置的 Administrators 组的成员，将为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-296">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="c5c0b-297">默认情况下，您拥有标准用户角色。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-297">By default, you are in the standard user role.</span></span> <span data-ttu-id="c5c0b-298">若要执行访问性能计数器的代码，首先必须将你的特权从标准用户提升至管理员。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-298">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="c5c0b-299">你可以通过以下方式执行此操作：右键单击应用程序图标并指示需以管理员身份运行。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-299">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-300">
            <paramref name="categoryName" /> 为空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-300">
              <paramref name="categoryName" /> is an empty string ("").</span>
          </span>
          <span data-ttu-id="c5c0b-301">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-301">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-302">
            <paramref name="counterName" /> 为空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-302">
              <paramref name="counterName" /> is an empty string ("").</span>
          </span>
          <span data-ttu-id="c5c0b-303">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-303">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-304">所请求的读/写权限设置对此计数器无效。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-304">The read/write permission setting requested is invalid for this counter.</span>
          </span>
          <span data-ttu-id="c5c0b-305">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-305">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-306">指定的类别不存在（如果 <paramref name="readOnly" /> 为 <see langword="true" />）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-306">The category specified does not exist (if <paramref name="readOnly" /> is <see langword="true" />).</span>
          </span>
          <span data-ttu-id="c5c0b-307">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-307">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-308">指定的类别不是 .NET Framework 自定义类别（如果 <paramref name="readOnly" /> 为 <see langword="false" />）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-308">The category specified is not a .NET Framework custom category (if <paramref name="readOnly" /> is <see langword="false" />).</span>
          </span>
          <span data-ttu-id="c5c0b-309">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-309">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-310">指定的类别被标记为多实例类别，需要使用实例名来创建性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-310">The category specified is marked as multi-instance and requires the performance counter to be created with an instance name.</span>
          </span>
          <span data-ttu-id="c5c0b-311">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-311">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-312">
            <paramref name="instanceName" /> 的长度超过 127 个字符。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-312">
              <paramref name="instanceName" /> is longer than 127 characters.</span>
          </span>
          <span data-ttu-id="c5c0b-313">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-313">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-314">
            <paramref name="categoryName" /> 和 <paramref name="counterName" /> 已本地化为不同的语言。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-314">
              <paramref name="categoryName" /> and <paramref name="counterName" /> have been localized into different languages.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="c5c0b-315">
            <paramref name="categoryName" /> 或 <paramref name="counterName" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-315">
              <paramref name="categoryName" /> or <paramref name="counterName" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-316">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-316">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-317">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-317">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <exception cref="T:System.UnauthorizedAccessException">
          <span data-ttu-id="c5c0b-318">以不具有管理特权的用户身份正在执行的代码尝试读取性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-318">Code that is executing without administrative privileges attempted to read a performance counter.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-319">用于写入的性能计数器类别，如果<see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" />属性是<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-319">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span>
          </span>
          <span data-ttu-id="c5c0b-320">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-320">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter (string categoryName, string counterName, string instanceName, string machineName);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string categoryName, string counterName, string instanceName, string machineName) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor(System.String,System.String,System.String,System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (categoryName As String, counterName As String, instanceName As String, machineName As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter(System::String ^ categoryName, System::String ^ counterName, System::String ^ instanceName, System::String ^ machineName);" />
      <MemberSignature Language="F#" Value="new System.Diagnostics.PerformanceCounter : string * string * string * string -&gt; System.Diagnostics.PerformanceCounter" Usage="new System.Diagnostics.PerformanceCounter (categoryName, counterName, instanceName, machineName)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="categoryName" Type="System.String" />
        <Parameter Name="counterName" Type="System.String" />
        <Parameter Name="instanceName" Type="System.String" />
        <Parameter Name="machineName" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="categoryName">
          <span data-ttu-id="c5c0b-321">此性能计数器关联的性能计数器类别（性能对象）的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-321">The name of the performance counter category (performance object) with which this performance counter is associated.</span>
          </span>
        </param>
        <param name="counterName">
          <span data-ttu-id="c5c0b-322">性能计数器的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-322">The name of the performance counter.</span>
          </span>
        </param>
        <param name="instanceName">
          <span data-ttu-id="c5c0b-323">性能计数器类别实例的名称，或者为空字符串 ("")（如果该类别包含单个实例）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-323">The name of the performance counter category instance, or an empty string (""), if the category contains a single instance.</span>
          </span>
        </param>
        <param name="machineName">
          <span data-ttu-id="c5c0b-324">性能计数器及其关联的类别所在的计算机。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-324">The computer on which the performance counter and its associated category exist.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="c5c0b-325">初始化 <see cref="T:System.Diagnostics.PerformanceCounter" /> 类的新的只读实例，并将其与指定计算机上指定的系统性能计数器或自定义性能计数器及类别实例关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-325">Initializes a new, read-only instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class and associates it with the specified system or custom performance counter and category instance, on the specified computer.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-326">参数字符串不区分大小写。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-326">The parameter strings are not case-sensitive.</span></span>  
  
 <span data-ttu-id="c5c0b-327">此构造函数的重载<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>， <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>，和<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>中传递的值的属性。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-327">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>, and <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> properties to the values you pass in.</span></span>  
  
 <span data-ttu-id="c5c0b-328">此构造函数初始化性能计数器，并将该实例与指定的计算机上的现有计数器 （系统或自定义计数器） 相关联。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-328">This constructor initializes the performance counter and associates the instance with an existing counter (either a system or a custom counter) on the specified computer.</span></span> <span data-ttu-id="c5c0b-329">为传入的值<xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>和<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>属性必须指向的现有性能计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-329">The values that you pass in for the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> and <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> properties must point to an existing performance counter.</span></span> <span data-ttu-id="c5c0b-330">如果您指向与性能计数器实例不是有效的调用的构造函数引发异常。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-330">If the performance counter instance you point to is not valid, calling the constructor throws an exception.</span></span> <span data-ttu-id="c5c0b-331">此重载可以访问任何只读或读/写计数器，但却是在只读模式下。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-331">This overload can access any read-only or read/write counter, but does so in a read-only mode.</span></span> <span data-ttu-id="c5c0b-332">一个<xref:System.Diagnostics.PerformanceCounter>创建使用此重载实例无法写入该计数器，即使计数器本身为读/写。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-332">A <xref:System.Diagnostics.PerformanceCounter> instance created using this overload cannot write to the counter, even if the counter itself is read/write.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-333">无法写入远程性能计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-333">You cannot write to remote performance counters.</span></span> <span data-ttu-id="c5c0b-334">没有任何重载允许您指定的读/写实例<xref:System.Diagnostics.PerformanceCounter>连接到远程计算机的类。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-334">There is no overload that allows you to specify a read/write instance of the <xref:System.Diagnostics.PerformanceCounter> class that connects to a remote computer.</span></span>  
  
 <span data-ttu-id="c5c0b-335">若要创建性能类别实例，指定`instanceName`上<xref:System.Diagnostics.PerformanceCounter.%23ctor%2A>构造函数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-335">To create a performance category instance, specify an `instanceName` on the <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A> constructor.</span></span> <span data-ttu-id="c5c0b-336">如果指定的类别实例，则`instanceName`已存在的新对象将引用现有的类别实例。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-336">If the category instance specified by `instanceName` already exists the new object will reference the existing category instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-337">若要阅读 Windows Vista、 Windows XP Professional x64 Edition 或 Windows Server 2003 中的性能计数器，您必须是 Performance Monitor Users 组的成员或具有管理权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-337">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="c5c0b-338">若要避免无需提升你的特权来访问 Windows Vista 中的性能计数器，请将自己添加到 Performance Monitor Users 组。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-338">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="c5c0b-339">在 Windows Vista 中，用户帐户控制 (UAC) 决定用户的特权。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-339">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="c5c0b-340">如果您是内置的 Administrators 组的成员，将为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-340">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="c5c0b-341">默认情况下，您拥有标准用户角色。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-341">By default, you are in the standard user role.</span></span> <span data-ttu-id="c5c0b-342">若要执行访问性能计数器的代码，首先必须将你的特权从标准用户提升至管理员。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-342">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="c5c0b-343">你可以通过以下方式执行此操作：右键单击应用程序图标并指示需以管理员身份运行。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-343">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-344">在 Windows Vista 中，远程计算机是工作组的成员时您可能需要禁用 UAC，以便本地用户帐户未进行筛选，并可以将提升为管理员帐户。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-344">In Windows Vista, when the remote computer is a member of a workgroup, you may need to disable UAC so that the local user account is not filtered and can be elevated to an administrator account.</span></span> <span data-ttu-id="c5c0b-345">出于安全原因，禁用 UAC 应最后的手段。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-345">For security reasons, disabling UAC should be a last resort.</span></span> <span data-ttu-id="c5c0b-346">有关禁用 UAC 的信息，请参阅[用户帐户控制和 WMI](http://go.microsoft.com/fwlink/?LinkId=91617)。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-346">For information on disabling UAC, see [User Account Control and WMI](http://go.microsoft.com/fwlink/?LinkId=91617).</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-347">
            <paramref name="categoryName" /> 为空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-347">
              <paramref name="categoryName" /> is an empty string ("").</span>
          </span>
          <span data-ttu-id="c5c0b-348">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-348">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-349">
            <paramref name="counterName" /> 为空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-349">
              <paramref name="counterName" /> is an empty string ("").</span>
          </span>
          <span data-ttu-id="c5c0b-350">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-350">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-351">所请求的读/写权限设置对此计数器无效。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-351">The read/write permission setting requested is invalid for this counter.</span>
          </span>
          <span data-ttu-id="c5c0b-352">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-352">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-353">指定的计算机上不存在该计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-353">The counter does not exist on the specified computer.</span>
          </span>
          <span data-ttu-id="c5c0b-354">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-354">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-355">指定的类别被标记为多实例类别，需要使用实例名来创建性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-355">The category specified is marked as multi-instance and requires the performance counter to be created with an instance name.</span>
          </span>
          <span data-ttu-id="c5c0b-356">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-356">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-357">
            <paramref name="instanceName" /> 的长度超过 127 个字符。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-357">
              <paramref name="instanceName" /> is longer than 127 characters.</span>
          </span>
          <span data-ttu-id="c5c0b-358">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-358">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-359">
            <paramref name="categoryName" /> 和 <paramref name="counterName" /> 已本地化为不同的语言。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-359">
              <paramref name="categoryName" /> and <paramref name="counterName" /> have been localized into different languages.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentException">
          <span data-ttu-id="c5c0b-360">
            <paramref name="machineName" /> 参数无效。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-360">The <paramref name="machineName" /> parameter is not valid.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="c5c0b-361">
            <paramref name="categoryName" /> 或 <paramref name="counterName" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-361">
              <paramref name="categoryName" /> or <paramref name="counterName" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-362">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-362">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-363">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-363">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <exception cref="T:System.UnauthorizedAccessException">
          <span data-ttu-id="c5c0b-364">以不具有管理特权的用户身份正在执行的代码尝试读取性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-364">Code that is executing without administrative privileges attempted to read a performance counter.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-365">用于写入的性能计数器类别，如果<see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" />属性是<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-365">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span>
          </span>
          <span data-ttu-id="c5c0b-366">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-366">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName="BeginInit">
      <MemberSignature Language="C#" Value="public void BeginInit ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void BeginInit() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.BeginInit" />
      <MemberSignature Language="VB.NET" Value="Public Sub BeginInit ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual void BeginInit();" />
      <MemberSignature Language="F#" Value="abstract member BeginInit : unit -&gt; unit&#xA;override this.BeginInit : unit -&gt; unit" Usage="performanceCounter.BeginInit " />
      <MemberType>Method</MemberType>
      <Implements>
        <InterfaceMember>M:System.ComponentModel.ISupportInitialize.BeginInit</InterfaceMember>
      </Implements>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-367">开始初始化在窗体上使用或由另一个组件使用的 <see cref="T:System.Diagnostics.PerformanceCounter" /> 实例。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-367">Begins the initialization of a <see cref="T:System.Diagnostics.PerformanceCounter" /> instance used on a form or by another component.</span>
          </span>
          <span data-ttu-id="c5c0b-368">此初始化在运行时发生。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-368">The initialization occurs at runtime.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-369">[!INCLUDE[vsprvslong](~/includes/vsprvslong-md.md)]设计环境使用此方法来启动窗体或由另一个组件使用的组件的初始化。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-369">The [!INCLUDE[vsprvslong](~/includes/vsprvslong-md.md)] design environment uses this method to start the initialization of a component that is used on a form or by another component.</span></span> <span data-ttu-id="c5c0b-370"><xref:System.Diagnostics.PerformanceCounter.EndInit%2A>方法结束初始化。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-370">The <xref:System.Diagnostics.PerformanceCounter.EndInit%2A> method ends the initialization.</span></span> <span data-ttu-id="c5c0b-371">使用<xref:System.Diagnostics.PerformanceCounter.BeginInit%2A>和<xref:System.Diagnostics.PerformanceCounter.EndInit%2A>方法可以防止完全初始化之前使用该组件。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-371">Using the <xref:System.Diagnostics.PerformanceCounter.BeginInit%2A> and <xref:System.Diagnostics.PerformanceCounter.EndInit%2A> methods prevents the component from being used before it is fully initialized.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="CategoryName">
      <MemberSignature Language="C#" Value="public string CategoryName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string CategoryName" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.CategoryName" />
      <MemberSignature Language="VB.NET" Value="Public Property CategoryName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ CategoryName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.CategoryName : string with get, set" Usage="System.Diagnostics.PerformanceCounter.CategoryName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netcore-2.0;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.ReadOnly(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.RecommendedAsConfigurable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CategoryValueConverter, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CategoryValueConverter, System.Design, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CategoryValueConverter, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
          <AttributeName>System.ComponentModel.SettingsBindable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-372">获取或设置此性能计数器的性能计数器类别的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-372">Gets or sets the name of the performance counter category for this performance counter.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="c5c0b-373">此性能计数器关联的性能计数器类别（性能对象）的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-373">The name of the performance counter category (performance object) with which this performance counter is associated.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-374"><xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>穦 `Performance Object`字段的性能计数器管理器 MMC 管理单元中的`Add Counter`对话框。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-374">The <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> is displayed in the `Performance Object` field of Performance Counter Manager MMC snap in's `Add Counter` dialog box.</span></span>  
  
 <span data-ttu-id="c5c0b-375">性能计数器监视类别或计算机上的性能对象的行为。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-375">A performance counter monitors the behavior of a category, or performance object, on a computer.</span></span> <span data-ttu-id="c5c0b-376">类别包括物理组件 （如处理器、 磁盘和内存） 和系统对象 （如进程和线程）。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-376">Categories include physical components (such as processors, disks, and memory) and system objects (such as processes and threads).</span></span> <span data-ttu-id="c5c0b-377">与相同的性能对象相关的系统计数器被分组到类别，指示其共同点。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-377">System counters that are related to the same performance object are grouped into a category that indicates their common focus.</span></span> <span data-ttu-id="c5c0b-378">创建的实例时<xref:System.Diagnostics.PerformanceCounter>类，第一次指示与该组件将进行交互，，然后从该类别中选择一个计数器的类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-378">When you create an instance of the <xref:System.Diagnostics.PerformanceCounter> class, you first indicate the category with which the component will interact, and then you choose a counter from that category.</span></span>  
  
 <span data-ttu-id="c5c0b-379">例如，一个 Windows 计数器类别为内存类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-379">For example, one Windows counter category is the Memory category.</span></span> <span data-ttu-id="c5c0b-380">此类别中的系统计数器跟踪内存数据，如可用的字节数和缓存的字节数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-380">System counters within this category track memory data such as the number of bytes available and the number of bytes cached.</span></span> <span data-ttu-id="c5c0b-381">如果你想要使用缓存在应用程序中的字节数，将创建的实例<xref:System.Diagnostics.PerformanceCounter>组件，将其连接到内存类别，然后选取该类别中的相应计数器 （在此情况下，缓存字节数）。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-381">If you wanted to work with the bytes cached in your application, you would create an instance of the <xref:System.Diagnostics.PerformanceCounter> component, connect it to the Memory category, and then pick the appropriate counter (in this case, Cached Bytes) from that category.</span></span>  
  
 <span data-ttu-id="c5c0b-382">尽管您的系统提供很多更多计数器类别，你将可能与之交互最频繁的类别是缓存、 内存、 对象、 物理磁盘、 进程、 处理器、 服务器、 系统和线程类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-382">Although your system makes many more counter categories available, the categories that you will probably interact with most frequently are the Cache, Memory, Objects, PhysicalDisk, Process, Processor, Server, System, and Thread categories.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c5c0b-383">下面的代码示例创建的默认实例<xref:System.Diagnostics.PerformanceCounter>类。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-383">The following code example creates a default instance of the <xref:System.Diagnostics.PerformanceCounter> class.</span></span> <span data-ttu-id="c5c0b-384">创建实例后， <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，并<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>属性的值为组和是对的调用结果<xref:System.Diagnostics.PerformanceCounter.NextValue%2A>显示方法。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-384">After the instance is created, the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> property values are set, and the results of a call to the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method are displayed.</span></span>  
  
 [!code-cpp[PerfCounter#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerfCounter/CPP/perfcounter.cpp#1)]
 [!code-csharp[PerfCounter#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerfCounter/CS/perfcounter.cs#1)]
 [!code-vb[PerfCounter#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerfCounter/VB/perfcounter.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="c5c0b-385">
            <see cref="P:System.Diagnostics.PerformanceCounter.CategoryName" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-385">The <see cref="P:System.Diagnostics.PerformanceCounter.CategoryName" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-386">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-386">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <altmember cref="P:System.Diagnostics.Process.ProcessName" />
      </Docs>
    </Member>
    <Member MemberName="Close">
      <MemberSignature Language="C#" Value="public void Close ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance void Close() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.Close" />
      <MemberSignature Language="VB.NET" Value="Public Sub Close ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void Close();" />
      <MemberSignature Language="F#" Value="member this.Close : unit -&gt; unit" Usage="performanceCounter.Close " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-387">关闭性能计数器并释放由此性能计数器实例分配的所有资源。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-387">Closes the performance counter and frees all the resources allocated by this performance counter instance.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-388">在将<xref:System.Diagnostics.PerformanceCounter>与驻留在服务器上，系统的性能计数器的实例初始化实例，并将分配内存以包含计数器示例的信息。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-388">When you associate this <xref:System.Diagnostics.PerformanceCounter> instance with a performance counter that resides on the server, the system initializes the instance and allocates memory to contain counter sample information.</span></span> <span data-ttu-id="c5c0b-389"><xref:System.Diagnostics.PerformanceCounter.Close%2A>方法释放分配给对象的资源。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-389">The <xref:System.Diagnostics.PerformanceCounter.Close%2A> method frees the resources allocated by the object.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="CloseSharedResources">
      <MemberSignature Language="C#" Value="public static void CloseSharedResources ();" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig void CloseSharedResources() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.CloseSharedResources" />
      <MemberSignature Language="VB.NET" Value="Public Shared Sub CloseSharedResources ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static void CloseSharedResources();" />
      <MemberSignature Language="F#" Value="static member CloseSharedResources : unit -&gt; unit" Usage="System.Diagnostics.PerformanceCounter.CloseSharedResources " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-390">释放由计数器分配的性能计数器库共享状态。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-390">Frees the performance counter library shared state allocated by the counters.</span>
          </span>
        </summary>
        <remarks>To be added.</remarks>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-391">用于读取性能计数器类别。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-391">for reading the performance counter category.</span>
          </span>
          <span data-ttu-id="c5c0b-392">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-392">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName="CounterHelp">
      <MemberSignature Language="C#" Value="public string CounterHelp { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string CounterHelp" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.CounterHelp" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property CounterHelp As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ CounterHelp { System::String ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.CounterHelp : string" Usage="System.Diagnostics.PerformanceCounter.CounterHelp" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.ReadOnly(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.Diagnostics.MonitoringDescription("A description describing the counter.")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.MonoTODO</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
          <AttributeName>System.Diagnostics.MonitoringDescription("PC_CounterHelp")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-393">获取此性能计数器的说明。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-393">Gets the description for this performance counter.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="c5c0b-394">此性能计数器测量的项或数量的说明。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-394">A description of the item or quantity that this performance counter measures.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-395">在性能计数器管理器 MMC 管理单元中显示的添加计数器对话框<xref:System.Diagnostics.PerformanceCounter.CounterHelp%2A>当用户从计数器列表中选择一个计数器，并单击解释按钮的文本。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-395">The Add Counters dialog box of the Performance Counter Manager MMC snap in displays the <xref:System.Diagnostics.PerformanceCounter.CounterHelp%2A> text when a user selects a counter from the counters list and clicks the Explain button.</span></span>  
  
 <span data-ttu-id="c5c0b-396">创建新的计数器，请使用<xref:System.Diagnostics.PerformanceCounter.CounterHelp%2A>用户可以确定是否将计数器添加到系统监视器显示此文本以描述该计数器的监视器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-396">When you create a new counter, use the <xref:System.Diagnostics.PerformanceCounter.CounterHelp%2A> text to describe what the counter monitors do so the user can determine whether to add the counter to the System Monitor's display.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-397">如果为值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>属性是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process>使用.NET Framework 版本 1.0 或 1.1 版中，创建性能计数器类别和<xref:System.InvalidOperationException>引发。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-397">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="c5c0b-398">使用早期版本创建的性能计数器类别使用全局共享的内存和的值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>必须是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-398">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="c5c0b-399">如果在版本 1.0 或 1.1 版.NET Framework 上运行的应用程序不使用类别，删除并重新创建该类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-399">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-400">若要阅读 Windows Vista、 Windows XP Professional x64 Edition 或 Windows Server 2003 中的性能计数器，您必须是 Performance Monitor Users 组的成员或具有管理权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-400">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="c5c0b-401">若要避免无需提升你的特权来访问 Windows Vista 中的性能计数器，请将自己添加到 Performance Monitor Users 组。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-401">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="c5c0b-402">在 Windows Vista 中，用户帐户控制 (UAC) 决定用户的特权。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-402">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="c5c0b-403">如果您是内置的 Administrators 组的成员，将为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-403">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="c5c0b-404">默认情况下，您拥有标准用户角色。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-404">By default, you are in the standard user role.</span></span> <span data-ttu-id="c5c0b-405">若要执行访问性能计数器的代码，首先必须将你的特权从标准用户提升至管理员。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-405">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="c5c0b-406">你可以通过以下方式执行此操作：右键单击应用程序图标并指示需以管理员身份运行。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-406">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-407">
            <see cref="T:System.Diagnostics.PerformanceCounter" /> 实例未与性能计数器关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-407">The <see cref="T:System.Diagnostics.PerformanceCounter" /> instance is not associated with a performance counter.</span>
          </span>
          <span data-ttu-id="c5c0b-408">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-408">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-409">使用全局共享内存时，<see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> 属性设置为 <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-409">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-410">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-410">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <exception cref="T:System.UnauthorizedAccessException">
          <span data-ttu-id="c5c0b-411">以不具有管理特权的用户身份正在执行的代码尝试读取性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-411">Code that is executing without administrative privileges attempted to read a performance counter.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-412">用于读取性能计数器类别。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-412">for reading the performance counter category.</span>
          </span>
          <span data-ttu-id="c5c0b-413">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-413">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName="CounterName">
      <MemberSignature Language="C#" Value="public string CounterName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string CounterName" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.CounterName" />
      <MemberSignature Language="VB.NET" Value="Public Property CounterName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ CounterName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.CounterName : string with get, set" Usage="System.Diagnostics.PerformanceCounter.CounterName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netcore-2.0;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.ReadOnly(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.RecommendedAsConfigurable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CounterNameConverter, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CounterNameConverter, System.Design, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CounterNameConverter, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
          <AttributeName>System.ComponentModel.SettingsBindable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-414">获取或设置与此 <see cref="T:System.Diagnostics.PerformanceCounter" /> 实例关联的性能计数器的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-414">Gets or sets the name of the performance counter that is associated with this <see cref="T:System.Diagnostics.PerformanceCounter" /> instance.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="c5c0b-415">计数器的名称，它一般描述计数的数量。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-415">The name of the counter, which generally describes the quantity being counted.</span>
          </span>
          <span data-ttu-id="c5c0b-416">此名称显示在性能计数器管理器 MMC 管理单元的“添加计数器”对话框的计数器列表中。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-416">This name is displayed in the list of counters of the Performance Counter Manager MMC snap in's Add Counters dialog box.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-417">从 Windows 性能管理器的获取一系列可用的预先存在计数器[添加计数器对话框的](http://go.microsoft.com/fwlink/p/?LinkId=257854)。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-417">You can get a list of available pre-existing counters from the Windows Performance Manager’s [Add Counters dialog box](http://go.microsoft.com/fwlink/p/?LinkId=257854).</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c5c0b-418">下面的代码示例演示如何设置<xref:System.Diagnostics.PerformanceCounter.CounterName%2A>属性设置为典型的计数器名称。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-418">The following code example shows how to set the <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> property to a typical counter name.</span></span>  
  
 [!code-cpp[PerfCounter#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerfCounter/CPP/perfcounter.cpp#1)]
 [!code-csharp[PerfCounter#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerfCounter/CS/perfcounter.cs#1)]
 [!code-vb[PerfCounter#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerfCounter/VB/perfcounter.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="c5c0b-419">
            <see cref="P:System.Diagnostics.PerformanceCounter.CounterName" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-419">The <see cref="P:System.Diagnostics.PerformanceCounter.CounterName" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-420">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-420">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="CounterType">
      <MemberSignature Language="C#" Value="public System.Diagnostics.PerformanceCounterType CounterType { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.Diagnostics.PerformanceCounterType CounterType" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.CounterType" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property CounterType As PerformanceCounterType" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Diagnostics::PerformanceCounterType CounterType { System::Diagnostics::PerformanceCounterType get(); };" />
      <MemberSignature Language="F#" Value="member this.CounterType : System.Diagnostics.PerformanceCounterType" Usage="System.Diagnostics.PerformanceCounter.CounterType" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.Diagnostics.MonitoringDescription("The type of the counter.")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
          <AttributeName>System.Diagnostics.MonitoringDescription("PC_CounterType")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Diagnostics.PerformanceCounterType</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-421">获取关联的性能计数器的计数器类型。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-421">Gets the counter type of the associated performance counter.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="c5c0b-422">
            <see cref="T:System.Diagnostics.PerformanceCounterType" />，它既描述计数器如何与监视应用程序交互，又描述计数器包含的值的特性（例如计算所得和非计算所得）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-422">A <see cref="T:System.Diagnostics.PerformanceCounterType" /> that describes both how the counter interacts with a monitoring application and the nature of the values it contains (for example, calculated or uncalculated).</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-423"><xref:System.Diagnostics.PerformanceCounterType>枚举包含的性能计数器可与之交互的类型。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-423">The <xref:System.Diagnostics.PerformanceCounterType> enumeration contains the types of performance counters that you can interact with.</span></span> <span data-ttu-id="c5c0b-424">某些计数器类型表示计算所得的值，例如系统已进行的计数器度量平均值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-424">Some of the counter types represent calculated values, such as the average of the counter measurements the system has taken.</span></span> <span data-ttu-id="c5c0b-425">其他类型表示原始的或未计算值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-425">Other types represent raw, or uncalculated, values.</span></span> <span data-ttu-id="c5c0b-426">下表显示将与最常交互的计数器类型。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-426">The following table shows the counter types that you will interact with most frequently.</span></span>  
  
|<span data-ttu-id="c5c0b-427">计数器的责任</span><span class="sxs-lookup"><span data-stu-id="c5c0b-427">Counter's Responsibility</span></span>|<span data-ttu-id="c5c0b-428">PerformanceCounterType 值</span><span class="sxs-lookup"><span data-stu-id="c5c0b-428">PerformanceCounterType Value</span></span>|<span data-ttu-id="c5c0b-429">示例</span><span class="sxs-lookup"><span data-stu-id="c5c0b-429">Example</span></span>|  
|------------------------------|----------------------------------|-------------|  
|<span data-ttu-id="c5c0b-430">维护项或操作的简单计数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-430">Maintain a simple count of items or operations.</span></span>|`NumberOfItems32`|<span data-ttu-id="c5c0b-431">跟踪接收作为 32 位整数的订单数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-431">Tracking the number of orders received as a 32-bit integer.</span></span>|  
|<span data-ttu-id="c5c0b-432">维护更高容量的简单计数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-432">Maintain a higher-capacity simple count.</span></span>|`NumberOfItems64`|<span data-ttu-id="c5c0b-433">跟踪具有很大的站点的订单数，存储为一个 64 位整数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-433">Tracking the number of orders for a site with very high volume, stored as a 64-bit integer.</span></span>|  
|<span data-ttu-id="c5c0b-434">跟踪项或操作每秒的数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-434">Track the number of items or operations per second.</span></span>|`RateOfCountsPerSecond32`|<span data-ttu-id="c5c0b-435">在站点上每秒接收的跟踪订单。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-435">Tracking orders received per second on a site.</span></span>|  
|<span data-ttu-id="c5c0b-436">跟踪大量项或每秒操作数之间的更高容量。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-436">Track a higher-capacity number of items or operations per second.</span></span>|`RateOfCountsPerSecond64`|<span data-ttu-id="c5c0b-437">跟踪订单上每秒接收具有很大的站点。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-437">Tracking orders received per second on a site with very high volume.</span></span>|  
|<span data-ttu-id="c5c0b-438">计算的平均时间来执行进程或处理项目</span><span class="sxs-lookup"><span data-stu-id="c5c0b-438">Calculate the average time to perform a process or to process an item</span></span>|`AverageTimer32`|<span data-ttu-id="c5c0b-439">计算一个订单处理所用的平均时间。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-439">Calculate the average time an order takes to be processed.</span></span>|  
  
 <span data-ttu-id="c5c0b-440">当创建一个其类型需要使用相应的基准计数器的计数器时，必须声明该计数器和中的基本<xref:System.Diagnostics.CounterCreationDataCollection>传递到<xref:System.Diagnostics.PerformanceCounterCategory.Create%2A?displayProperty=nameWithType>方法。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-440">When you create a counter whose type requires the use of a corresponding base counter, you must declare the counter and the base in the <xref:System.Diagnostics.CounterCreationDataCollection> you pass into the <xref:System.Diagnostics.PerformanceCounterCategory.Create%2A?displayProperty=nameWithType> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-441">如果为值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>属性是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process>使用.NET Framework 版本 1.0 或 1.1 版中，创建性能计数器类别和<xref:System.InvalidOperationException>引发。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-441">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="c5c0b-442">使用早期版本创建的性能计数器类别使用全局共享的内存和的值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>必须是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-442">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="c5c0b-443">如果在版本 1.0 或 1.1 版.NET Framework 上运行的应用程序不使用类别，删除并重新创建该类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-443">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-444">若要阅读 Windows Vista、 Windows XP Professional x64 Edition 或 Windows Server 2003 中的性能计数器，您必须是 Performance Monitor Users 组的成员或具有管理权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-444">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="c5c0b-445">若要避免无需提升你的特权来访问 Windows Vista 中的性能计数器，请将自己添加到 Performance Monitor Users 组。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-445">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="c5c0b-446">在 Windows Vista 中，用户帐户控制 (UAC) 决定用户的特权。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-446">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="c5c0b-447">如果您是内置的 Administrators 组的成员，将为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-447">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="c5c0b-448">默认情况下，您拥有标准用户角色。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-448">By default, you are in the standard user role.</span></span> <span data-ttu-id="c5c0b-449">若要执行访问性能计数器的代码，首先必须将你的特权从标准用户提升至管理员。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-449">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="c5c0b-450">你可以通过以下方式执行此操作：右键单击应用程序图标并指示需以管理员身份运行。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-450">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-451">此实例未与性能计数器正确关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-451">The instance is not correctly associated with a performance counter.</span>
          </span>
          <span data-ttu-id="c5c0b-452">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-452">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-453">使用全局共享内存时，<see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> 属性设置为 <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-453">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-454">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-454">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <exception cref="T:System.UnauthorizedAccessException">
          <span data-ttu-id="c5c0b-455">以不具有管理特权的用户身份正在执行的代码尝试读取性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-455">Code that is executing without administrative privileges attempted to read a performance counter.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-456">用于读取性能计数器类别。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-456">for reading the performance counter category.</span>
          </span>
          <span data-ttu-id="c5c0b-457">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-457">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span>
          </span>
        </permission>
        <altmember cref="T:System.Diagnostics.PerformanceCounterType" />
      </Docs>
    </Member>
    <Member MemberName="Decrement">
      <MemberSignature Language="C#" Value="public long Decrement ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance int64 Decrement() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.Decrement" />
      <MemberSignature Language="VB.NET" Value="Public Function Decrement () As Long" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; long Decrement();" />
      <MemberSignature Language="F#" Value="member this.Decrement : unit -&gt; int64" Usage="performanceCounter.Decrement " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int64</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-458">通过有效的原子操作使关联的性能计数器减一。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-458">Decrements the associated performance counter by one through an efficient atomic operation.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="c5c0b-459">减少后的计数器值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-459">The decremented counter value.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-460">您可以编写仅向自定义计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-460">You can write only to custom counters.</span></span> <span data-ttu-id="c5c0b-461">所有系统计数器都是只读的。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-461">All system counters are read-only.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-462"><xref:System.Diagnostics.PerformanceCounter.Increment%2A>， <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>，和<xref:System.Diagnostics.PerformanceCounter.Decrement%2A>方法使用联锁更新计数器值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-462">The <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, and <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods use interlocks to update the counter value.</span></span> <span data-ttu-id="c5c0b-463">这可以帮助使计数器值准确在多线程或多进程的情况下，但也会产生对性能产生负面影响。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-463">This helps keep the counter value accurate in multithreaded or multiprocess scenarios, but also results in a performance penalty.</span></span> <span data-ttu-id="c5c0b-464">如果不需要的准确性，互锁操作提供，可以更新<xref:System.Diagnostics.PerformanceCounter.RawValue%2A>属性直接为最多 5 倍的性能提高。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-464">If you do not need the accuracy that interlocked operations provide, you can update the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property directly for up to a 5 times performance improvement.</span></span>  <span data-ttu-id="c5c0b-465">但是，在多线程方案中，为计数器值的某些更新可能被忽略，从而导致不准确的数据。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-465">However, in multithreaded scenarios, some updates to the counter value might be ignored, resulting in inaccurate data.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-466">如果为值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>属性是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process>使用.NET Framework 版本 1.0 或 1.1 版中，创建性能计数器类别和<xref:System.InvalidOperationException>引发。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-466">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="c5c0b-467">使用早期版本创建的性能计数器类别使用全局共享的内存和的值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>必须是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-467">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="c5c0b-468">如果在版本 1.0 或 1.1 版.NET Framework 上运行的应用程序不使用类别，删除并重新创建该类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-468">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-469">该计数器是只读的，因而应用程序无法使之减少。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-469">The counter is read-only, so the application cannot decrement it.</span>
          </span>
          <span data-ttu-id="c5c0b-470">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-470">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-471">此实例未与性能计数器正确关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-471">The instance is not correctly associated with a performance counter.</span>
          </span>
          <span data-ttu-id="c5c0b-472">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-472">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-473">使用全局共享内存时，<see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> 属性设置为 <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-473">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-474">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-474">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-475">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-475">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-476">用于写入的性能计数器类别，如果<see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" />属性是<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-476">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span>
          </span>
          <span data-ttu-id="c5c0b-477">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-477">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
        <threadsafe>
          <span data-ttu-id="c5c0b-478">此方法是线程安全。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-478">This method is thread safe.</span>
          </span>
        </threadsafe>
      </Docs>
    </Member>
    <Member MemberName="DefaultFileMappingSize">
      <MemberSignature Language="C#" Value="public static int DefaultFileMappingSize;" />
      <MemberSignature Language="ILAsm" Value=".field public static int32 DefaultFileMappingSize" />
      <MemberSignature Language="DocId" Value="F:System.Diagnostics.PerformanceCounter.DefaultFileMappingSize" />
      <MemberSignature Language="VB.NET" Value="Public Shared DefaultFileMappingSize As Integer " />
      <MemberSignature Language="C++ CLI" Value="public: static int DefaultFileMappingSize;" />
      <MemberSignature Language="F#" Value=" staticval mutable DefaultFileMappingSize : int" Usage="System.Diagnostics.PerformanceCounter.DefaultFileMappingSize" />
      <MemberType>Field</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.Obsolete</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netcore-2.0;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
          <AttributeName>System.Obsolete("This field has been deprecated and is not used.  Use machine.config or an application configuration file to set the size of the PerformanceCounter file mapping.")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-479">指定由性能计数器共享的全局内存的大小（以字节为单位）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-479">Specifies the size, in bytes, of the global memory shared by performance counters.</span>
          </span>
          <span data-ttu-id="c5c0b-480">默认大小为 524,288 个字节。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-480">The default size is 524,288 bytes.</span>
          </span>
        </summary>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="Dispose">
      <MemberSignature Language="C#" Value="protected override void Dispose (bool disposing);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance void Dispose(bool disposing) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.Dispose(System.Boolean)" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Sub Dispose (disposing As Boolean)" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override void Dispose(bool disposing);" />
      <MemberSignature Language="F#" Value="override this.Dispose : bool -&gt; unit" Usage="performanceCounter.Dispose disposing" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="disposing" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="disposing">To be added.</param>
        <summary>To be added.</summary>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="EndInit">
      <MemberSignature Language="C#" Value="public void EndInit ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void EndInit() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.EndInit" />
      <MemberSignature Language="VB.NET" Value="Public Sub EndInit ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual void EndInit();" />
      <MemberSignature Language="F#" Value="abstract member EndInit : unit -&gt; unit&#xA;override this.EndInit : unit -&gt; unit" Usage="performanceCounter.EndInit " />
      <MemberType>Method</MemberType>
      <Implements>
        <InterfaceMember>M:System.ComponentModel.ISupportInitialize.EndInit</InterfaceMember>
      </Implements>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-481">结束在窗体上使用或由另一组件使用的 <see cref="T:System.Diagnostics.PerformanceCounter" /> 实例的初始化。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-481">Ends the initialization of a <see cref="T:System.Diagnostics.PerformanceCounter" /> instance that is used on a form or by another component.</span>
          </span>
          <span data-ttu-id="c5c0b-482">此初始化在运行时发生。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-482">The initialization occurs at runtime.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-483">[!INCLUDE[vsprvslong](~/includes/vsprvslong-md.md)]设计环境使用此方法来结束初始化窗体或由另一个组件使用的组件。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-483">The [!INCLUDE[vsprvslong](~/includes/vsprvslong-md.md)] design environment uses this method to end the initialization of a component that is used on a form or by another component.</span></span> <span data-ttu-id="c5c0b-484"><xref:System.Diagnostics.PerformanceCounter.BeginInit%2A>方法开始初始化。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-484">The <xref:System.Diagnostics.PerformanceCounter.BeginInit%2A> method starts the initialization.</span></span> <span data-ttu-id="c5c0b-485">使用<xref:System.Diagnostics.PerformanceCounter.BeginInit%2A>和<xref:System.Diagnostics.PerformanceCounter.EndInit%2A>方法可以防止完全初始化之前使用该组件。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-485">Using the <xref:System.Diagnostics.PerformanceCounter.BeginInit%2A> and <xref:System.Diagnostics.PerformanceCounter.EndInit%2A> methods prevents the component from being used before it is fully initialized.</span></span>  
  
 ]]></format>
        </remarks>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-486">用于写入的性能计数器类别，如果<see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" />属性是<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-486">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span>
          </span>
          <span data-ttu-id="c5c0b-487">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-487">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName="Increment">
      <MemberSignature Language="C#" Value="public long Increment ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance int64 Increment() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.Increment" />
      <MemberSignature Language="VB.NET" Value="Public Function Increment () As Long" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; long Increment();" />
      <MemberSignature Language="F#" Value="member this.Increment : unit -&gt; int64" Usage="performanceCounter.Increment " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int64</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-488">通过有效的原子操作使关联的性能计数器增加一。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-488">Increments the associated performance counter by one through an efficient atomic operation.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="c5c0b-489">增加后的计数器值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-489">The incremented counter value.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-490">您可以编写仅向自定义计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-490">You can write only to custom counters.</span></span> <span data-ttu-id="c5c0b-491">所有系统计数器都是只读的。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-491">All system counters are read-only.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-492"><xref:System.Diagnostics.PerformanceCounter.Increment%2A>， <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>，和<xref:System.Diagnostics.PerformanceCounter.Decrement%2A>方法使用联锁更新计数器值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-492">The <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, and <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods use interlocks to update the counter value.</span></span> <span data-ttu-id="c5c0b-493">这可以帮助使计数器值准确在多线程或多进程的情况下，但也会产生对性能产生负面影响。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-493">This helps keep the counter value accurate in multithreaded or multiprocess scenarios, but also results in a performance penalty.</span></span> <span data-ttu-id="c5c0b-494">如果不需要的准确性，互锁操作提供，可以更新<xref:System.Diagnostics.PerformanceCounter.RawValue%2A>属性直接为最多 5 倍的性能提高。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-494">If you do not need the accuracy that interlocked operations provide, you can update the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property directly for up to a 5 times performance improvement.</span></span>  <span data-ttu-id="c5c0b-495">但是，在多线程方案中，为计数器值的某些更新可能被忽略，从而导致不准确的数据。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-495">However, in multithreaded scenarios, some updates to the counter value might be ignored, resulting in inaccurate data.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-496">如果为值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>属性是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process>使用.NET Framework 版本 1.0 或 1.1 版中，创建性能计数器类别和<xref:System.InvalidOperationException>引发。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-496">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="c5c0b-497">使用早期版本创建的性能计数器类别使用全局共享的内存和的值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>必须是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-497">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="c5c0b-498">如果在版本 1.0 或 1.1 版.NET Framework 上运行的应用程序不使用类别，删除并重新创建该类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-498">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-499">该计数器是只读的，因此应用程序无法递增它的值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-499">The counter is read-only, so the application cannot increment it.</span>
          </span>
          <span data-ttu-id="c5c0b-500">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-500">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-501">此实例未与性能计数器正确关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-501">The instance is not correctly associated with a performance counter.</span>
          </span>
          <span data-ttu-id="c5c0b-502">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-502">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-503">使用全局共享内存时，<see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> 属性设置为 <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-503">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-504">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-504">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-505">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-505">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-506">用于写入的性能计数器类别，如果<see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" />属性是<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-506">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span>
          </span>
          <span data-ttu-id="c5c0b-507">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-507">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
        <threadsafe>
          <span data-ttu-id="c5c0b-508">此方法是线程安全。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-508">This method is thread safe.</span>
          </span>
        </threadsafe>
      </Docs>
    </Member>
    <Member MemberName="IncrementBy">
      <MemberSignature Language="C#" Value="public long IncrementBy (long value);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance int64 IncrementBy(int64 value) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.IncrementBy(System.Int64)" />
      <MemberSignature Language="VB.NET" Value="Public Function IncrementBy (value As Long) As Long" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; long IncrementBy(long value);" />
      <MemberSignature Language="F#" Value="member this.IncrementBy : int64 -&gt; int64" Usage="performanceCounter.IncrementBy value" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.Runtime.ConstrainedExecution.ReliabilityContract(System.Runtime.ConstrainedExecution.Consistency.WillNotCorruptState, System.Runtime.ConstrainedExecution.Cer.MayFail)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Int64</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="value" Type="System.Int64" />
      </Parameters>
      <Docs>
        <param name="value">
          <span data-ttu-id="c5c0b-509">要增加的值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-509">The value to increment by.</span>
          </span>
          <span data-ttu-id="c5c0b-510">（负值使计数器减少。）</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-510">(A negative value decrements the counter.)</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="c5c0b-511">通过有效的原子操作，使关联的性能计数器的值增加或减少指定的量。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-511">Increments or decrements the value of the associated performance counter by a specified amount through an efficient atomic operation.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="c5c0b-512">新的计数器值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-512">The new counter value.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-513">您可以编写仅向自定义计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-513">You can write only to custom counters.</span></span> <span data-ttu-id="c5c0b-514">所有系统计数器都是只读的。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-514">All system counters are read-only.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-515"><xref:System.Diagnostics.PerformanceCounter.Increment%2A>， <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>，和<xref:System.Diagnostics.PerformanceCounter.Decrement%2A>方法使用联锁更新计数器值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-515">The <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, and <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods use interlocks to update the counter value.</span></span> <span data-ttu-id="c5c0b-516">这可以帮助使计数器值准确在多线程或多进程的情况下，但也会产生对性能产生负面影响。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-516">This helps keep the counter value accurate in multithreaded or multiprocess scenarios, but also results in a performance penalty.</span></span> <span data-ttu-id="c5c0b-517">如果不需要的准确性，互锁操作提供，可以更新<xref:System.Diagnostics.PerformanceCounter.RawValue%2A>属性直接为最多 5 倍的性能提高。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-517">If you do not need the accuracy that interlocked operations provide, you can update the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property directly for up to a 5 times performance improvement.</span></span>  <span data-ttu-id="c5c0b-518">但是，在多线程方案中，为计数器值的某些更新可能被忽略，从而导致不准确的数据。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-518">However, in multithreaded scenarios, some updates to the counter value might be ignored, resulting in inaccurate data.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-519">如果为值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>属性是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process>使用.NET Framework 版本 1.0 或 1.1 版中，创建性能计数器类别和<xref:System.InvalidOperationException>引发。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-519">If the value forthe <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="c5c0b-520">使用早期版本创建的性能计数器类别使用全局共享的内存和的值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>必须是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-520">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="c5c0b-521">如果在版本 1.0 或 1.1 版.NET Framework 上运行的应用程序不使用类别，删除并重新创建该类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-521">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c5c0b-522">下面的代码示例演示如何使用<xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>方法来递增计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-522">The following code example demonstrates how to use the <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A> method to add increments to a counter.</span></span> <span data-ttu-id="c5c0b-523">此代码示例摘自一个更大示例的<xref:System.Diagnostics.PerformanceCounter>类。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-523">This code example is part of a larger example for the <xref:System.Diagnostics.PerformanceCounter> class.</span></span>  
  
 [!code-cpp[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CPP/averagecount32.cpp#3)]
 [!code-csharp[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CS/averagecount32.cs#3)]
 [!code-vb[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/VB/averagecount32.vb#3)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-524">该计数器是只读的，因此应用程序无法递增它的值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-524">The counter is read-only, so the application cannot increment it.</span>
          </span>
          <span data-ttu-id="c5c0b-525">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-525">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-526">此实例未与性能计数器正确关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-526">The instance is not correctly associated with a performance counter.</span>
          </span>
          <span data-ttu-id="c5c0b-527">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-527">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-528">使用全局共享内存时，<see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> 属性设置为 <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-528">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-529">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-529">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-530">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-530">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-531">用于写入的性能计数器类别，如果<see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" />属性是<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-531">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span>
          </span>
          <span data-ttu-id="c5c0b-532">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-532">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
        <threadsafe>
          <span data-ttu-id="c5c0b-533">此方法是线程安全。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-533">This method is thread safe.</span>
          </span>
        </threadsafe>
      </Docs>
    </Member>
    <Member MemberName="InstanceLifetime">
      <MemberSignature Language="C#" Value="public System.Diagnostics.PerformanceCounterInstanceLifetime InstanceLifetime { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.Diagnostics.PerformanceCounterInstanceLifetime InstanceLifetime" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" />
      <MemberSignature Language="VB.NET" Value="Public Property InstanceLifetime As PerformanceCounterInstanceLifetime" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Diagnostics::PerformanceCounterInstanceLifetime InstanceLifetime { System::Diagnostics::PerformanceCounterInstanceLifetime get(); void set(System::Diagnostics::PerformanceCounterInstanceLifetime value); };" />
      <MemberSignature Language="F#" Value="member this.InstanceLifetime : System.Diagnostics.PerformanceCounterInstanceLifetime with get, set" Usage="System.Diagnostics.PerformanceCounter.InstanceLifetime" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netcore-2.0;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.DefaultValue(Mono.Cecil.CustomAttributeArgument)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.MonoTODO</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Diagnostics.PerformanceCounterInstanceLifetime</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-534">获取或设置进程的生存期。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-534">Gets or sets the lifetime of a process.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="c5c0b-535">
            <see cref="T:System.Diagnostics.PerformanceCounterInstanceLifetime" /> 值之一。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-535">One of the <see cref="T:System.Diagnostics.PerformanceCounterInstanceLifetime" /> values.</span>
          </span>
          <span data-ttu-id="c5c0b-536">默认值为 <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Global" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-536">The default is <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Global" />.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-537">如果使用.NET Framework 1.0 或 1.1 版创建的性能计数器类别，则使用全局共享的内存和的值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>必须是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-537">If the performance counter category is created with the .NET Framework version 1.0 or 1.1, it uses global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="c5c0b-538">如果在版本 1.0 或 1.1 版.NET Framework 上运行的应用程序不使用类别，删除并重新创建该类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-538">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-539">如果的值<xref:System.Diagnostics.PerformanceCounter.CounterType%2A>属性是<xref:System.Diagnostics.PerformanceCounterCategoryType.SingleInstance>，则<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>值的性能计数器必须为<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-539">If the value of the <xref:System.Diagnostics.PerformanceCounter.CounterType%2A> property is <xref:System.Diagnostics.PerformanceCounterCategoryType.SingleInstance>, the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> value for the performance counter must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentOutOfRangeException">
          <span data-ttu-id="c5c0b-540">设置的值不是 <see cref="T:System.Diagnostics.PerformanceCounterInstanceLifetime" /> 枚举的成员。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-540">The value set is not a member of the <see cref="T:System.Diagnostics.PerformanceCounterInstanceLifetime" /> enumeration.</span>
          </span>
        </exception>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-541">
            <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> 是在初始化 <see cref="T:System.Diagnostics.PerformanceCounter" /> 后设置的。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-541">
              <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> is set after the <see cref="T:System.Diagnostics.PerformanceCounter" /> has been initialized.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="InstanceName">
      <MemberSignature Language="C#" Value="public string InstanceName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string InstanceName" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.InstanceName" />
      <MemberSignature Language="VB.NET" Value="Public Property InstanceName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ InstanceName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.InstanceName : string with get, set" Usage="System.Diagnostics.PerformanceCounter.InstanceName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netcore-2.0;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.ReadOnly(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.RecommendedAsConfigurable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.InstanceNameConverter, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.InstanceNameConverter, System.Design, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.InstanceNameConverter, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
          <AttributeName>System.ComponentModel.SettingsBindable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-542">获取或设置此性能计数器的实例名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-542">Gets or sets an instance name for this performance counter.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="c5c0b-543">性能计数器类别实例的名称，或者为空字符串 ("")（如果该计数器是单实例计数器）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-543">The name of the performance counter category instance, or an empty string (""), if the counter is a single-instance counter.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-544">实例名称必须少于 128 个字符的长度。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-544">Instance names must be shorter than 128 characters in length.</span></span>  
  
 <span data-ttu-id="c5c0b-545">在某些情况下，类别细分为实例，跟踪多个匹配项的类别相关的对象有关的数据。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-545">In some situations, categories are subdivided into instances, which track data about multiple occurrences of the object that a category relates to.</span></span> <span data-ttu-id="c5c0b-546">实例将应用到的类别作为整体，而不是各个计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-546">Instances apply to the category as whole, rather than to individual counters.</span></span> <span data-ttu-id="c5c0b-547">每个计数器在类别中的具有该类别定义的每个实例。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-547">Every counter within a category has each instance defined for the category.</span></span> <span data-ttu-id="c5c0b-548">例如，进程类别包含名为空闲和系统的实例。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-548">For example, the Process category contains instances named Idle and System.</span></span> <span data-ttu-id="c5c0b-549">进程类别中的每个计数器因此包含每个实例，其中显示有关空闲进程或系统进程的信息的数据。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-549">Every counter within the Process category thus contains data for each instance, showing information about either idle processes or system processes.</span></span>  
  
 <span data-ttu-id="c5c0b-550">许多类别不包含多个实例，因此您可以将此属性留空以指示任何实例都与类别关联。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-550">Many categories do not contain multiple instances, so you can leave this property empty to indicate that no instance is associated with the category.</span></span>  
  
 <span data-ttu-id="c5c0b-551">如果此<xref:System.Diagnostics.PerformanceCounter>实例指向非自定义类别，可以选择从只有现有的类别实例。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-551">If this <xref:System.Diagnostics.PerformanceCounter> instance points to a noncustom category, you can choose from only the existing category instances.</span></span> <span data-ttu-id="c5c0b-552">仅在自定义类别，可用于定义为多个计数器和类别所需实例中，可以创建新的类别实例。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-552">You can create new category instances only in custom categories, which allow you to define as many counters and category instances as you need.</span></span>  
  
 <span data-ttu-id="c5c0b-553">若要创建性能类别实例，指定`instanceName`上<xref:System.Diagnostics.PerformanceCounter.%23ctor%2A>构造函数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-553">To create a performance category instance, specify an `instanceName` on the <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A> constructor.</span></span> <span data-ttu-id="c5c0b-554">如果指定的类别实例，则`instanceName`已存在的新对象将引用现有的类别实例。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-554">If the category instance specified by `instanceName` already exists the new object will reference the existing category instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-555">不要使用字符"（"，"）"，"#"、"\\"，或实例名称中"/"。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-555">Do not use the characters "(", ")", "#", "\\", or "/" in the instance name.</span></span> <span data-ttu-id="c5c0b-556">如果使用以下任何字符，则性能控制台 (请参阅[运行时分析](~/docs/framework/debug-trace-profile/runtime-profiling.md)) 可能无法正确显示实例的值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-556">If any of these characters are used, the Performance Console (see [Runtime Profiling](~/docs/framework/debug-trace-profile/runtime-profiling.md)) may not correctly display the instance values.</span></span>  
  
 <span data-ttu-id="c5c0b-557">如果实例名称自动生成的并且可能包含字符"（"，"）"，"#"、"\\"，或"/"，在下表中使用字符映射。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-557">If the instance name is automatically generated and might contain the characters "(", ")", "#", "\\", or "/", use the character mapping in the following table.</span></span>  
  
|<span data-ttu-id="c5c0b-558">字符</span><span class="sxs-lookup"><span data-stu-id="c5c0b-558">Character</span></span>|<span data-ttu-id="c5c0b-559">字符映射</span><span class="sxs-lookup"><span data-stu-id="c5c0b-559">Mapped character</span></span>|  
|---------------|----------------------|  
|<span data-ttu-id="c5c0b-560">(</span><span class="sxs-lookup"><span data-stu-id="c5c0b-560">(</span></span>|<span data-ttu-id="c5c0b-561">[</span><span class="sxs-lookup"><span data-stu-id="c5c0b-561">[</span></span>|  
|<span data-ttu-id="c5c0b-562">)</span><span class="sxs-lookup"><span data-stu-id="c5c0b-562">)</span></span>|<span data-ttu-id="c5c0b-563">]</span><span class="sxs-lookup"><span data-stu-id="c5c0b-563">]</span></span>|  
|#|<span data-ttu-id="c5c0b-564">_</span><span class="sxs-lookup"><span data-stu-id="c5c0b-564">_</span></span>|  
|<span data-ttu-id="c5c0b-565">\|_</span><span class="sxs-lookup"><span data-stu-id="c5c0b-565">\|_</span></span>|  
|/|<span data-ttu-id="c5c0b-566">_</span><span class="sxs-lookup"><span data-stu-id="c5c0b-566">_</span></span>|  
  
 <span data-ttu-id="c5c0b-567"><xref:System.AppDomain.FriendlyName%2A>的属性<xref:System.AppDomain>对象，来自<xref:System.AppDomain.CurrentDomain%2A?displayProperty=nameWithType>属性是可以包含无效字符的实例名称的一个常见原因。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-567">The <xref:System.AppDomain.FriendlyName%2A> property of the <xref:System.AppDomain> object obtained from the <xref:System.AppDomain.CurrentDomain%2A?displayProperty=nameWithType> property is a common source of instance names that can contain invalid characters.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c5c0b-568">下面的代码示例创建的默认实例<xref:System.Diagnostics.PerformanceCounter>类。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-568">The following code example creates a default instance of the <xref:System.Diagnostics.PerformanceCounter> class.</span></span> <span data-ttu-id="c5c0b-569">创建实例后， <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>， <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>，并<xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>属性的值为组和是对的调用结果<xref:System.Diagnostics.PerformanceCounter.NextValue%2A>显示方法。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-569">After the instance is created, the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> property values are set, and the results of a call to the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method are displayed.</span></span>  
  
 [!code-cpp[PerfCounter#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerfCounter/CPP/perfcounter.cpp#1)]
 [!code-csharp[PerfCounter#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerfCounter/CS/perfcounter.cs#1)]
 [!code-vb[PerfCounter#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerfCounter/VB/perfcounter.vb#1)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="MachineName">
      <MemberSignature Language="C#" Value="public string MachineName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string MachineName" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.MachineName" />
      <MemberSignature Language="VB.NET" Value="Public Property MachineName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ MachineName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.MachineName : string with get, set" Usage="System.Diagnostics.PerformanceCounter.MachineName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netcore-2.0;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.DefaultValue(".")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.RecommendedAsConfigurable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.MonoTODO("What's the machine name format?")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
          <AttributeName>System.ComponentModel.SettingsBindable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-570">获取或设置此性能计数器的计算机名。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-570">Gets or sets the computer name for this performance counter</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="c5c0b-571">性能计数器及其关联的类别所在的服务器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-571">The server on which the performance counter and its associated category reside.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-572">在本地计算机上，可以仅对驻留的计数器写入值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-572">You can write values only to counters that reside on the local computer.</span></span> <span data-ttu-id="c5c0b-573">但是，您可以读取计数器值从为其企业中的任何计算机具有访问权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-573">However, you can read counter values from any computer in the enterprise for which you have access privileges.</span></span>  
  
 <span data-ttu-id="c5c0b-574">当您将设置<xref:System.Diagnostics.PerformanceCounter.MachineName%2A>属性以指向远程计算机，<xref:System.Diagnostics.PerformanceCounter>实例会尝试打开该计算机上的计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-574">When you set the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to point to a remote computer, the <xref:System.Diagnostics.PerformanceCounter> instance attempts to open the counter on that computer.</span></span> <span data-ttu-id="c5c0b-575">如果该计数器不存在，设置此属性将引发异常。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-575">If the counter does not exist, setting this property throws an exception.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentException">
          <span data-ttu-id="c5c0b-576">
            <see cref="P:System.Diagnostics.PerformanceCounter.MachineName" /> 格式无效。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-576">The <see cref="P:System.Diagnostics.PerformanceCounter.MachineName" /> format is invalid.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-577">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-577">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="NextSample">
      <MemberSignature Language="C#" Value="public System.Diagnostics.CounterSample NextSample ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance valuetype System.Diagnostics.CounterSample NextSample() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.NextSample" />
      <MemberSignature Language="VB.NET" Value="Public Function NextSample () As CounterSample" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::Diagnostics::CounterSample NextSample();" />
      <MemberSignature Language="F#" Value="member this.NextSample : unit -&gt; System.Diagnostics.CounterSample" Usage="performanceCounter.NextSample " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Diagnostics.CounterSample</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-578">获取计数器样本，并为其返回原始值（即未经过计算的值）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-578">Obtains a counter sample, and returns the raw, or uncalculated, value for it.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="c5c0b-579">一个 <see cref="T:System.Diagnostics.CounterSample" />，它代表系统为此计数器获取的下一原始值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-579">A <see cref="T:System.Diagnostics.CounterSample" /> that represents the next raw value that the system obtains for this counter.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-580">此方法通常用于包含非计算所得的值的计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-580">This method is generally used for counters that contain uncalculated values.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-581">如果为值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>属性是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process>使用.NET Framework 版本 1.0 或 1.1 版中，创建性能计数器类别和<xref:System.InvalidOperationException>引发。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-581">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="c5c0b-582">使用早期版本创建的性能计数器类别使用全局共享的内存和的值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>必须是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-582">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="c5c0b-583">如果在版本 1.0 或 1.1 版.NET Framework 上运行的应用程序不使用类别，删除并重新创建该类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-583">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-584">若要阅读 Windows Vista、 Windows XP Professional x64 Edition 或 Windows Server 2003 中的性能计数器，您必须是 Performance Monitor Users 组的成员或具有管理权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-584">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="c5c0b-585">若要避免无需提升你的特权来访问 Windows Vista 中的性能计数器，请将自己添加到 Performance Monitor Users 组。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-585">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="c5c0b-586">在 Windows Vista 中，用户帐户控制 (UAC) 决定用户的特权。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-586">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="c5c0b-587">如果您是内置的 Administrators 组的成员，将为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-587">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="c5c0b-588">默认情况下，您拥有标准用户角色。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-588">By default, you are in the standard user role.</span></span> <span data-ttu-id="c5c0b-589">若要执行访问性能计数器的代码，首先必须将你的特权从标准用户提升至管理员。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-589">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="c5c0b-590">你可以通过以下方式执行此操作：右键单击应用程序图标并指示需以管理员身份运行。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-590">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c5c0b-591">下面的代码示例演示如何使用<xref:System.Diagnostics.PerformanceCounter.NextSample%2A>方法来获取计数器的下一个非计算所得的值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-591">The following code example demonstrates how to use the <xref:System.Diagnostics.PerformanceCounter.NextSample%2A> method to obtain the next uncalculated value of a counter.</span></span> <span data-ttu-id="c5c0b-592">此代码示例摘自一个更大示例的<xref:System.Diagnostics.PerformanceCounter>类。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-592">This code example is part of a larger example for the <xref:System.Diagnostics.PerformanceCounter> class.</span></span>  
  
 [!code-cpp[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CPP/averagecount32.cpp#3)]
 [!code-csharp[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CS/averagecount32.cs#3)]
 [!code-vb[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/VB/averagecount32.vb#3)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-593">此实例未与性能计数器正确关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-593">The instance is not correctly associated with a performance counter.</span>
          </span>
          <span data-ttu-id="c5c0b-594">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-594">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-595">使用全局共享内存时，<see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> 属性设置为 <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-595">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-596">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-596">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-597">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-597">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <exception cref="T:System.UnauthorizedAccessException">
          <span data-ttu-id="c5c0b-598">以不具有管理特权的用户身份正在执行的代码尝试读取性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-598">Code that is executing without administrative privileges attempted to read a performance counter.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-599">用于读取性能计数器类别。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-599">for reading the performance counter category.</span>
          </span>
          <span data-ttu-id="c5c0b-600">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-600">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName="NextValue">
      <MemberSignature Language="C#" Value="public float NextValue ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance float32 NextValue() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.NextValue" />
      <MemberSignature Language="VB.NET" Value="Public Function NextValue () As Single" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; float NextValue();" />
      <MemberSignature Language="F#" Value="member this.NextValue : unit -&gt; single" Usage="performanceCounter.NextValue " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Single</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-601">获取计数器样本并为其返回计算所得值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-601">Obtains a counter sample and returns the calculated value for it.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="c5c0b-602">系统为此计数器获取的下一计算所得值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-602">The next calculated value that the system obtains for this counter.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-603">如果一个计数器的计算的值依赖于两个计数器读取，则第一个读取的操作将返回介于 0.0。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-603">If the calculated value of a counter depends on two counter reads, the first read operation returns 0.0.</span></span> <span data-ttu-id="c5c0b-604">重置要指定不同的计数器的性能计数器属性相当于创建一个新的性能计数器，并使用新属性的第一个读取的操作返回介于 0.0。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-604">Resetting the performance counter properties to specify a different counter is equivalent to creating a new performance counter, and the first read operation using the new properties returns 0.0.</span></span> <span data-ttu-id="c5c0b-605">对的调用之间的建议的延迟时间<xref:System.Diagnostics.PerformanceCounter.NextValue%2A>方法为 1 秒，以允许执行下一次增量读取的计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-605">The recommended delay time between calls to the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method is one second, to allow the counter to perform the next incremental read.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-606">若要读取的性能计数器，必须具有管理权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-606">To read performance counters, you must have administrative privileges.</span></span> <span data-ttu-id="c5c0b-607">在 Windows Vista 中，用户帐户控制 (UAC) 决定用户的特权。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-607">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="c5c0b-608">如果您是内置的 Administrators 组的成员，将为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-608">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="c5c0b-609">默认情况下，您拥有标准用户角色。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-609">By default, you are in the standard user role.</span></span> <span data-ttu-id="c5c0b-610">若要执行访问性能计数器的代码，首先必须将你的特权从标准用户提升至管理员。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-610">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="c5c0b-611">你可以通过以下方式执行此操作：右键单击应用程序图标并指示需以管理员身份运行。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-611">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c5c0b-612">下面的代码示例将创建<xref:System.Diagnostics.PerformanceCounterType.ElapsedTime>计数器，然后使用<xref:System.Diagnostics.PerformanceCounter.NextValue%2A>方法来显示时间段内的计数器的值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-612">The following code example creates an <xref:System.Diagnostics.PerformanceCounterType.ElapsedTime> counter and uses the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method to display the counter's values over a time period.</span></span>  
  
 [!code-cpp[PerformanceCounterType.ElapsedTime#2](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.ElapsedTime/CPP/elapsedtime.cpp#2)]
 [!code-csharp[PerformanceCounterType.ElapsedTime#2](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.ElapsedTime/CS/elapsedtime.cs#2)]
 [!code-vb[PerformanceCounterType.ElapsedTime#2](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.ElapsedTime/VB/elapsedtime.vb#2)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-613">此实例未与性能计数器正确关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-613">The instance is not correctly associated with a performance counter.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-614">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-614">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-615">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-615">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <exception cref="T:System.UnauthorizedAccessException">
          <span data-ttu-id="c5c0b-616">以不具有管理特权的用户身份正在执行的代码尝试读取性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-616">Code that is executing without administrative privileges attempted to read a performance counter.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-617">用于读取性能计数器类别。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-617">for reading the performance counter category.</span>
          </span>
          <span data-ttu-id="c5c0b-618">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-618">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName="RawValue">
      <MemberSignature Language="C#" Value="public long RawValue { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance int64 RawValue" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.RawValue" />
      <MemberSignature Language="VB.NET" Value="Public Property RawValue As Long" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property long RawValue { long get(); void set(long value); };" />
      <MemberSignature Language="F#" Value="member this.RawValue : int64 with get, set" Usage="System.Diagnostics.PerformanceCounter.RawValue" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.Diagnostics.MonitoringDescription("The raw value of the counter.")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
          <AttributeName>System.Diagnostics.MonitoringDescription("PC_RawValue")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Int64</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-619">获取或设置此计数器的原始值（即未经过计算的值）。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-619">Gets or sets the raw, or uncalculated, value of this counter.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="c5c0b-620">计数器的原始值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-620">The raw value of the counter.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-621">如果计数器类型为 32 位大小且尝试将此属性设置为太大容纳不下一个值，该属性会截断到 32 位的值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-621">If the counter type is a 32-bit size and you attempt to set this property to a value that is too large to fit, the property truncates the value to 32 bits.</span></span> <span data-ttu-id="c5c0b-622">在读取本地计算机上的自定义计数器，使用<xref:System.Diagnostics.PerformanceCounter.RawValue%2A>属性，而不是计算得出的值可以生成在方案中的原始值都足够显著提高性能。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-622">When reading custom counters on the local computer, using the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property rather than a calculated value can produce significantly better performance in scenarios where the raw value is sufficient.</span></span>  
  
 <span data-ttu-id="c5c0b-623">如果你正在阅读的计数器是只读的则获取<xref:System.Diagnostics.PerformanceCounter.RawValue%2A>属性时，该属性称为示例计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-623">If the counter that you are reading is read-only, getting the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property samples the counter at the time that the property is called.</span></span> <span data-ttu-id="c5c0b-624">此操作相当于进行初始调用到<xref:System.Diagnostics.PerformanceCounter.NextSample%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-624">This action is equivalent to making an initial call to the <xref:System.Diagnostics.PerformanceCounter.NextSample%2A> method.</span></span> <span data-ttu-id="c5c0b-625">如果您随后调用<xref:System.Diagnostics.PerformanceCounter.NextSample%2A>，可以对这两个调用返回的值执行计算。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-625">If you subsequently call <xref:System.Diagnostics.PerformanceCounter.NextSample%2A>, you can perform calculations on the values that both calls returned.</span></span>  
  
 <span data-ttu-id="c5c0b-626">由于系统计数器是只读的因此您可以获取但不是设置它们的原始值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-626">Because system counters are read-only, you can get but not set their raw values.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-627"><xref:System.Diagnostics.PerformanceCounter.Increment%2A>， <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>，和<xref:System.Diagnostics.PerformanceCounter.Decrement%2A>方法使用联锁更新计数器值。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-627">The <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, and <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods use interlocks to update the counter value.</span></span> <span data-ttu-id="c5c0b-628">这可以帮助使计数器值准确在多线程或多进程的情况下，但也会产生对性能产生负面影响。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-628">This helps keep the counter value accurate in multithreaded or multiprocess scenarios, but also results in a performance penalty.</span></span> <span data-ttu-id="c5c0b-629">如果不需要的准确性，互锁操作提供，可以更新<xref:System.Diagnostics.PerformanceCounter.RawValue%2A>属性直接为最多 5 倍的性能提高。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-629">If you do not need the accuracy that interlocked operations provide, you can update the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property directly for up to a 5 times performance improvement.</span></span>  <span data-ttu-id="c5c0b-630">但是，在多线程方案中，为计数器值的某些更新可能被忽略，从而导致不准确的数据。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-630">However, in multithreaded scenarios, some updates to the counter value might be ignored, resulting in inaccurate data.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-631">如果为值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>属性是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process>使用.NET Framework 版本 1.0 或 1.1 版中，创建性能计数器类别和<xref:System.InvalidOperationException>引发。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-631">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="c5c0b-632">使用早期版本创建的性能计数器类别使用全局共享的内存和的值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>必须是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-632">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="c5c0b-633">如果在版本 1.0 或 1.1 版.NET Framework 上运行的应用程序不使用类别，删除并重新创建该类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-633">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-634">若要阅读 Windows Vista、 Windows XP Professional x64 Edition 或 Windows Server 2003 中的性能计数器，您必须是 Performance Monitor Users 组的成员或具有管理权限。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-634">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="c5c0b-635">若要避免无需提升你的特权来访问 Windows Vista 中的性能计数器，请将自己添加到 Performance Monitor Users 组。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-635">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="c5c0b-636">在 Windows Vista 中，用户帐户控制 (UAC) 决定用户的特权。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-636">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="c5c0b-637">如果您是内置的 Administrators 组的成员，将为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-637">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="c5c0b-638">默认情况下，您拥有标准用户角色。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-638">By default, you are in the standard user role.</span></span> <span data-ttu-id="c5c0b-639">若要执行访问性能计数器的代码，首先必须将你的特权从标准用户提升至管理员。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-639">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="c5c0b-640">你可以通过以下方式执行此操作：右键单击应用程序图标并指示需以管理员身份运行。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-640">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c5c0b-641">下面的示例使用<xref:System.Diagnostics.CounterSample>类，以显示的值<xref:System.Diagnostics.PerformanceCounter.RawValue%2A>计数器的属性。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-641">The following example uses the <xref:System.Diagnostics.CounterSample> class to display the value of the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property for a counter.</span></span>  
  
 [!code-cpp[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CPP/averagecount32.cpp#1)]
 [!code-csharp[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CS/averagecount32.cs#1)]
 [!code-vb[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/VB/averagecount32.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-642">您尝试设置计数器的原始值，但该计数器是只读的。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-642">You are trying to set the counter's raw value, but the counter is read-only.</span>
          </span>
          <span data-ttu-id="c5c0b-643">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-643">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-644">此实例未与性能计数器正确关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-644">The instance is not correctly associated with a performance counter.</span>
          </span>
          <span data-ttu-id="c5c0b-645">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-645">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-646">使用全局共享内存时，<see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> 属性设置为 <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-646">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-647">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-647">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-648">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-648">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <exception cref="T:System.UnauthorizedAccessException">
          <span data-ttu-id="c5c0b-649">以不具有管理特权的用户身份正在执行的代码尝试读取性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-649">Code that is executing without administrative privileges attempted to read a performance counter.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-650">用于写入的性能计数器类别。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-650">for writing the performance counter category.</span>
          </span>
          <span data-ttu-id="c5c0b-651">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-651">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName="ReadOnly">
      <MemberSignature Language="C#" Value="public bool ReadOnly { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool ReadOnly" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.ReadOnly" />
      <MemberSignature Language="VB.NET" Value="Public Property ReadOnly As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool ReadOnly { bool get(); void set(bool value); };" />
      <MemberSignature Language="F#" Value="member this.ReadOnly : bool with get, set" Usage="System.Diagnostics.PerformanceCounter.ReadOnly" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netcore-2.0;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.DefaultValue(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.Diagnostics.MonitoringDescription("The accessability level of the counter.")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
          <AttributeName>System.Diagnostics.MonitoringDescription("PC_ReadOnly")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-652">获取或设置一个值，该值指示此 <see cref="T:System.Diagnostics.PerformanceCounter" /> 实例是否处于只读模式。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-652">Gets or sets a value indicating whether this <see cref="T:System.Diagnostics.PerformanceCounter" /> instance is in read-only mode.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="c5c0b-653">如果 <see cref="T:System.Diagnostics.PerformanceCounter" /> 实例为只读模式（即使计数器本身为自定义 .NET Framework 计数器），则为 <see langword="true" />；如果它为读/写模式，则为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-653">
              <see langword="true" />, if the <see cref="T:System.Diagnostics.PerformanceCounter" /> instance is in read-only mode (even if the counter itself is a custom .NET Framework counter); <see langword="false" /> if it is in read/write mode.</span>
          </span>
          <span data-ttu-id="c5c0b-654">默认值为构造函数设置的值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-654">The default is the value set by the constructor.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-655">一个系统的计数器，对于<xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A>应始终`true`。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-655">For a system counter, <xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A> should always `true`.</span></span> <span data-ttu-id="c5c0b-656">无法写入系统计数器。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-656">You cannot write to a system counter.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="RemoveInstance">
      <MemberSignature Language="C#" Value="public void RemoveInstance ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance void RemoveInstance() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.RemoveInstance" />
      <MemberSignature Language="VB.NET" Value="Public Sub RemoveInstance ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void RemoveInstance();" />
      <MemberSignature Language="F#" Value="member this.RemoveInstance : unit -&gt; unit" Usage="performanceCounter.RemoveInstance " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.MonoTODO</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0">
          <AttributeName>System.Runtime.ConstrainedExecution.ReliabilityContract(System.Runtime.ConstrainedExecution.Consistency.WillNotCorruptState, System.Runtime.ConstrainedExecution.Cer.MayFail)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="c5c0b-657">删除由 <see cref="T:System.Diagnostics.PerformanceCounter" /> 对象的 <see cref="P:System.Diagnostics.PerformanceCounter.InstanceName" /> 属性指定的类别实例。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-657">Deletes the category instance specified by the <see cref="T:System.Diagnostics.PerformanceCounter" /> object <see cref="P:System.Diagnostics.PerformanceCounter.InstanceName" /> property.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c5c0b-658">您可以删除自定义计数器的实例。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-658">You can remove an instance only for a custom counter.</span></span> <span data-ttu-id="c5c0b-659">所有系统计数器都是只读的因此尝试删除其中之一将引发异常。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-659">All system counters are read-only, so attempting to remove one of them throws an exception.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-660">若要发布的性能计数器共享内存时避免可能出现争用情况，则建议<xref:System.Diagnostics.PerformanceCounter.RemoveInstance%2A>方法调用从<xref:System.AppDomain.DomainUnload>事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-660">To avoid a possible race condition when the performance counter shared memory is released, it is recommended that the <xref:System.Diagnostics.PerformanceCounter.RemoveInstance%2A> method be called from the <xref:System.AppDomain.DomainUnload> event handler.</span></span>  
  
 <span data-ttu-id="c5c0b-661">若要创建性能类别实例，指定`instanceName`上<xref:System.Diagnostics.PerformanceCounter.%23ctor%2A>构造函数。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-661">To create a performance category instance, specify an `instanceName` on the <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A> constructor.</span></span> <span data-ttu-id="c5c0b-662">如果指定的类别实例，则`instanceName`已存在的新对象将引用现有的类别实例。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-662">If the category instance specified by `instanceName` already exists the new object will reference the existing category instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5c0b-663">如果为值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>属性是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process>使用.NET Framework 版本 1.0 或 1.1 版中，创建性能计数器类别和<xref:System.InvalidOperationException>引发。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-663">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="c5c0b-664">使用早期版本创建的性能计数器类别使用全局共享的内存和的值<xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>必须是<xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-664">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="c5c0b-665">如果在版本 1.0 或 1.1 版.NET Framework 上运行的应用程序不使用类别，删除并重新创建该类别。</span><span class="sxs-lookup"><span data-stu-id="c5c0b-665">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="c5c0b-666">此计数器为只读，因而不能移除与该类别关联的任何实例。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-666">This counter is read-only, so any instance that is associated with the category cannot be removed.</span>
          </span>
          <span data-ttu-id="c5c0b-667">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-667">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-668">此实例未与性能计数器正确关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-668">The instance is not correctly associated with a performance counter.</span>
          </span>
          <span data-ttu-id="c5c0b-669">或</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-669">-or-</span>
          </span>
          <span data-ttu-id="c5c0b-670">使用全局共享内存时，<see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> 属性设置为 <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-670">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span>
          </span>
        </exception>
        <exception cref="T:System.ComponentModel.Win32Exception">
          <span data-ttu-id="c5c0b-671">访问 API 时出错。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-671">An error occurred when accessing a system API.</span>
          </span>
        </exception>
        <exception cref="T:System.PlatformNotSupportedException">
          <span data-ttu-id="c5c0b-672">平台为 Windows 98 或 Windows Millennium Edition (Me)，这些平台不支持性能计数器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-672">The platform is Windows 98 or Windows Millennium Edition (Me), which does not support performance counters.</span>
          </span>
        </exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission">
          <span data-ttu-id="c5c0b-673">用于写入的性能计数器类别。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-673">for writing the performance counter category.</span>
          </span>
          <span data-ttu-id="c5c0b-674">关联枚举：<see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="c5c0b-674">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span>
          </span>
        </permission>
      </Docs>
    </Member>
  </Members>
</Type>