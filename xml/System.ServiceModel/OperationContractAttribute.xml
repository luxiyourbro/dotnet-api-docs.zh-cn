<Type Name="OperationContractAttribute" FullName="System.ServiceModel.OperationContractAttribute">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="7c1f28fb8a14f8b80f71fd5be9ea08dd61b7ec57" />
    <Meta Name="ms.sourcegitcommit" Value="d31dc2ede16f6f7bc64e90d9f897ff54c4e3869b" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="zh-CN" />
    <Meta Name="ms.lasthandoff" Value="04/03/2018" />
  </Metadata>
  <TypeSignature Language="C#" Value="public sealed class OperationContractAttribute : Attribute" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi sealed beforefieldinit OperationContractAttribute extends System.Attribute" />
  <TypeSignature Language="DocId" Value="T:System.ServiceModel.OperationContractAttribute" />
  <TypeSignature Language="VB.NET" Value="Public NotInheritable Class OperationContractAttribute&#xA;Inherits Attribute" />
  <TypeSignature Language="C++ CLI" Value="public ref class OperationContractAttribute sealed : Attribute" />
  <AssemblyInfo>
    <AssemblyName>System.ServiceModel</AssemblyName>
    <AssemblyVersion>2.0.5.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
    <AssemblyVersion>4.1.0.0</AssemblyVersion>
    <AssemblyVersion>4.1.1.0</AssemblyVersion>
    <AssemblyVersion>4.2.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Attribute</BaseTypeName>
  </Base>
  <Interfaces />
  <Attributes>
    <Attribute>
      <AttributeName>System.AttributeUsage(System.AttributeTargets.Method)</AttributeName>
    </Attribute>
  </Attributes>
  <Docs>
    <summary>
      <span data-ttu-id="5a5b9-101">指示方法定义一个操作，该操作是 Windows Communication Foundation (WCF) 应用程序中服务协定的一部分。</span>
      <span class="sxs-lookup">
        <span data-stu-id="5a5b9-101">Indicates that a method defines an operation that is part of a service contract in a Windows Communication Foundation (WCF) application.</span>
      </span>
    </summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="5a5b9-102">将 <xref:System.ServiceModel.OperationContractAttribute> 应用于方法，以指示该方法实现作为服务协定（由 <xref:System.ServiceModel.ServiceContractAttribute> 属性指定）一部分的服务操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-102">Apply the <xref:System.ServiceModel.OperationContractAttribute> to a method to indicate that the method implements a service operation as part of a service contract (specified by a <xref:System.ServiceModel.ServiceContractAttribute> attribute).</span></span>  
  
 <span data-ttu-id="5a5b9-103">使用 <xref:System.ServiceModel.OperationContractAttribute> 属性控制该操作的结构以及以元数据表示的值：</span><span class="sxs-lookup"><span data-stu-id="5a5b9-103">Use the <xref:System.ServiceModel.OperationContractAttribute> properties to control the structure of the operation and the values expressed in metadata:</span></span>  
  
-   <span data-ttu-id="5a5b9-104"><xref:System.ServiceModel.OperationContractAttribute.Action%2A> 属性指定唯一标识该操作的操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-104">The <xref:System.ServiceModel.OperationContractAttribute.Action%2A> property specifies the action that uniquely identifies this operation.</span></span> [!INCLUDE[indigo2](~/includes/indigo2-md.md)]<span data-ttu-id="5a5b9-105"> 根据请求消息的操作将它们调度至方法。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-105"> dispatches request messages to methods based on their action.</span></span>  
  
-   <span data-ttu-id="5a5b9-106"><xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> 属性指示使用 Begin/End 方法对可以实现或异步调用该操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-106">The <xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> property indicates that the operation is implemented or can be called asynchronously using a Begin/End method pair.</span></span>  
  
-   <span data-ttu-id="5a5b9-107"><xref:System.ServiceModel.OperationContractAttribute.HasProtectionLevel%2A> 属性指示是否已显式设置 <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-107">The <xref:System.ServiceModel.OperationContractAttribute.HasProtectionLevel%2A> property indicates whether the <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> property has been explicitly set.</span></span>  
  
-   <span data-ttu-id="5a5b9-108"><xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> 属性指示该操作只包含单个输入消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-108">The <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property indicates that the operation only consists of a single input message.</span></span> <span data-ttu-id="5a5b9-109">该操作没有关联的输出消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-109">The operation has no associated output message.</span></span>  
  
-   <span data-ttu-id="5a5b9-110"><xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> 属性指定该操作是否可以是会话中的初始操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-110">The <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> property specifies whether this operation can be the initial operation in a session.</span></span>  
  
-   <span data-ttu-id="5a5b9-111"><xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> 属性指定该操作完成后，[!INCLUDE[indigo2](~/includes/indigo2-md.md)] 是否试图终止当前会话。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-111">The <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> property specifies whether [!INCLUDE[indigo2](~/includes/indigo2-md.md)] attempts to terminate the current session after the operation completes.</span></span>  
  
-   <span data-ttu-id="5a5b9-112"><xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> 属性指定运行时操作要求的消息级安全性。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-112">The <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> property specifies the message-level security that an operation requires at run time.</span></span>  
  
-   <span data-ttu-id="5a5b9-113"><xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> 属性指定该操作答复消息的操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-113">The <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property specifies the action of the reply message for the operation.</span></span>  
  
 <span data-ttu-id="5a5b9-114"><xref:System.ServiceModel.OperationContractAttribute> 属性声明方法是服务协定中的操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-114">The <xref:System.ServiceModel.OperationContractAttribute> attribute declares that a method is an operation in a service contract.</span></span> <span data-ttu-id="5a5b9-115">只有具有 <xref:System.ServiceModel.OperationContractAttribute> 属性的方法可作为服务操作公开。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-115">Only methods attributed with the <xref:System.ServiceModel.OperationContractAttribute> are exposed as service operations.</span></span> <span data-ttu-id="5a5b9-116">不含有 <xref:System.ServiceModel.OperationContractAttribute> 标记的所有方法的服务协定不公开任何操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-116">A service contract without any methods marked with the <xref:System.ServiceModel.OperationContractAttribute> exposes no operations.</span></span>  
  
 <span data-ttu-id="5a5b9-117"><xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A>属性指示一对`Begin` \< *methodName*> 和`End` \< *methodName*> 方法构成单个操作以异步方式实现 （不管在客户端或服务）。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-117">The <xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> property indicates that a pair of `Begin`\<*methodName*> and `End`\<*methodName*> methods form a single operation implemented asynchronously (whether on the client or the service).</span></span> <span data-ttu-id="5a5b9-118">异步实现操作的服务功能是服务实现详细信息，并且不会在元数据中（如 Web 服务描述语言 (WSDL)）公开。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-118">The ability of a service to implement operations asynchronously is a service implementation detail and is not exposed in metadata (such as Web Services Description Language (WSDL)).</span></span>  
  
 <span data-ttu-id="5a5b9-119">同样，客户端可选择异步调用与实现服务方法无关的操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-119">Similarly, clients can choose to invoke operations asynchronously independent of how the service method is implemented.</span></span> <span data-ttu-id="5a5b9-120">如果服务方法需要花些时间才可将信息直接返回至客户端但又必须这样做时，建议在客户端异步调用服务操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-120">Calling service operations asynchronously in the client is recommended when a service method takes some time but must return information directly to the client.</span></span> <span data-ttu-id="5a5b9-121">有关详细信息，请参阅<xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A>。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-121">For details, see <xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A>.</span></span>  
  
 <span data-ttu-id="5a5b9-122"><xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> 属性指示方法根本不返回任何值，包括空基础响应消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-122">The <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property indicates that a method does not return any value at all, including an empty underlying response message.</span></span> <span data-ttu-id="5a5b9-123">这种类型的方法对通知或事件样式通信十分有用。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-123">This type of method is useful for notifications or event-style communication.</span></span> <span data-ttu-id="5a5b9-124">但这种方法不能返回答复消息，因此该方法的声明必须返回 `void`。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-124">Methods of this kind cannot return a reply message so the method's declaration must return `void`.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="5a5b9-125">当以编程方式检索此属性中的信息存储，使用<xref:System.ServiceModel.Description.ContractDescription>类而不是反射。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-125">When programmatically retrieving the information store in this attribute, use the <xref:System.ServiceModel.Description.ContractDescription> class instead of reflection.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5a5b9-126">如果 <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> 属性设置为 `false`（默认值），即使返回 `void` 的方法也是基础消息级别的双向方法。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-126">If the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property is set to `false`, (the default), even methods that return `void` are two-way methods at the underlying message level.</span></span> <span data-ttu-id="5a5b9-127">在此种情况下，基础结构将创建并发送一条空消息，以向调用方指示该方法已返回内容。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-127">In this case, the infrastructure creates and sends an empty message to indicate to the caller that the method has returned.</span></span> <span data-ttu-id="5a5b9-128">使用此方法使应用程序和基础结构可以将错误信息（如 SOAP 错误）发送回客户端。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-128">Using this approach enables the application and the infrastructure to send error information (such as a SOAP fault) back to the client.</span></span> <span data-ttu-id="5a5b9-129">将 <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> 设置为 `true` 是阻止创建和调度答复消息的唯一方法。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-129">Setting <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> to `true` is the only way to prevent the creation and dispatch of a reply message.</span></span> <span data-ttu-id="5a5b9-130">有关详细信息，请参阅[单向服务](~/docs/framework/wcf/feature-details/one-way-services.md)。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-130">For more information, see [One-Way Services](~/docs/framework/wcf/feature-details/one-way-services.md).</span></span>  
  
 <span data-ttu-id="5a5b9-131"><xref:System.ServiceModel.OperationContractAttribute.Action%2A> 和 <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> 属性不仅可用于修改 SOAP 消息的默认操作，也可用于为无法识别的消息创建处理程序，或为直接消息编程禁用添加操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-131">The <xref:System.ServiceModel.OperationContractAttribute.Action%2A> and <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> properties can be used not only to modify the default action of SOAP messages but also to create handlers for unrecognized messages or to disable adding actions for direct message programming.</span></span> <span data-ttu-id="5a5b9-132">使用 <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> 属性以防止客户端在进行其他操作前调用特定的服务操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-132">Use the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> property to prevent clients from calling a particular service operation prior to other operations.</span></span> <span data-ttu-id="5a5b9-133">使用 <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> 属性以在客户端调用特定服务操作后，让 [!INCLUDE[indigo2](~/includes/indigo2-md.md)] 关闭信道。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-133">Use the <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> property to have [!INCLUDE[indigo2](~/includes/indigo2-md.md)] close the channel after clients call a particular service operation.</span></span> <span data-ttu-id="5a5b9-134">有关详细信息，请参阅[使用会话](~/docs/framework/wcf/using-sessions.md)。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-134">For more information, see [Using Sessions](~/docs/framework/wcf/using-sessions.md).</span></span>  
  
 <span data-ttu-id="5a5b9-135"><xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> 属性使您可以在操作协定中指定该操作消息是否已签名和/或已加密。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-135">The <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> property enables you to specify on the operation contract whether the operation messages are signed, encrypted, or signed and encrypted.</span></span> <span data-ttu-id="5a5b9-136">如果绑定无法提供协定中要求的安全级别，则运行时将引发异常。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-136">If a binding cannot provide the security level required by the contract, an exception is thrown at run time.</span></span> <span data-ttu-id="5a5b9-137">有关详细信息，请参阅<xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A>和[了解保护级别](~/docs/framework/wcf/understanding-protection-level.md)。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-137">For more information, see <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> and [Understanding Protection Level](~/docs/framework/wcf/understanding-protection-level.md).</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="5a5b9-138">下面的代码示例演示只有一个操作的简单服务协定。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-138">The following code example shows a simple service contract with one operation.</span></span>  
  
 [!code-csharp[OperationContractAttribute#1](~/samples/snippets/csharp/VS_Snippets_CFX/operationcontractattribute/cs/services.cs#1)]
 [!code-vb[OperationContractAttribute#1](~/samples/snippets/visualbasic/VS_Snippets_CFX/operationcontractattribute/vb/services.vb#1)]  
  
 <span data-ttu-id="5a5b9-139">下面的示例演示了一个服务，该服务实现指定三个操作的隐式服务协定。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-139">The following example is a service that implements an implicit service contract that specifies three operations.</span></span> <span data-ttu-id="5a5b9-140">其中两个操作是双向操作，即无论返回值是什么，它们都将基础响应消息返回至调用方。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-140">Two of the operations are two-way operations, which return underlying response messages to the caller no matter what the return value is.</span></span> <span data-ttu-id="5a5b9-141">第三个操作接收一个调用（基础入站消息），但不返回任何基础响应消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-141">The third operation receives a call, an underlying inbound message, but returns no underlying response message.</span></span>  
  
```csharp  
[ServiceContractAttribute]  
public class OneAndTwoWay  
{  
  // The client waits until a response message appears.  
  [OperationContractAttribute]  
  public int MethodOne (int x, out int y)  
  {  
    y = 34;  
    return 0;  
  }  
  
  // The client waits until an empty response message appears.  
  [OperationContractAttribute]  
  public void MethodTwo (int x)  
  {  
    return;  
  }  
  
  // The client returns as soon as an outbound message  
  // is dispatched to the service; no response  
  // message is generated or sent from the service.  
  [OperationContractAttribute(IsOneWay=true)]  
  public void MethodThree (int x)  
  {  
    return;  
  }  
}  
```  
  
 ]]></format>
    </remarks>
  </Docs>
  <Members>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public OperationContractAttribute ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.ServiceModel.OperationContractAttribute.#ctor" />
      <MemberSignature Language="VB.NET" Value="Public Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; OperationContractAttribute();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="5a5b9-142">初始化 <see cref="T:System.ServiceModel.OperationContractAttribute" /> 类的新实例。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-142">Initializes a new instance of the <see cref="T:System.ServiceModel.OperationContractAttribute" /> class.</span>
          </span>
        </summary>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="Action">
      <MemberSignature Language="C#" Value="public string Action { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string Action" />
      <MemberSignature Language="DocId" Value="P:System.ServiceModel.OperationContractAttribute.Action" />
      <MemberSignature Language="VB.NET" Value="Public Property Action As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ Action { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="5a5b9-143">获取或设置请求消息的 WS-Addressing 操作。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-143">Gets or sets the WS-Addressing action of the request message.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="5a5b9-144">生成 WS-Addressing Action 标头时要使用的操作。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-144">The action to use in generating the WS-Addressing Action header.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="5a5b9-145">使用<xref:System.ServiceModel.OperationContractAttribute.Action%2A>属性来控制该方法的操作的输入消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-145">Use the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> property to control the action of the method's input message.</span></span> <span data-ttu-id="5a5b9-146">由于 [!INCLUDE[indigo2](~/includes/indigo2-md.md)] 使用该操作将传入消息调度至相应方法，因此在协定操作中使用的消息必须具有唯一的操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-146">Because [!INCLUDE[indigo2](~/includes/indigo2-md.md)] uses this action to dispatch an incoming message to the appropriate method, messages used within a contract operation must have unique actions.</span></span> <span data-ttu-id="5a5b9-147">默认操作值是协定命名空间的组合 (默认值是"http://tempuri.org/")，（接口名称或类名称，如果使用没有显式服务接口） 的协定名称、 操作名称和一个附加字符串 ("Response") 如果消息是一个相关的响应。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-147">The default action value is a combination of the contract namespace (the default value is "http://tempuri.org/"), the contract name (interface name or the class name, if no explicit service interface is used), the operation name, and an additional string ("Response") if the message is a correlated response.</span></span> <span data-ttu-id="5a5b9-148">您可以使用 <xref:System.ServiceModel.OperationContractAttribute.Action%2A> 属性重写该默认值。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-148">You can override this default with the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> property.</span></span>  
  
 <span data-ttu-id="5a5b9-149">若要指示服务操作可处理该服务接收的所有消息，但又不能定向到服务操作，请指定值“\*”（星号）。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-149">To indicate that a service operation handles all messages that the service receives but cannot be directed to a service operation, specify the value "\*" (an asterisk).</span></span> <span data-ttu-id="5a5b9-150">这种类型的操作（称为不匹配的消息处理程序）必须具有下列方法签名之一，否则会引发 <xref:System.InvalidOperationException>：</span><span class="sxs-lookup"><span data-stu-id="5a5b9-150">This type of operation, called an unmatched message handler, must have one of following method signatures, or a <xref:System.InvalidOperationException> is thrown:</span></span>  
  
-   <span data-ttu-id="5a5b9-151">该服务操作只能接受一个 <xref:System.ServiceModel.Channels.Message> 对象，并且返回一个 <xref:System.ServiceModel.Channels.Message> 对象。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-151">The service operation can take only a <xref:System.ServiceModel.Channels.Message> object and return a <xref:System.ServiceModel.Channels.Message> object.</span></span>  
  
-   <span data-ttu-id="5a5b9-152">该服务操作只能接受一个 <xref:System.ServiceModel.Channels.Message> 对象，并且不返回任何内容（即返回 `void`）。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-152">The service operation can take only a <xref:System.ServiceModel.Channels.Message> object and return nothing (that is, return `void`).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5a5b9-153">服务协定只能有一个 <xref:System.ServiceModel.OperationContractAttribute.Action%2A> 属性设置为“\*”的服务操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-153">A service contract can have only one service operation with the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> property set to "\*".</span></span> <span data-ttu-id="5a5b9-154">服务类实现的相同侦听 uri 所承载的服务任何的协定组可以具有多个服务操作<xref:System.ServiceModel.OperationContractAttribute.Action%2A>属性设置为"\*"时<xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>属性设置为`false`。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-154">Any group of service contracts hosted at the same listenUri that a service class implements can have many service operations with the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> property set to "\*" when the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> property is set to `false`.</span></span> <span data-ttu-id="5a5b9-155">但是，只有其中一个服务操作可以让<xref:System.ServiceModel.OperationContractAttribute.Action%2A>属性设置为"\*"和<xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>属性设置为 true。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-155">However, only one of those service operations can have the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> property set to "\*" and the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> property set to true.</span></span> <span data-ttu-id="5a5b9-156">有关更多详细信息，请参阅 <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-156">For more details, see <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="5a5b9-157">下面的示例演示了一个服务，该服务使用 <xref:System.ServiceModel.OperationContractAttribute.Action%2A> 和 <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> 属性显式控制输入和输出（或答复）消息的 SOAP 操作，并使用 <xref:System.ServiceModel.OperationContractAttribute.Name%2A> 属性控制元数据中操作的名称。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-157">The following example is a service that uses the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> and <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> properties to explicitly control the SOAP actions of both the input and output (or reply) messages, and the <xref:System.ServiceModel.OperationContractAttribute.Name%2A> property to control the name of the operation in metadata.</span></span> <span data-ttu-id="5a5b9-158">最后，应用程序还会使用值为“\*”的 <xref:System.ServiceModel.OperationContractAttribute.Action%2A> 指示处理无法识别的消息的方法。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-158">Finally, the application also uses an <xref:System.ServiceModel.OperationContractAttribute.Action%2A> value of "\*" to indicate a method that handles unrecognized messages.</span></span>  
  
 [!code-csharp[OperationContractAttribute_Properties#1](~/samples/snippets/csharp/VS_Snippets_CFX/operationcontractattribute_properties/cs/services.cs#1)]
 [!code-vb[OperationContractAttribute_Properties#1](~/samples/snippets/visualbasic/VS_Snippets_CFX/operationcontractattribute_properties/vb/services.vb#1)]  
  
 <span data-ttu-id="5a5b9-159">实现该协定的服务发送类似以下示例的消息：</span><span class="sxs-lookup"><span data-stu-id="5a5b9-159">A service that implements this contract sends messages that look like the following example:</span></span>  
  
 [!code-csharp[OperationContractAttribute_Properties#2](~/samples/snippets/csharp/VS_Snippets_CFX/operationcontractattribute_properties/cs/services.cs#2)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="5a5b9-160">该值为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-160">The value is <see langword="null" />.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="AsyncPattern">
      <MemberSignature Language="C#" Value="public bool AsyncPattern { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool AsyncPattern" />
      <MemberSignature Language="DocId" Value="P:System.ServiceModel.OperationContractAttribute.AsyncPattern" />
      <MemberSignature Language="VB.NET" Value="Public Property AsyncPattern As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool AsyncPattern { bool get(); void set(bool value); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="5a5b9-161">指示操作是使用服务协定中的 <see langword="Begin" />&lt;methodName&gt; 和 <see langword="End" />&lt;methodName&gt; 方法对异步实现的。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-161">Indicates that an operation is implemented asynchronously using a <see langword="Begin" />&lt;*methodName*&gt; and <see langword="End" />&lt;*methodName*&gt; method pair in a service contract.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="5a5b9-162">
            <see langword="true" /> 如果<see langword="Begin" /> &lt; *methodName*&gt;由匹配方法<see langword="End" /> &lt; *methodName* &gt;方法，可以通过处理基础结构即服务接口; 上的异步方法对作为实现的操作否则为<see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-162">
              <see langword="true" /> if the <see langword="Begin" />&lt;*methodName*&gt;method is matched by an <see langword="End" />&lt;*methodName*&gt; method and can be treated by the infrastructure as an operation that is implemented as an asynchronous method pair on the service interface; otherwise, <see langword="false" />.</span>
          </span>
          <span data-ttu-id="5a5b9-163">默认值为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-163">The default is <see langword="false" />.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="5a5b9-164">使用 <xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> 属性生成可在服务器和/或客户端异步调用的服务操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-164">Use the <xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> property to build service operations that can be called asynchronously on the server, the client, or both.</span></span> <span data-ttu-id="5a5b9-165"><xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> 属性通知运行库 `Begin` 方法有一个符合 .NET Framework 异步方法设计模式的匹配的 `End` 方法。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-165">The <xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> property informs the runtime that a `Begin` method has a matched `End` method that conforms to the .NET Framework asynchronous method design pattern.</span></span> <span data-ttu-id="5a5b9-166">生成用以实现服务操作的服务器异步方法可增强服务器的可伸缩性和性能，而不会影响服务的客户端。如果服务操作在执行完可异步执行的较长操作后，必须将某些内容返回至客户端，建议使用此方法。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-166">Building server asynchronous methods that implement a service operation increases server scalability and performance without affecting the clients of the service, and is recommended when a service operation must return something to the client after performing a lengthy operation that can be performed asynchronously.</span></span>  
  
 <span data-ttu-id="5a5b9-167">这不会影响客户端，因为服务器上的异步方法对是实现详细信息，该信息不会影响操作的基础 Web 服务描述语言 (WSDL) 描述。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-167">Clients remain unaffected because the asynchronous method pair on the server is an implementation detail that does not affect the underlying Web Services Description Language (WSDL) description of the operation.</span></span> <span data-ttu-id="5a5b9-168">此类方法向客户端显示为单个操作随`<input>`和关联`<output>`消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-168">Such methods appear to clients as a single operation with `<input>` and correlated `<output>` messages.</span></span> [!INCLUDE[indigo2](~/includes/indigo2-md.md)]<span data-ttu-id="5a5b9-169"> 自动将路由到的入站的消息`Begin` \< *methodName*> 方法并将路由的结果`End` \< *methodName*> 调用出站消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-169"> automatically routes inbound messages to the `Begin`\<*methodName*> method and routes the results of the `End`\<*methodName*> call to the outbound message.</span></span> <span data-ttu-id="5a5b9-170">因此，客户端信道可将方法对表示为单个同步操作或一个异步操作对。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-170">Client channels, therefore, can represent the method pair as either a single synchronous operation or as an asynchronous operation pair.</span></span> <span data-ttu-id="5a5b9-171">客户端表示形式在任何情况下都不会以任何方式影响服务器上的异步实现。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-171">In no case does the client representation affect the asynchronous implementation on the server in any way.</span></span>  
  
 <span data-ttu-id="5a5b9-172">客户端协定可使用 <xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> 属性指示异步方法对，即客户端可使用该方法对异步调用操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-172">Client contracts can use the <xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> property to indicate an asynchronous method pair that the client can use to invoke the operation asynchronously.</span></span> <span data-ttu-id="5a5b9-173">通常情况下，客户端应用程序使用[ServiceModel 元数据实用工具 (Svcutil.exe)](~/docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)工具和`/async`选项以生成`Begin` \< *methodName*>和`End` \< *methodName*> 客户端可以使用异步方式调用操作的方法对。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-173">Typically, client applications use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](~/docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool and the `/async` option to generate a `Begin`\<*methodName*> and `End`\<*methodName*> method pair that the client can use to invoke the operation asynchronously.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5a5b9-174">如果服务操作具有异步和同步两个版本，则服务上的默认行为是调用同步版本。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-174">If a service operation has both an asynchronous and a synchronous version, the default behavior on the service is to invoke the synchronous version.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="5a5b9-175">下面的代码示例演示服务协定的客户端信道，该协定包含 `Add` 的同步版本和异步版本。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-175">The following code example shows a client channel to a service contract that includes both a synchronous version of `Add` and an asynchronous version.</span></span> <span data-ttu-id="5a5b9-176">如果客户端使用协定接口，则 `BeginAdd` 和 `Add` 操作都会调用服务器上可能同步也可能不同步的方法。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-176">If the contract interface is used on the client, both the `BeginAdd` and the `Add` operation invoke a method on the server that may or may not be synchronous.</span></span> <span data-ttu-id="5a5b9-177">如果该协定用于实现服务，则默认将传入请求调度至同步方法。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-177">If the contract is used to implement the service, the default is that incoming requests are dispatched to the synchronous method.</span></span>  
  
```csharp  
[ServiceContract]  
public interface IAddTwoNumbers  
{  
    // If the asynchronous method pair  
    // appears on the client channel, the client can call   
    // them asynchronously to prevent blocking.  
    [OperationContract (AsyncPattern=true)]  
    IAsyncResult BeginAdd(int a, int b, AsyncCallback cb, AsyncState s);  
  
    [OperationContract]  
    int EndAdd(IAsyncResult r);  
  
    // This is a synchronous version of the BeginAdd/EndAdd pair.  
    // It appears in the client channel code by default.   
    [OperationContract]  
    int Add(int a, int b);  
   }  
```  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="HasProtectionLevel">
      <MemberSignature Language="C#" Value="public bool HasProtectionLevel { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool HasProtectionLevel" />
      <MemberSignature Language="DocId" Value="P:System.ServiceModel.OperationContractAttribute.HasProtectionLevel" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property HasProtectionLevel As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool HasProtectionLevel { bool get(); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="5a5b9-178">获取一个值，该值指示是否必须对此操作的消息进行加密和/或签名。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-178">Gets a value that indicates whether the messages for this operation must be encrypted, signed, or both.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="5a5b9-179">如果 <see langword="true" /> 属性设置为除 <see cref="P:System.ServiceModel.OperationContractAttribute.ProtectionLevel" /> 以外的任何值，则为 <see cref="F:System.Net.Security.ProtectionLevel.None" />；否则为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-179">
              <see langword="true" /> if the <see cref="P:System.ServiceModel.OperationContractAttribute.ProtectionLevel" /> property is set to a value other than <see cref="F:System.Net.Security.ProtectionLevel.None" />; otherwise, <see langword="false" />.</span>
          </span>
          <span data-ttu-id="5a5b9-180">默认值为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-180">The default is <see langword="false" />.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="5a5b9-181">使用 <xref:System.ServiceModel.OperationContractAttribute.HasProtectionLevel%2A> 属性确定此操作的消息是否需要特定的保护级别。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-181">Use the <xref:System.ServiceModel.OperationContractAttribute.HasProtectionLevel%2A> property to determine whether a specific protection level is required by the messages of this operation.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="IsInitiating">
      <MemberSignature Language="C#" Value="public bool IsInitiating { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool IsInitiating" />
      <MemberSignature Language="DocId" Value="P:System.ServiceModel.OperationContractAttribute.IsInitiating" />
      <MemberSignature Language="VB.NET" Value="Public Property IsInitiating As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool IsInitiating { bool get(); void set(bool value); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="5a5b9-182">获取或设置一个值，该值指示方法是否实现可在服务器上启动会话（如果存在会话）的操作。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-182">Gets or sets a value that indicates whether the method implements an operation that can initiate a session on the server (if such a session exists).</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="5a5b9-183">如果允许操作启动服务器上的会话，则为 <see langword="true" />；否则为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-183">
              <see langword="true" /> if the operation is permitted to initiate a session on the server, otherwise, <see langword="false" />.</span>
          </span>
          <span data-ttu-id="5a5b9-184">默认值为 <see langword="true" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-184">The default is <see langword="true" />.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="5a5b9-185"><xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> 属性控制操作是否可以是创建会话时调用的第一个操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-185">The <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> property controls whether an operation can be the first operation called when a session is created.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5a5b9-186"><xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> 的值必须为 <xref:System.ServiceModel.SessionMode.Allowed> 或 <xref:System.ServiceModel.SessionMode.Required> 且使用的绑定必须要求或允许会话，<xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> 属性才能正常工作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-186">The value of <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> must be either <xref:System.ServiceModel.SessionMode.Allowed> or <xref:System.ServiceModel.SessionMode.Required> and the binding used must require or allow sessions for the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> property to work properly.</span></span>  
  
 <span data-ttu-id="5a5b9-187">默认为 `true`，这意味着操作可以是通道上调用的第一个操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-187">The default is `true`, which means that an operation can be the first one called on a channel.</span></span> <span data-ttu-id="5a5b9-188">除了调用该方法之外，后续的调用对于启动方法无效。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-188">Subsequent calls to the initiating method have no effect, other than to call the method.</span></span> <span data-ttu-id="5a5b9-189">不会创建其他任何会话。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-189">No other sessions are created.</span></span> <span data-ttu-id="5a5b9-190">如果协定不使用会话，则将 <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> 设置为 `false` 会被忽略。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-190">If the contract does not make use of a session, setting <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> to `false` is ignored.</span></span>  
  
 <span data-ttu-id="5a5b9-191">通常，将 <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> 设置为 `false` 可强制客户端在调用此方法之前，调用服务上的另一个方法。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-191">Typically, you set <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> to `false` to force clients to call another method on the service before they can invoke this one.</span></span> <span data-ttu-id="5a5b9-192">例如，如果您的服务具有一系列取决于订单 ID 号的操作，可将一个 <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> 服务操作的 `true` 设置为 `GetOrderId`，并将所有其他的服务操作设置为 `false`。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-192">For example, if your service has a series of operations that depend on an order ID number, you can set <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> to `true` for a `GetOrderId` service operation and set all remaining service operations to `false`.</span></span> <span data-ttu-id="5a5b9-193">这将确保使用由该服务公开的其他方法之前，每个新的客户端都获得一个订单 ID。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-193">This ensures that each new client obtains an order ID prior to using the other methods exposed by the service.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5a5b9-194"><xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> 和 <xref:System.ServiceModel.OperationContractAttribute.Action%2A> 属性之间存在交互操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-194">There is an interaction between <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> and the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> property.</span></span> <span data-ttu-id="5a5b9-195">服务协定只能有一个 <xref:System.ServiceModel.OperationContractAttribute.Action%2A> 属性设置为“\*”的服务操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-195">A service contract can have only one service operation with the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> property set to "\*".</span></span> <span data-ttu-id="5a5b9-196">承载在相同的侦听 URI 所服务类实现的服务任何的协定组可以具有多个服务操作<xref:System.ServiceModel.OperationContractAttribute.Action%2A>属性设置为"\*"时<xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>属性设置为`false`。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-196">Any group of service contracts hosted at the same listen URI that a service class implements can have many service operations with the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> property set to "\*" when the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> property is set to `false`.</span></span> <span data-ttu-id="5a5b9-197">但是，这些服务方法之一可以有<xref:System.ServiceModel.OperationContractAttribute.Action%2A>属性设置为"\*"和<xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>属性设置为`true`。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-197">However, only one of those service methods can have the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> property set to "\*" and the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="5a5b9-198">如果服务收到非启动操作的消息，则该服务返回 ActionNotSupported SOAP 错误。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-198">If a service receives a message for a non-initiating operation, the service returns an ActionNotSupported SOAP fault.</span></span> <span data-ttu-id="5a5b9-199">客户端将这种情况当作 <xref:System.ServiceModel.FaultException>。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-199">The client experiences this as an <xref:System.ServiceModel.FaultException>.</span></span> <span data-ttu-id="5a5b9-200">如果客户端首先调用非启动操作，则客户端运行库会引发 <xref:System.InvalidOperationException?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-200">If a client calls a non-initiating operation first, the client runtime throws an <xref:System.InvalidOperationException?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="5a5b9-201">有关详细信息，请参阅[使用会话](~/docs/framework/wcf/using-sessions.md)。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-201">For more information, see [Using Sessions](~/docs/framework/wcf/using-sessions.md).</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="5a5b9-202">下面的示例演示了一个服务，该服务实现指定三种方法的服务协定。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-202">The following example is a service that implements a service contract that specifies three methods.</span></span> <span data-ttu-id="5a5b9-203">该服务需要会话。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-203">The service requires a session.</span></span> <span data-ttu-id="5a5b9-204">如果调用方第一次调用的是除 `MethodOne` 以外的任何操作，则会拒绝该信道并且会引发异常。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-204">If a caller's first call is to any operation other than `MethodOne`, the channel is refused and an exception is thrown.</span></span> <span data-ttu-id="5a5b9-205">调用方通过调用 `MethodOne` 启动会话时，可通过调用 `MethodThree` 随时终止通信会话。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-205">When a caller initiates a session by calling `MethodOne`, that caller can terminate the communication session at any time by calling `MethodThree`.</span></span> <span data-ttu-id="5a5b9-206">在会话期间，可任意调用 `MethodTwo`。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-206">`MethodTwo` can be called any number of times during a session.</span></span>  
  
```csharp  
[ServiceContract(SessionMode=SessionMode.Required)]  
public class InitializeAndTerminateService  
{  
  [OperationContract(  
    IsOneWay=true,  
    IsInitiating=true,  
    IsTerminating=false  
  )]  
  public void MethodOne()  
  {  
    return;  
  }  
  
  [OperationContract(  
    IsInitiating=false,  
    IsTerminating=false  
  )]  
  public int MethodTwo(int x, out int y)  
  {  
    y = 34;  
    return 0;  
  }  
  
  [OperationContract(  
    IsOneWay=true,  
    IsInitiating=false,  
    IsTerminating=true  
  )]  
  public void MethodThree()  
  {  
    return;  
  }  
}  
```  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="IsOneWay">
      <MemberSignature Language="C#" Value="public bool IsOneWay { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool IsOneWay" />
      <MemberSignature Language="DocId" Value="P:System.ServiceModel.OperationContractAttribute.IsOneWay" />
      <MemberSignature Language="VB.NET" Value="Public Property IsOneWay As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool IsOneWay { bool get(); void set(bool value); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="5a5b9-207">获取或设置一个值，该值指示操作是否返回答复消息。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-207">Gets or sets a value that indicates whether an operation returns a reply message.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="5a5b9-208">如果此方法收到请求消息，但未返回任何答复消息，则为 <see langword="true" />；否则为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-208">
              <see langword="true" /> if this method receives a request message and returns no reply message; otherwise, <see langword="false" />.</span>
          </span>
          <span data-ttu-id="5a5b9-209">默认值为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-209">The default is <see langword="false" />.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="5a5b9-210">使用 <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> 属性指示操作不返回答复消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-210">Use the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to indicate that an operation does not return a reply message.</span></span> <span data-ttu-id="5a5b9-211">这种类型的操作对通知或事件样式通信十分有用，特别是双向通信。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-211">This type of operation is useful for notifications or event-style communication, especially in two-way communication.</span></span> <span data-ttu-id="5a5b9-212">如果不等待基础响应消息，则单向操作的调用方在处理请求消息时无法直接检测错误。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-212">Without waiting for an underlying response message, callers of one-way operations have no direct way to detect a failure in processing the request message.</span></span> <span data-ttu-id="5a5b9-213">（使用可靠的信道和单向操作的服务应用程序可在信道级别检测消息传递失败。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-213">(Service applications that use reliable channels and one-way operations can detect a message delivery failure at the channel level.</span></span> <span data-ttu-id="5a5b9-214">有关详细信息，请参阅[可靠会话概述](~/docs/framework/wcf/feature-details/reliable-sessions-overview.md)。)</span><span class="sxs-lookup"><span data-stu-id="5a5b9-214">For details, see [Reliable Sessions Overview](~/docs/framework/wcf/feature-details/reliable-sessions-overview.md).)</span></span>  
  
 <span data-ttu-id="5a5b9-215">在面向双工（或双向）服务的应用程序中，客户端和服务器相互独立地通信，并且客户端信道可使用其方法中的 <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> 属性指示服务可单向调用客户端（该客户端可作为事件处理）。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-215">In duplex (or two-way) service-oriented applications in which the client and server communicate with each other independently, a client channel can use the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property on its methods to indicate that the service can make one-way calls to the client that the client can treat as events.</span></span> <span data-ttu-id="5a5b9-216">这不会返回调用或生成消息，因为该服务不需要任何响应消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-216">No return call or message is generated because the service does not expect any response message.</span></span>  
  
 <span data-ttu-id="5a5b9-217">如果 <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> 属性设置为 `false`（默认值），即使返回 `void` 的方法也会生成答复消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-217">If the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property is set to `false` (the default), even methods that return `void` result in a reply message.</span></span> <span data-ttu-id="5a5b9-218">在此种情况下，基础结构将创建并发送一条空消息，以向调用方指示该方法已返回内容。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-218">In this case, the infrastructure creates and sends an empty message to indicate to the caller that the method has returned.</span></span> <span data-ttu-id="5a5b9-219">（使用此方法使基础结构可以将 SOAP 错误发送回客户端。）将 <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> 设置为 `true` 是取消创建和调度响应消息的唯一方法。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-219">(Using this approach enables the infrastructure to send SOAP faults back to the client.) Setting <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> to `true` is the only way to cancel the creation and dispatch of a response message.</span></span>  
  
 <span data-ttu-id="5a5b9-220">单向方法不得返回一个值或具有 `ref` 或 `out` 参数；否则将引发 <xref:System.InvalidOperationException?displayProperty=nameWithType> 异常。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-220">One-way methods must not return a value or have `ref` or `out` parameters; otherwise a <xref:System.InvalidOperationException?displayProperty=nameWithType> exception is thrown.</span></span>  
  
 <span data-ttu-id="5a5b9-221">指定操作是单向操作，只表示它没有响应消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-221">Specifying that an operation is a one-way operation means only that there is no response message.</span></span> <span data-ttu-id="5a5b9-222">如果无法建立连接、出站消息非常大或该服务无法足够快地读取入站信息，则可能会阻止。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-222">It is possible to block if a connection cannot be made, or the outbound message is very large, or if the service cannot read inbound information fast enough.</span></span> <span data-ttu-id="5a5b9-223">如果客户端要求非阻止调用，则会生成 <xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> 操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-223">If a client requires a non-blocking call, generate <xref:System.ServiceModel.OperationContractAttribute.AsyncPattern%2A> operations.</span></span> <span data-ttu-id="5a5b9-224">有关详细信息，请参阅[单向服务](~/docs/framework/wcf/feature-details/one-way-services.md)和[使用 WCF 客户端访问服务](~/docs/framework/wcf/feature-details/accessing-services-using-a-client.md)。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-224">For more information, see [One-Way Services](~/docs/framework/wcf/feature-details/one-way-services.md) and [Accessing Services Using a WCF Client](~/docs/framework/wcf/feature-details/accessing-services-using-a-client.md).</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="5a5b9-225">下面的示例演示了一个服务，该服务实现指定三个操作的服务协定。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-225">The following example is a service that implements a service contract that specifies three operations.</span></span> <span data-ttu-id="5a5b9-226">其中两种方法实现双向操作，即无论返回值是什么，它们都将基础响应消息返回至调用方。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-226">Two of the methods implement two-way operations, which return underlying response messages to the caller no matter what the return value is.</span></span> <span data-ttu-id="5a5b9-227">第三种方法实现一个操作，该操作接收一个调用（基础入站消息），但不返回任何基础响应消息。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-227">The third method implements an operation that receives a call (an underlying inbound message) but returns no underlying response message.</span></span>  
  
```csharp  
[ServiceContract]  
public class OneAndTwoWay  
{  
  // The client waits until a response message appears.  
  [OperationContract]  
  public int MethodOne (int x, out int y)  
  {  
    y = 34;  
    return 0;  
  }  
  
  // The client waits until an empty response message appears.  
  [OperationContract]  
  public void MethodTwo (int x)  
  {  
    return;  
  }  
  
  // The client returns as soon as an outbound message  
  // is queued for dispatch to the service; no response  
  // message is generated or sent.  
  [OperationContract(IsOneWay=true)]  
  public void MethodThree (int x)  
  {  
    return;  
  }  
}  
```  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="IsTerminating">
      <MemberSignature Language="C#" Value="public bool IsTerminating { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool IsTerminating" />
      <MemberSignature Language="DocId" Value="P:System.ServiceModel.OperationContractAttribute.IsTerminating" />
      <MemberSignature Language="VB.NET" Value="Public Property IsTerminating As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool IsTerminating { bool get(); void set(bool value); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="5a5b9-228">获取或设置一个值，该值指示服务操作在发送答复消息（如果存在）后，是否会导致服务器关闭会话。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-228">Gets or sets a value that indicates whether the service operation causes the server to close the session after the reply message, if any, is sent.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="5a5b9-229">如果该操作会导致服务器关闭会话，则为 <see langword="true" />；否则为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-229">
              <see langword="true" /> if the operation causes the server to close the session, otherwise, <see langword="false" />.</span>
          </span>
          <span data-ttu-id="5a5b9-230">默认值为 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-230">The default is <see langword="false" />.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="5a5b9-231">使用 <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> 属性指示调用服务操作可终止通信会话。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-231">Use the <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> property to indicate that calling a service operation terminates the communication session.</span></span>  
  
 <span data-ttu-id="5a5b9-232">在客户端应用程序中，将 <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> 值设置为 `true` 以指示 [!INCLUDE[indigo2](~/includes/indigo2-md.md)] 在答复到达后，关闭信道。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-232">In a client application, a value of <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> set to `true` instructs [!INCLUDE[indigo2](~/includes/indigo2-md.md)] to close the channel after the reply arrives.</span></span>  
  
 <span data-ttu-id="5a5b9-233">在服务中，如果客户端在该期间内不关闭信道，则将会设置计时器并中止信道。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-233">In a service, a timer is set and the channel aborts if the client does not close the channel within that period.</span></span>  
  
 <span data-ttu-id="5a5b9-234">有关使用此属性的会话的详细信息，请参阅[使用会话](~/docs/framework/wcf/using-sessions.md)。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-234">For more information about using this property with sessions, see [Using Sessions](~/docs/framework/wcf/using-sessions.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5a5b9-235">如果调用方侦听的是 <xref:System.ServiceModel.OperationContext.OperationCompleted?displayProperty=nameWithType> 操作的 <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A?displayProperty=nameWithType> 事件，则在收到响应时可能会阻塞。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-235">If a caller is listening for the <xref:System.ServiceModel.OperationContext.OperationCompleted?displayProperty=nameWithType> event for an <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A?displayProperty=nameWithType> operation, it is possible to block when the response is received.</span></span> <span data-ttu-id="5a5b9-236">处理这种情况的正确方法是，当引发 <xref:System.ServiceModel.OperationContext.OperationCompleted> 时在其他线程上调度工作，然后从该事件处理程序立即返回。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-236">The proper way to handle this is to schedule work on another thread when <xref:System.ServiceModel.OperationContext.OperationCompleted> is raised and then immediately return from that event handler.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="5a5b9-237">下面的示例演示了一个服务，该服务实现指定三个操作的服务协定。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-237">The following example is a service that implements a service contract that specifies three operations.</span></span> <span data-ttu-id="5a5b9-238">该服务需要有状态连接。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-238">The service requires a stateful connection.</span></span> <span data-ttu-id="5a5b9-239">如果调用方第一次调用的是除 `MethodOne` 以外的任何操作，则会拒绝该信道并且会引发异常。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-239">If a caller's first call is to any operation other than `MethodOne`, the channel is refused and an exception is thrown.</span></span> <span data-ttu-id="5a5b9-240">调用方通过调用 `MethodOne` 启动会话时，可通过调用 `MethodThree` 随时终止通信会话。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-240">When a caller initiates a session by calling `MethodOne`, that caller can terminate the communication session at any time by calling `MethodThree`.</span></span> <span data-ttu-id="5a5b9-241">在会话期间，可任意调用 `MethodTwo`。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-241">`MethodTwo` can be called any number of times during a session.</span></span>  
  
```csharp  
[ServiceContractAttribute(SessionMode=SessionMode.Required)]  
public class InitializeAndTerminateService  
{  
  [OperationContract(  
    IsOneWay=true,  
    IsInitiating=true,  
    IsTerminating=false  
  )]  
  public void MethodOne()  
  {  
    return;  
  }  
  
  [OperationContract(  
    IsInitiating=false,  
    IsTerminating=false  
  )]  
  public int MethodTwo(int x, out int y)  
  {  
    y = 34;  
    return 0;  
  }  
  
  [OperationContract(  
    IsOneWay=true,  
    IsInitiating=false  
    IsTerminating=true  
  )]  
  public void MethodThree()  
  {  
    return;  
  }  
}  
```  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Name">
      <MemberSignature Language="C#" Value="public string Name { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string Name" />
      <MemberSignature Language="DocId" Value="P:System.ServiceModel.OperationContractAttribute.Name" />
      <MemberSignature Language="VB.NET" Value="Public Property Name As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ Name { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="5a5b9-242">获取或设置操作的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-242">Gets or sets the name of the operation.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="5a5b9-243">操作的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-243">The name of the operation.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="5a5b9-244">使用<xref:System.ServiceModel.OperationContractAttribute.Name%2A>属性来重写 <`operation`> WSDL 中的元素名称。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-244">Use the <xref:System.ServiceModel.OperationContractAttribute.Name%2A> property to override the <`operation`> element name in WSDL.</span></span> <span data-ttu-id="5a5b9-245">默认的操作名称为实现方法的名称。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-245">The default operation name is the name of the implementing method.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="5a5b9-246">下面的代码示例使用 <xref:System.ServiceModel.OperationContractAttribute.Name%2A> 属性声明在元数据中公开的操作名称。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-246">The following code example uses the <xref:System.ServiceModel.OperationContractAttribute.Name%2A> property to declare the name of the operation as exposed in metadata.</span></span>  
  
 [!code-csharp[OperationContractAttribute_Properties#1](~/samples/snippets/csharp/VS_Snippets_CFX/operationcontractattribute_properties/cs/services.cs#1)]
 [!code-vb[OperationContractAttribute_Properties#1](~/samples/snippets/visualbasic/VS_Snippets_CFX/operationcontractattribute_properties/vb/services.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="5a5b9-247">
            <see cref="P:System.ServiceModel.OperationContractAttribute.Name" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-247">
              <see cref="P:System.ServiceModel.OperationContractAttribute.Name" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentOutOfRangeException">
          <span data-ttu-id="5a5b9-248">该值是一个空字符串。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-248">The value is an empty string.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="ProtectionLevel">
      <MemberSignature Language="C#" Value="public System.Net.Security.ProtectionLevel ProtectionLevel { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.Net.Security.ProtectionLevel ProtectionLevel" />
      <MemberSignature Language="DocId" Value="P:System.ServiceModel.OperationContractAttribute.ProtectionLevel" />
      <MemberSignature Language="VB.NET" Value="Public Property ProtectionLevel As ProtectionLevel" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Net::Security::ProtectionLevel ProtectionLevel { System::Net::Security::ProtectionLevel get(); void set(System::Net::Security::ProtectionLevel value); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Net.Security.ProtectionLevel</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="5a5b9-249">获取或设置一个值，该值指定是否必须对操作的消息进行加密和/或签名。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-249">Gets or sets a value that specifies whether the messages of an operation must be encrypted, signed, or both.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="5a5b9-250">
            <see cref="T:System.Net.Security.ProtectionLevel" /> 值之一。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-250">One of the <see cref="T:System.Net.Security.ProtectionLevel" /> values.</span>
          </span>
          <span data-ttu-id="5a5b9-251">默认值为 <see cref="F:System.Net.Security.ProtectionLevel.None" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-251">The default is <see cref="F:System.Net.Security.ProtectionLevel.None" />.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="5a5b9-252">使用 <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> 属性控制是否必须对操作消息进行加密和/或签名。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-252">Use the <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> property to control whether the messages of an operation must be encrypted, signed, or both.</span></span> <span data-ttu-id="5a5b9-253">除非较窄范围重写此处设置的值，否则此值是为此操作指定的所有消息的默认值。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-253">The value set here is the default value for all messages specified for this operation unless a narrower scope overrides this value.</span></span>  
  
 <span data-ttu-id="5a5b9-254">请记住，运行时的保护行为是在下列属性中设置的保护级别值的组合，这一点很重要。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-254">It is important to remember that the protection behavior at runtime is the combination of the protection-level values set on the following properties.</span></span> <span data-ttu-id="5a5b9-255">这些属性具有层次结构。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-255">These properties have a hierarchical structure.</span></span> <span data-ttu-id="5a5b9-256">除非已为较窄范围显式设置了某个不同的值，否则设置最外层的值将为所有较窄的范围确定默认设置。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-256">Setting the outermost value establishes the default setting for all narrower scopes unless a different value for a narrower scope is explicitly set.</span></span> <span data-ttu-id="5a5b9-257">在这种情况下，外层的值将保持所有较窄的范围的默认设置，但特定的设置除外。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-257">In this case, the outer value remains the default for all narrower scopes with the exception of that specifically set.</span></span>  
  
 <span data-ttu-id="5a5b9-258">例如，如果将 <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A?displayProperty=nameWithType> 设置为 <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType>，并且其他较窄范围都没有设置保护级别，则会对操作协定中的所有消息进行加密和签名。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-258">For example, if <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A?displayProperty=nameWithType> is set to <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType> and no other narrower scopes have protection level settings, all messages in an operation contract are encrypted and signed.</span></span> <span data-ttu-id="5a5b9-259">但是，如果其中一个操作将 <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> 设置为 <xref:System.Net.Security.ProtectionLevel.Sign?displayProperty=nameWithType>，那么只会对此操作的消息进行签名，而对协定中的所有其他消息进行加密和签名。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-259">If, however, one of those operations has the <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> set to <xref:System.Net.Security.ProtectionLevel.Sign?displayProperty=nameWithType>, then the messages for that operation are signed but all other messages in the contract are encrypted and signed.</span></span>  
  
 <span data-ttu-id="5a5b9-260">有关保护级别及其假设和范围的详细信息，请参阅[了解保护级别](~/docs/framework/wcf/understanding-protection-level.md)。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-260">For details about protection levels and their assumptions and scopes, see [Understanding Protection Level](~/docs/framework/wcf/understanding-protection-level.md).</span></span>  
  
 <span data-ttu-id="5a5b9-261">这些值的设置范围是：</span><span class="sxs-lookup"><span data-stu-id="5a5b9-261">The scopes at which these values are set are:</span></span>  
  
 <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A?displayProperty=nameWithType>  
  
 <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A?displayProperty=nameWithType>  
  
 <xref:System.ServiceModel.FaultContractAttribute.ProtectionLevel%2A?displayProperty=nameWithType>  
  
 <xref:System.ServiceModel.MessageContractAttribute.ProtectionLevel%2A?displayProperty=nameWithType>  
  
 <span data-ttu-id="5a5b9-262"><xref:System.ServiceModel.MessageContractMemberAttribute.ProtectionLevel%2A?displayProperty=nameWithType> 上的 <xref:System.ServiceModel.MessageHeaderAttribute?displayProperty=nameWithType> 属性。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-262">The <xref:System.ServiceModel.MessageContractMemberAttribute.ProtectionLevel%2A?displayProperty=nameWithType> property on <xref:System.ServiceModel.MessageHeaderAttribute?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="5a5b9-263"><xref:System.ServiceModel.MessageContractMemberAttribute.ProtectionLevel%2A?displayProperty=nameWithType> 上的 <xref:System.ServiceModel.MessageBodyMemberAttribute?displayProperty=nameWithType> 属性。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-263">The <xref:System.ServiceModel.MessageContractMemberAttribute.ProtectionLevel%2A?displayProperty=nameWithType> property on <xref:System.ServiceModel.MessageBodyMemberAttribute?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="5a5b9-264">当协定上没有显式指定保护级别并且基础绑定支持安全性时（无论处于传输级别还是处于消息级别），整个协定的有效保护级别将为 <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-264">When there is no protection level explicitly specified on the contract and the underlying binding supports security (whether at the transport or message level), the effective protection level for the whole contract is <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType>.</span></span> <span data-ttu-id="5a5b9-265">如果绑定不支持安全性（如 <xref:System.ServiceModel.BasicHttpBinding>），则整个协定的有效 <xref:System.Net.Security.ProtectionLevel?displayProperty=nameWithType> 为 <xref:System.Net.Security.ProtectionLevel.None?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-265">If the binding does not support security (such as <xref:System.ServiceModel.BasicHttpBinding>), the effective <xref:System.Net.Security.ProtectionLevel?displayProperty=nameWithType> is <xref:System.Net.Security.ProtectionLevel.None?displayProperty=nameWithType> for the whole contract.</span></span> <span data-ttu-id="5a5b9-266">因此，根据终结点绑定，即使协定指定了 <xref:System.Net.Security.ProtectionLevel.None?displayProperty=nameWithType>，客户端也可以要求不同的消息或传输级别安全保护。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-266">The result is that depending upon the endpoint binding, clients can require different message or transport level security protection even when the contract specifies <xref:System.Net.Security.ProtectionLevel.None?displayProperty=nameWithType>.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentOutOfRangeException">
          <span data-ttu-id="5a5b9-267">该值不是 <see cref="T:System.Net.Security.ProtectionLevel" /> 值之一。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-267">The value is not one of the <see cref="T:System.Net.Security.ProtectionLevel" /> values.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="ReplyAction">
      <MemberSignature Language="C#" Value="public string ReplyAction { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string ReplyAction" />
      <MemberSignature Language="DocId" Value="P:System.ServiceModel.OperationContractAttribute.ReplyAction" />
      <MemberSignature Language="VB.NET" Value="Public Property ReplyAction As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ ReplyAction { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="5a5b9-268">获取或设置用于该操作答复消息的 SOAP 操作的值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-268">Gets or sets the value of the SOAP action for the reply message of the operation.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="5a5b9-269">用于答复消息的 SOAP 操作的值。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-269">The value of the SOAP action for the reply message.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="5a5b9-270">除指定答复消息操作标头的特定值以外，还可以指定字符串“\*”（星号）。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-270">In addition to specifying a particular value for the action header of the reply message, you can also specify the string "\*" (an asterisk).</span></span> <span data-ttu-id="5a5b9-271">在服务中指定星号可指示 [!INCLUDE[indigo2](~/includes/indigo2-md.md)] 不向消息中添加答复操作，如果您是直接对消息进行编程会十分有用。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-271">Specifying an asterisk in the service instructs [!INCLUDE[indigo2](~/includes/indigo2-md.md)] not to add a reply action to the message, which is useful if you are programming against messages directly.</span></span> <span data-ttu-id="5a5b9-272">在客户端应用程序中指定星号可指示 [!INCLUDE[indigo2](~/includes/indigo2-md.md)] 不验证答复操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-272">Specifying an asterisk in a client application instructs [!INCLUDE[indigo2](~/includes/indigo2-md.md)] not to validate the reply action.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="5a5b9-273">下面的示例演示了一个服务，该服务使用 <xref:System.ServiceModel.OperationContractAttribute.Action%2A> 和 <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> 属性显式控制输入和输出（或答复）消息的 SOAP 操作。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-273">The following example is a service that uses the <xref:System.ServiceModel.OperationContractAttribute.Action%2A> and <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> properties to explicitly control the SOAP actions of both the input and output (or reply) messages.</span></span> <span data-ttu-id="5a5b9-274">它还使用 <xref:System.ServiceModel.OperationContractAttribute.Name%2A> 属性声明在元数据中公开的操作名称。</span><span class="sxs-lookup"><span data-stu-id="5a5b9-274">It also uses the <xref:System.ServiceModel.OperationContractAttribute.Name%2A> property to declare the name of the operation as exposed in metadata.</span></span>  
  
 [!code-csharp[OperationContractAttribute_Properties#1](~/samples/snippets/csharp/VS_Snippets_CFX/operationcontractattribute_properties/cs/services.cs#1)]
 [!code-vb[OperationContractAttribute_Properties#1](~/samples/snippets/visualbasic/VS_Snippets_CFX/operationcontractattribute_properties/vb/services.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="5a5b9-275">
            <see cref="P:System.ServiceModel.OperationContractAttribute.ReplyAction" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="5a5b9-275">
              <see cref="P:System.ServiceModel.OperationContractAttribute.ReplyAction" /> is <see langword="null" />.</span>
          </span>
        </exception>
      </Docs>
    </Member>
  </Members>
</Type>