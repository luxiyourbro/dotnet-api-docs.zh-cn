<Type Name="PersonalizationProvider" FullName="System.Web.UI.WebControls.WebParts.PersonalizationProvider">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="54103b25251ca76be386820236610217228c9efe" />
    <Meta Name="ms.sourcegitcommit" Value="9dda17222b9f7d3edf130133bfb1370d5b410a4b" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="zh-CN" />
    <Meta Name="ms.lasthandoff" Value="09/22/2018" />
    <Meta Name="ms.locfileid" Value="46693831" />
  </Metadata>
  <TypeSignature Language="C#" Value="public abstract class PersonalizationProvider : System.Configuration.Provider.ProviderBase" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi abstract beforefieldinit PersonalizationProvider extends System.Configuration.Provider.ProviderBase" />
  <TypeSignature Language="DocId" Value="T:System.Web.UI.WebControls.WebParts.PersonalizationProvider" />
  <TypeSignature Language="VB.NET" Value="Public MustInherit Class PersonalizationProvider&#xA;Inherits ProviderBase" />
  <TypeSignature Language="C++ CLI" Value="public ref class PersonalizationProvider abstract : System::Configuration::Provider::ProviderBase" />
  <TypeSignature Language="F#" Value="type PersonalizationProvider = class&#xA;    inherit ProviderBase" />
  <AssemblyInfo>
    <AssemblyName>System.Web</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Configuration.Provider.ProviderBase</BaseTypeName>
  </Base>
  <Interfaces />
  <Docs>
    <summary>
      <span data-ttu-id="d6a06-101">实现个性化设置提供程序的基本功能。</span>
      <span class="sxs-lookup">
        <span data-stu-id="d6a06-101">Implements the basic functionality for a personalization provider.</span>
      </span>
    </summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-102">这是定义个性化设置提供程序所需的功能的抽象基类。</span><span class="sxs-lookup"><span data-stu-id="d6a06-102">This is the abstract base class that defines the required functionality of a personalization provider.</span></span> <span data-ttu-id="d6a06-103">个性化设置提供程序加载和存储个性化设置数据代表的<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization>实例。</span><span class="sxs-lookup"><span data-stu-id="d6a06-103">A personalization provider both loads and stores personalization data on behalf of a <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization> instance.</span></span>  
  
 <span data-ttu-id="d6a06-104">该基类定义多个方法; 这些方法的标准行为专门处理与基础数据存储区的这些方法都标记为 abstract。</span><span class="sxs-lookup"><span data-stu-id="d6a06-104">The base class defines standard behavior for a number of methods; only those methods that specifically deal with the underlying data store are marked abstract.</span></span> <span data-ttu-id="d6a06-105">这允许开发人员编写的自定义提供程序以与特定的数据存储，而无需重新实现使用的标准功能<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization>类。</span><span class="sxs-lookup"><span data-stu-id="d6a06-105">This allows a developer to write a custom provider to interact with a specific data store, without needing to re-implement standard functionality used by the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization> class.</span></span>  
  
 ]]></format>
    </remarks>
    <block subset="none" type="overrides">
      <para>
        <span data-ttu-id="d6a06-106">可以从派生<see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationProvider" />和为仅在此类中定义的抽象方法提供实现。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-106">You can derive from <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationProvider" /> and provide implementations for only the abstract methods defined in this class.</span>
        </span>
        <span data-ttu-id="d6a06-107">抽象方法处理专门与保存和加载到物理数据存储，数据和数据存储区管理。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-107">The abstract methods deal specifically with saving and loading data to a physical data store, and with data store administration.</span>
        </span>
        <span data-ttu-id="d6a06-108">自定义提供程序必须能够处理个性化设置信息的方式，用于区分<see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" />中的数据<see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" />数据。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-108">A custom provider must be capable of manipulating personalization information in a manner that distinguishes <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" /> data from <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> data.</span>
        </span>
        <span data-ttu-id="d6a06-109">此外，提供程序必须由页以及应用程序细分个性化设置数据。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-109">Furthermore, a provider must segment personalization data by page as well as by application.</span>
        </span>
        <span data-ttu-id="d6a06-110">实现<see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationProvider" />的实现与紧密耦合<see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationState" />因为一些个性化设置提供程序方法返回的实例<see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationState" />-派生的类。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-110">Implementations of <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationProvider" /> are tightly coupled to implementations of <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationState" /> because some personalization provider methods return instances of <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationState" />-derived classes.</span>
        </span>
        <span data-ttu-id="d6a06-111">为了便于开发自定义提供程序<see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationProvider" />基类包括个性化设置逻辑和序列化/反序列化逻辑，直接使用的默认实现<see cref="T:System.Web.UI.WebControls.WebParts.WebPartPersonalization" />类。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-111">To ease development of custom providers, the <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationProvider" /> base class includes a default implementation of the personalization logic and serialization/deserialization logic that is used directly by the <see cref="T:System.Web.UI.WebControls.WebParts.WebPartPersonalization" /> class.</span>
        </span>
        <span data-ttu-id="d6a06-112">因此，编写专门用于使用不同的数据存储区的自定义提供程序仅需要以下抽象方法的实现：</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-112">As a result, authoring a custom provider solely for the purpose of working with a different data store only requires implementation of the following abstract methods:</span>
        </span>
        <span data-ttu-id="d6a06-113">
-   <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.GetCountOfState(System.Web.UI.WebControls.WebParts.PersonalizationScope,System.Web.UI.WebControls.WebParts.PersonalizationStateQuery)" /> -此方法需要能够提供的查询参数的数据库中的个性化设置数据的行数进行计数。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-113">
-   <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.GetCountOfState(System.Web.UI.WebControls.WebParts.PersonalizationScope,System.Web.UI.WebControls.WebParts.PersonalizationStateQuery)" /> - This method needs to be able to count the number of rows of personalization data in the database for the supplied query parameters.</span>
        </span>
        <span data-ttu-id="d6a06-114">
-   <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationBlobs(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[]@,System.Byte[]@)" /> -在给定路径和用户的情况下，此方法从数据库中加载两个二进制大型对象 (Blob): 用于共享的数据，一个用于用户数据的一个 BLOB。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-114">
-   <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationBlobs(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[]@,System.Byte[]@)" /> - Given the path and user name, this method loads two binary large objects (BLOBs) from the database: one BLOB for shared data and one for user data.</span>
        </span>
        <span data-ttu-id="d6a06-115">如果你提供的用户名称和路径，则不需要<see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />控件，用于访问可提供用户名称/路径信息的页信息。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-115">If you supply the user name and path, then you do not need the <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" /> control to access the page information that can provide the user name/path information.</span>
        </span>
        <span data-ttu-id="d6a06-116">
-   <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetPersonalizationBlob(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String)" /> -在给定路径和用户的情况下，此方法删除数据库中的相应行。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-116">
-   <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetPersonalizationBlob(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String)" /> - Given the path and user name, this method deletes the corresponding row in the database.</span>
        </span>
        <span data-ttu-id="d6a06-117">如果你提供的用户名称和路径，则不需要<see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />控件，用于访问可提供用户名称/路径信息的页信息。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-117">If you supply the user name and path, then you do not need the <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" /> control to access the page information that can provide the user name/path information.</span>
        </span>
        <span data-ttu-id="d6a06-118">
-   <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.SavePersonalizationBlob(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[])" /> -此方法在给定路径和用户的情况下，将提供的 BLOB 保存到数据库。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-118">
-   <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.SavePersonalizationBlob(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[])" /> - Given the path and user name, this method saves the supplied BLOB to the database.</span>
        </span>
        <span data-ttu-id="d6a06-119">如果你提供的用户名称和路径，则不需要<see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />控件，用于访问可提供用户名称/路径信息的页信息。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-119">If you supply the user name and path, then you do not need the <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" /> control to access the page information that can provide the user name/path information.</span>
        </span>
        <span data-ttu-id="d6a06-120">在所有这些方法，如果只提供一个路径，指示正在操作页的共享的个性化数据。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-120">In all of these methods, if only a path is supplied, that indicates the shared personalization data for the page is being operated upon.</span>
        </span>
        <span data-ttu-id="d6a06-121">如果用户名和路径传递到方法中，然后应时处理页面的用户个性化设置数据。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-121">If both a path and a username are passed to a method, then the user personalization data for the page should be acted upon.</span>
        </span>
        <span data-ttu-id="d6a06-122">情况下<see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationBlobs(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[]@,System.Byte[]@)" />，应始终加载指定的路径的共享的数据，并且可以选择路径的用户个性化设置数据应还加载如果用户名不是<see langword="null" />。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-122">In the case of <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationBlobs(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[]@,System.Byte[]@)" />, the shared data for the specified path should always be loaded, and optionally the user personalization data for the path should also be loaded if the username is not <see langword="null" />.</span>
        </span>
        <span data-ttu-id="d6a06-123">其他所有抽象方法旨在仅用于管理应用程序，在运行时不使用由 Web 部件基础结构。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-123">All other abstract methods are intended for use only in administrative applications and are not used by the Web Parts infrastructure at run time.</span>
        </span>
        <span data-ttu-id="d6a06-124">有关的个性化设置提供程序实现的示例，请参阅<see cref="T:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider" />类。</span>
        <span class="sxs-lookup">
          <span data-stu-id="d6a06-124">For an example of an implementation of a personalization provider, see the <see cref="T:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider" /> class.</span>
        </span>
      </para>
    </block>
    <altmember cref="T:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider" />
    <related type="Article" href="http://msdn.microsoft.com/library/ab78a66e-9feb-4391-b3c3-8c07555e2308">
      <span data-ttu-id="d6a06-125">ASP.NET Web 部件页</span>
      <span class="sxs-lookup">
        <span data-stu-id="d6a06-125">ASP.NET Web Parts Pages</span>
      </span>
    </related>
    <related type="Article" href="http://msdn.microsoft.com/library/7dc34f74-52aa-4082-b98d-2bcf9e07e320">
      <span data-ttu-id="d6a06-126">Web 部件个性化设置概述</span>
      <span class="sxs-lookup">
        <span data-stu-id="d6a06-126">Web Parts Personalization Overview</span>
      </span>
    </related>
    <related type="Article" href="http://msdn.microsoft.com/library/a88d2bd5-4932-4ec1-b176-7d7da45f85d9">
      <span data-ttu-id="d6a06-127">演练： 实现使用用户控件的 Web 部件个性化设置</span>
      <span class="sxs-lookup">
        <span data-stu-id="d6a06-127">Walkthrough: Implementing Web Parts Personalization with a User Control</span>
      </span>
    </related>
    <related type="Article" href="http://msdn.microsoft.com/library/7885563f-7bbe-45a0-b5e2-c6bf1bc2deaa">
      <span data-ttu-id="d6a06-128">Web 部件个性化设置</span>
      <span class="sxs-lookup">
        <span data-stu-id="d6a06-128">Web Parts Personalization</span>
      </span>
    </related>
  </Docs>
  <Members>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="protected PersonalizationProvider ();" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.#ctor" />
      <MemberSignature Language="VB.NET" Value="Protected Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; PersonalizationProvider();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="d6a06-129">初始化 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationProvider" /> 类的新实例。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-129">Initializes a new instance of the <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationProvider" /> class.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-130">由于这是一个抽象类的构造函数，必须重写此方法以创建从此类继承的类的实例。</span><span class="sxs-lookup"><span data-stu-id="d6a06-130">Because this is a constructor for an abstract class, you must override this method to create an instance of a class that inherits from this class.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="ApplicationName">
      <MemberSignature Language="C#" Value="public abstract string ApplicationName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string ApplicationName" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Property ApplicationName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract property System::String ^ ApplicationName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.ApplicationName : string with get, set" Usage="System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="d6a06-131">在派生类中重写时，获取或设置为提供程序配置的应用程序的名称。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-131">When overridden in a derived class, gets or sets the name of the application configured for the provider.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="d6a06-132">为个性化设置提供程序配置的应用程序。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-132">The application configured for the personalization provider.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-133">如果在该配置文件中未指定应用程序名称[（ASP.NET 设置架构） webParts 的 personalization 的 providers 元素](http://msdn.microsoft.com/library/51363b49-eafa-4b9c-b9d0-80086b385195)属性，值为<xref:System.Web.Hosting.HostingEnvironment.ApplicationVirtualPath%2A>使用属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-133">If an application name is not specified in the configuration file using the [providers Element for personalization for webParts (ASP.NET Settings Schema)](http://msdn.microsoft.com/library/51363b49-eafa-4b9c-b9d0-80086b385195) attribute, the value of the <xref:System.Web.Hosting.HostingEnvironment.ApplicationVirtualPath%2A> property is used.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="d6a06-134">因为服务的所有请求使用单个默认个性化设置提供程序实例<xref:System.Web.HttpApplication>对象，必须可以并发执行的每个尝试设置的多个请求<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName%2A>属性值。</span><span class="sxs-lookup"><span data-stu-id="d6a06-134">Because a single, default personalization provider instance is used for all the requests served by an <xref:System.Web.HttpApplication> object, you can have multiple requests executing concurrently, each attempting to set the <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName%2A> property value.</span></span> <span data-ttu-id="d6a06-135"><xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName%2A>属性不是线程安全的多个写入操作，并更改<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName%2A>属性值可能会导致多个用户的应用程序的意外行为。</span><span class="sxs-lookup"><span data-stu-id="d6a06-135">The <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName%2A> property is not thread-safe for multiple writes, and changing the <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName%2A> property value can result in unexpected behavior for multiple users of an application.</span></span> <span data-ttu-id="d6a06-136">建议尽量不要允许用户设置的代码<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName%2A>属性所需除外。</span><span class="sxs-lookup"><span data-stu-id="d6a06-136">It is recommended that you avoid code allowing users to set the <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName%2A> property unless required.</span></span> <span data-ttu-id="d6a06-137">设置<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName%2A>属性可能是必需的例如，在管理应用程序，用于管理多个应用程序的个性化设置数据。</span><span class="sxs-lookup"><span data-stu-id="d6a06-137">Setting the <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ApplicationName%2A> property might be required, for example, in an administrative application that manages personalization data for multiple applications.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="CreateSupportedUserCapabilities">
      <MemberSignature Language="C#" Value="protected virtual System.Collections.IList CreateSupportedUserCapabilities ();" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig newslot virtual instance class System.Collections.IList CreateSupportedUserCapabilities() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.CreateSupportedUserCapabilities" />
      <MemberSignature Language="VB.NET" Value="Protected Overridable Function CreateSupportedUserCapabilities () As IList" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; virtual System::Collections::IList ^ CreateSupportedUserCapabilities();" />
      <MemberSignature Language="F#" Value="abstract member CreateSupportedUserCapabilities : unit -&gt; System.Collections.IList&#xA;override this.CreateSupportedUserCapabilities : unit -&gt; System.Collections.IList" Usage="personalizationProvider.CreateSupportedUserCapabilities " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Collections.IList</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="d6a06-138">返回 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartUserCapability" /> 对象的列表，这些对象表示 Web 部件控件集所使用的已知功能集。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-138">Returns a list of <see cref="T:System.Web.UI.WebControls.WebParts.WebPartUserCapability" /> objects that represent the set of known capabilities used by the Web Parts control set.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d6a06-139">一个 <see cref="T:System.Collections.IList" />，它表示 Web 部件控件集所使用的已知功能集。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-139">An <see cref="T:System.Collections.IList" /> that represents the set of known capabilities used by the Web Parts control set.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-140">目前，此方法返回包含两个功能的列表：<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.EnterSharedScopeUserCapability>和<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.ModifyStateUserCapability>。</span><span class="sxs-lookup"><span data-stu-id="d6a06-140">Currently, this method returns a list containing two capabilities: <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.EnterSharedScopeUserCapability> and <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.ModifyStateUserCapability>.</span></span> <span data-ttu-id="d6a06-141">这些是可以在中定义的默认功能[（ASP.NET 设置架构） webParts 的 personalization 的 authorization 元素](http://msdn.microsoft.com/library/d190d4ff-1445-4ee1-88eb-9737c7aa1434)元素内的[(ASP.NET webparts 的 personalization 元素设置架构）](http://msdn.microsoft.com/library/3d77da55-73ce-46ce-97cf-7d2abcaada09)的元素[webParts 元素 （ASP.NET 设置架构）](http://msdn.microsoft.com/library/90af5acc-5a80-4b39-bba7-74afd06b167c)配置节。</span><span class="sxs-lookup"><span data-stu-id="d6a06-141">These are the default capabilities that can be defined in the [authorization Element for personalization for webParts (ASP.NET Settings Schema)](http://msdn.microsoft.com/library/d190d4ff-1445-4ee1-88eb-9737c7aa1434) element within the [personalization Element for webParts (ASP.NET Settings Schema)](http://msdn.microsoft.com/library/3d77da55-73ce-46ce-97cf-7d2abcaada09) element of the [webParts Element (ASP.NET Settings Schema)](http://msdn.microsoft.com/library/90af5acc-5a80-4b39-bba7-74afd06b167c) configuration section.</span></span> <span data-ttu-id="d6a06-142">如果您选择实现自定义个性化设置基础结构，可以重写此方法，定义您自己的与授权相关的用户功能集。</span><span class="sxs-lookup"><span data-stu-id="d6a06-142">If you choose to implement a custom personalization infrastructure, you can override this method and define your own set of authorization-related user capabilities.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="DetermineInitialScope">
      <MemberSignature Language="C#" Value="public virtual System.Web.UI.WebControls.WebParts.PersonalizationScope DetermineInitialScope (System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, System.Web.UI.WebControls.WebParts.PersonalizationState loadedState);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance valuetype System.Web.UI.WebControls.WebParts.PersonalizationScope DetermineInitialScope(class System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, class System.Web.UI.WebControls.WebParts.PersonalizationState loadedState) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.DetermineInitialScope(System.Web.UI.WebControls.WebParts.WebPartManager,System.Web.UI.WebControls.WebParts.PersonalizationState)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual System::Web::UI::WebControls::WebParts::PersonalizationScope DetermineInitialScope(System::Web::UI::WebControls::WebParts::WebPartManager ^ webPartManager, System::Web::UI::WebControls::WebParts::PersonalizationState ^ loadedState);" />
      <MemberSignature Language="F#" Value="abstract member DetermineInitialScope : System.Web.UI.WebControls.WebParts.WebPartManager * System.Web.UI.WebControls.WebParts.PersonalizationState -&gt; System.Web.UI.WebControls.WebParts.PersonalizationScope&#xA;override this.DetermineInitialScope : System.Web.UI.WebControls.WebParts.WebPartManager * System.Web.UI.WebControls.WebParts.PersonalizationState -&gt; System.Web.UI.WebControls.WebParts.PersonalizationScope" Usage="personalizationProvider.DetermineInitialScope (webPartManager, loadedState)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.WebParts.PersonalizationScope</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="webPartManager" Type="System.Web.UI.WebControls.WebParts.WebPartManager" />
        <Parameter Name="loadedState" Type="System.Web.UI.WebControls.WebParts.PersonalizationState" />
      </Parameters>
      <Docs>
        <param name="webPartManager">
          <span data-ttu-id="d6a06-143">管理个性化设置信息的 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-143">The <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" /> that manages the personalization information.</span>
          </span>
        </param>
        <param name="loadedState">
          <span data-ttu-id="d6a06-144">个性化设置状态信息。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-144">The personalization state information.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-145">确定初始个性化设置范围应为 <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" /> 还是 <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> 范围。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-145">Determines whether the initial personalization scope should be <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" /> or <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> scope.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d6a06-146">一个 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" />，它指示当前个性化设置范围是 <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> 还是 <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-146">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" /> indicating whether the current personalization scope is <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> or <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" />.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-147">此方法确定是否应为当前作用域<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>或<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>，根据给定引用<xref:System.Web.UI.WebControls.WebParts.WebPartManager>控制和个性化设置状态已加载从之前在个性化设置生命周期中的信息。</span><span class="sxs-lookup"><span data-stu-id="d6a06-147">This method determines whether the current scope should be <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> or <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>, given a reference to a <xref:System.Web.UI.WebControls.WebParts.WebPartManager> control and the personalization state information that has already been loaded from earlier in the personalization life cycle.</span></span> <span data-ttu-id="d6a06-148">此信息由<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization>后续与个性化设置相关的任务的实例。</span><span class="sxs-lookup"><span data-stu-id="d6a06-148">This information is used by a <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization> instance for subsequent personalization-related tasks.</span></span>  
  
 <span data-ttu-id="d6a06-149">以下规则用于确定个性化设置范围：</span><span class="sxs-lookup"><span data-stu-id="d6a06-149">The following rules are used to determine personalization scope:</span></span>  
  
-   <span data-ttu-id="d6a06-150">作用域最初假定为<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>。</span><span class="sxs-lookup"><span data-stu-id="d6a06-150">Scope is assumed initially to be <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>.</span></span>  
  
-   <span data-ttu-id="d6a06-151">如果当前正在执行的用户帐户未经过身份验证，范围设置为<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>。</span><span class="sxs-lookup"><span data-stu-id="d6a06-151">If the currently executing user account is not authenticated, the scope is set to <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>.</span></span>  
  
-   <span data-ttu-id="d6a06-152">如果当前正在执行的用户帐户进行身份验证，额外的处理会按优先级顺序发生：</span><span class="sxs-lookup"><span data-stu-id="d6a06-152">If the currently executing user account is authenticated, additional processing occurs in order of precedence:</span></span>  
  
    -   <span data-ttu-id="d6a06-153">如果页是在回发模式下，页面请求包含来自以前呈现页面的作用域信息。</span><span class="sxs-lookup"><span data-stu-id="d6a06-153">If the page is in postback mode, the page request contains scope information from a previous rendering of the page.</span></span> <span data-ttu-id="d6a06-154">如果该作用域信息指明<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>时使用的作用域，则作用域的计算结果为<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>。</span><span class="sxs-lookup"><span data-stu-id="d6a06-154">If that scope information indicates that <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope was used, then the scope evaluates to <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>.</span></span>  
  
    -   <span data-ttu-id="d6a06-155">如果当前正在执行的页必须从另一页传输到它的控件 (例如，如果调用，因此发生控制的转移<xref:System.Web.HttpServerUtility.Transfer%2A>方法; 请注意此特定检查不会为跨页面发送发生)，并且如果以前执行页面有<xref:System.Web.UI.WebControls.WebParts.WebPartManager>作用域设置为值的实例，`Personalization.Scope`属性从上一个<xref:System.Web.UI.WebControls.WebParts.WebPartManager>实例。</span><span class="sxs-lookup"><span data-stu-id="d6a06-155">If the currently executing page had control transferred to it from another page (for example, if the transfer of control occurred due to calling the <xref:System.Web.HttpServerUtility.Transfer%2A> method; note that this specific check does not occur for cross-page posting), and if the previously executing page had a <xref:System.Web.UI.WebControls.WebParts.WebPartManager> instance, the scope is set to the value of the `Personalization.Scope` property from the previous <xref:System.Web.UI.WebControls.WebParts.WebPartManager> instance.</span></span>  
  
    -   <span data-ttu-id="d6a06-156">如果不满足以上条件，则作用域的计算结果为的值<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.InitialScope%2A>属性的当前<xref:System.Web.UI.WebControls.WebParts.WebPartManager>控件。</span><span class="sxs-lookup"><span data-stu-id="d6a06-156">If the previous criteria are not met, then the scope evaluates to the value of the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.InitialScope%2A> property for the current <xref:System.Web.UI.WebControls.WebParts.WebPartManager> control.</span></span>  
  
 <span data-ttu-id="d6a06-157">在进行的上一评估后，和作用域的计算结果为<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>作用域，请进行以下处理：</span><span class="sxs-lookup"><span data-stu-id="d6a06-157">After the previous evaluations have been made, and if the scope evaluates to <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope, the following processing occurs:</span></span>  
  
-   <span data-ttu-id="d6a06-158">如果当前正在执行的用户帐户具有<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.EnterSharedScopeUserCapability>功能，作用域将仍然设置为<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>。</span><span class="sxs-lookup"><span data-stu-id="d6a06-158">If the currently executing user account has the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.EnterSharedScopeUserCapability> capability, the scope remains set to <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>.</span></span>  
  
-   <span data-ttu-id="d6a06-159">如果当前正在执行的用户帐户不具有<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.EnterSharedScopeUserCapability>功能，则作用域将重置为<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>。</span><span class="sxs-lookup"><span data-stu-id="d6a06-159">If the currently executing user account does not have the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.EnterSharedScopeUserCapability> capability, then the scope is reset to <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>.</span></span>  
  
-   <span data-ttu-id="d6a06-160">如果所有以前的作用域计算结果为<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>，此结果存储为当前正在执行的页的隐藏字段。</span><span class="sxs-lookup"><span data-stu-id="d6a06-160">If the result of all previous scope evaluations is <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>, this result is stored as a hidden field on the currently executing page.</span></span> <span data-ttu-id="d6a06-161">这是一个页面，由此可以重播在后续回发期间的作用域计算的机制。</span><span class="sxs-lookup"><span data-stu-id="d6a06-161">This is the mechanism whereby a page can replay the scope evaluation during subsequent postbacks.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="d6a06-162">
            <paramref name="webPartManager" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-162">
              <paramref name="webPartManager" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentException">
          <span data-ttu-id="d6a06-163">与 <paramref name="webPartManager" /> 关联的页为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-163">The page associated with <paramref name="webPartManager" /> is <see langword="null" />.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="DetermineUserCapabilities">
      <MemberSignature Language="C#" Value="public virtual System.Collections.IDictionary DetermineUserCapabilities (System.Web.UI.WebControls.WebParts.WebPartManager webPartManager);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance class System.Collections.IDictionary DetermineUserCapabilities(class System.Web.UI.WebControls.WebParts.WebPartManager webPartManager) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.DetermineUserCapabilities(System.Web.UI.WebControls.WebParts.WebPartManager)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual System::Collections::IDictionary ^ DetermineUserCapabilities(System::Web::UI::WebControls::WebParts::WebPartManager ^ webPartManager);" />
      <MemberSignature Language="F#" Value="abstract member DetermineUserCapabilities : System.Web.UI.WebControls.WebParts.WebPartManager -&gt; System.Collections.IDictionary&#xA;override this.DetermineUserCapabilities : System.Web.UI.WebControls.WebParts.WebPartManager -&gt; System.Collections.IDictionary" Usage="personalizationProvider.DetermineUserCapabilities webPartManager" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Collections.IDictionary</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="webPartManager" Type="System.Web.UI.WebControls.WebParts.WebPartManager" />
      </Parameters>
      <Docs>
        <param name="webPartManager">
          <span data-ttu-id="d6a06-164">管理个性化设置信息的 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-164">The <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" /> managing the personalization information.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-165">返回一个包含 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartUserCapability" /> 实例的字典，这些实例表示当前正在执行的用户帐户的与个性化设置相关的功能。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-165">Returns a dictionary containing <see cref="T:System.Web.UI.WebControls.WebParts.WebPartUserCapability" /> instances that represent the personalization-related capabilities of the currently executing user account.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d6a06-166">
            <see cref="T:System.Collections.IDictionary" />，如果用户帐户已经过身份验证，则包含零个或零个以上 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartUserCapability" /> 实例，如果正在执行的用户帐户未经过身份验证，则为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-166">An <see cref="T:System.Collections.IDictionary" /> containing zero or more <see cref="T:System.Web.UI.WebControls.WebParts.WebPartUserCapability" /> instances if the user account is authenticated, or <see langword="null" /> if the executing user account is not authenticated.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-167">此方法的默认实现使用中的信息[（ASP.NET 设置架构） webParts 的 personalization 的 authorization 元素](http://msdn.microsoft.com/library/d190d4ff-1445-4ee1-88eb-9737c7aa1434)元素内的[个性化设置元素的web 部件 （ASP.NET 设置架构）](http://msdn.microsoft.com/library/3d77da55-73ce-46ce-97cf-7d2abcaada09)的元素[webParts 元素 （ASP.NET 设置架构）](http://msdn.microsoft.com/library/90af5acc-5a80-4b39-bba7-74afd06b167c)配置节在 Machine.config 或 Web.config 文件，以确定用户的授权功能。</span><span class="sxs-lookup"><span data-stu-id="d6a06-167">The default implementation of this method consumes the information in the [authorization Element for personalization for webParts (ASP.NET Settings Schema)](http://msdn.microsoft.com/library/d190d4ff-1445-4ee1-88eb-9737c7aa1434) element within the [personalization Element for webParts (ASP.NET Settings Schema)](http://msdn.microsoft.com/library/3d77da55-73ce-46ce-97cf-7d2abcaada09) element of the [webParts Element (ASP.NET Settings Schema)](http://msdn.microsoft.com/library/90af5acc-5a80-4b39-bba7-74afd06b167c) configuration section in the Machine.config or Web.config file to determine a user's authorized capabilities.</span></span>  
  
 <span data-ttu-id="d6a06-168">字典中的功能将成为成员<xref:System.Collections.IList>返回的对象<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.CreateSupportedUserCapabilities%2A>方法，它当前包括<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.EnterSharedScopeUserCapability>功能和<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.ModifyStateUserCapability>功能。</span><span class="sxs-lookup"><span data-stu-id="d6a06-168">The capabilities in the dictionary will be members of the <xref:System.Collections.IList> object returned by the <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.CreateSupportedUserCapabilities%2A> method, which currently include the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.EnterSharedScopeUserCapability> capability and the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.ModifyStateUserCapability> capability.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentException">
          <span data-ttu-id="d6a06-169">与 <paramref name="webPartManager" /> 关联的页为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-169">The page associated with <paramref name="webPartManager" /> is <see langword="null" />.</span>
          </span>
          <span data-ttu-id="d6a06-170">\- 或 -</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-170">\- or -</span>
          </span>
          <span data-ttu-id="d6a06-171">与页关联的请求为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-171">The request associated with the page is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="d6a06-172">
            <paramref name="webPartManager" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-172">
              <paramref name="webPartManager" /> is <see langword="null" />.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="FindState">
      <MemberSignature Language="C#" Value="public abstract System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection FindState (System.Web.UI.WebControls.WebParts.PersonalizationScope scope, System.Web.UI.WebControls.WebParts.PersonalizationStateQuery query, int pageIndex, int pageSize, out int totalRecords);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance class System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection FindState(valuetype System.Web.UI.WebControls.WebParts.PersonalizationScope scope, class System.Web.UI.WebControls.WebParts.PersonalizationStateQuery query, int32 pageIndex, int32 pageSize, [out] int32&amp; totalRecords) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.FindState(System.Web.UI.WebControls.WebParts.PersonalizationScope,System.Web.UI.WebControls.WebParts.PersonalizationStateQuery,System.Int32,System.Int32,System.Int32@)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Function FindState (scope As PersonalizationScope, query As PersonalizationStateQuery, pageIndex As Integer, pageSize As Integer, ByRef totalRecords As Integer) As PersonalizationStateInfoCollection" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract System::Web::UI::WebControls::WebParts::PersonalizationStateInfoCollection ^ FindState(System::Web::UI::WebControls::WebParts::PersonalizationScope scope, System::Web::UI::WebControls::WebParts::PersonalizationStateQuery ^ query, int pageIndex, int pageSize, [Runtime::InteropServices::Out] int % totalRecords);" />
      <MemberSignature Language="F#" Value="abstract member FindState : System.Web.UI.WebControls.WebParts.PersonalizationScope * System.Web.UI.WebControls.WebParts.PersonalizationStateQuery * int * int *  -&gt; System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection" Usage="personalizationProvider.FindState (scope, query, pageIndex, pageSize, totalRecords)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="scope" Type="System.Web.UI.WebControls.WebParts.PersonalizationScope" />
        <Parameter Name="query" Type="System.Web.UI.WebControls.WebParts.PersonalizationStateQuery" />
        <Parameter Name="pageIndex" Type="System.Int32" />
        <Parameter Name="pageSize" Type="System.Int32" />
        <Parameter Name="totalRecords" Type="System.Int32" RefType="out" />
      </Parameters>
      <Docs>
        <param name="scope">
          <span data-ttu-id="d6a06-173">具有要查询的个性化设置信息的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-173">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" /> with the personalization information to be queried.</span>
          </span>
          <span data-ttu-id="d6a06-174">此值不能为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-174">This value cannot be <see langword="null" />.</span>
          </span>
        </param>
        <param name="query">
          <span data-ttu-id="d6a06-175">包含查询的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-175">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery" /> containing a query.</span>
          </span>
          <span data-ttu-id="d6a06-176">此值可为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-176">This value can be <see langword="null" />.</span>
          </span>
        </param>
        <param name="pageIndex">
          <span data-ttu-id="d6a06-177">查询的起始位置。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-177">The location where the query starts.</span>
          </span>
        </param>
        <param name="pageSize">
          <span data-ttu-id="d6a06-178">要返回的记录数。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-178">The number of records to return.</span>
          </span>
        </param>
        <param name="totalRecords">
          <span data-ttu-id="d6a06-179">可用记录的总数。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-179">The total number of records available.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-180">在派生类中重写时，将根据范围和特定的查询参数返回一个集合，其中包含零个或零个以上 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo" /> 派生对象。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-180">When overridden in a derived class, returns a collection containing zero or more <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo" />-derived objects based on scope and specific query parameters.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d6a06-181">
            <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection" />，包含零个或零个以上 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo" /> 派生对象。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-181">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection" /> containing zero or more <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo" />-derived objects.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-182">此方法是用于查询的个性化设置数据的管理方法的抽象定义。</span><span class="sxs-lookup"><span data-stu-id="d6a06-182">This method is the abstract definition of an administrative method for querying personalization data.</span></span> <span data-ttu-id="d6a06-183">派生的实现应遵循下面所述的逻辑。</span><span class="sxs-lookup"><span data-stu-id="d6a06-183">Derived implementations should follow the logic described below.</span></span>  
  
 <span data-ttu-id="d6a06-184">受约束返回的项的一套`pageIndex`并`pageSize`参数，其中`pageSize`设置要返回的记录数和`pageIndex`设置要返回哪些记录。</span><span class="sxs-lookup"><span data-stu-id="d6a06-184">The set of returned items is constrained by the `pageIndex` and `pageSize` parameters, where `pageSize` sets the number of records to return and `pageIndex` sets which records to return.</span></span> <span data-ttu-id="d6a06-185">例如，`pageIndex`为 0 和一个`pageSize`25 个，则会返回前 25 个匹配项，而`pageIndex`为 1 和`pageSize`25 个，则会返回匹配项 26 50。</span><span class="sxs-lookup"><span data-stu-id="d6a06-185">For example, a `pageIndex` of 0 and a `pageSize` of 25 would return the first 25 occurrences, while a `pageIndex` of 1 and a `pageSize` of 25 would return occurrences 26-50.</span></span> <span data-ttu-id="d6a06-186">如果你想要检索所有可用的记录，设置`pageIndex`为 0 和`pageSize`到<xref:System.Int32.MaxValue>。</span><span class="sxs-lookup"><span data-stu-id="d6a06-186">If you want to retrieve all available records, set `pageIndex` to 0 and `pageSize` to <xref:System.Int32.MaxValue>.</span></span>  
  
 <span data-ttu-id="d6a06-187"><xref:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo>-按字母顺序返回并排序的组合来派生的对象及其<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo.Path%2A>和<xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.Username%2A>属性值，同时按升序排序。</span><span class="sxs-lookup"><span data-stu-id="d6a06-187">The <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo>-derived objects are returned in alphabetical order and sorted by a combination of their <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo.Path%2A> and <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.Username%2A> property values, both in ascending order.</span></span>  
  
 <span data-ttu-id="d6a06-188">此方法将查询通配符字符传递给基础数据存储区。</span><span class="sxs-lookup"><span data-stu-id="d6a06-188">This method passes query wildcard characters to the underlying data store.</span></span> <span data-ttu-id="d6a06-189">对通配符字符的支持是当前依赖于每个提供程序如何处理字符，如星号 （\*）、 百分号 （%） 或下划线 (_)。</span><span class="sxs-lookup"><span data-stu-id="d6a06-189">Support for wildcard characters is currently dependent on how each provider handles characters such as an asterisk (\*), a percent symbol (%), or an underscore (_).</span></span>  
  
 <span data-ttu-id="d6a06-190">通常情况下，对于符合 SQL 数据存储，你可以执行通配符搜索分部路径上加上使其不显示在开头、 末尾或搜索字符串文本中的中间的通配符<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-190">Normally, for SQL-compliant data stores, you can perform a wildcard search on a partial path with the wildcard character appearing at the beginning, the end, or the middle of the search string text in the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> property.</span></span> <span data-ttu-id="d6a06-191">例如，若要查找以"~/vdir"开头的所有路径<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>属性将设置为"~/vdir%"。</span><span class="sxs-lookup"><span data-stu-id="d6a06-191">For example, to find all paths that start with "~/vdir", the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> property would be set to "~/vdir%".</span></span>  
  
 <span data-ttu-id="d6a06-192">同样，对部分用户名执行通配符搜索可以允许显示的文本字符串中的任意位置的通配符字符<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-192">Likewise, a wildcard search on a partial user name could have the wildcard character appear at any point in the text string of the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> property.</span></span> <span data-ttu-id="d6a06-193">例如，若要查找与"John"开头的所有用户名称<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>参数将如下所示"John %"。</span><span class="sxs-lookup"><span data-stu-id="d6a06-193">For example, to find all user names that start with "John", the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> parameter would look like "John%".</span></span>  
  
 <span data-ttu-id="d6a06-194">下面的查询约束适用：</span><span class="sxs-lookup"><span data-stu-id="d6a06-194">The following query constraints apply:</span></span>  
  
-   <span data-ttu-id="d6a06-195">如果只有`scope`提供，并`query`是`null`或上的所有属性`query`返回`null`或默认值，然后将匹配所指示的所有记录`scope`返回参数。</span><span class="sxs-lookup"><span data-stu-id="d6a06-195">If only `scope` is provided, and `query` is `null` or all the properties on `query` return either `null` or default values, then all records matching the indicated `scope` parameter are returned.</span></span>  
  
-   <span data-ttu-id="d6a06-196">如果<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>属性不是`null`，返回的记录也是匹配的筛选根据的路径<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>值。</span><span class="sxs-lookup"><span data-stu-id="d6a06-196">If the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> property is not `null`, the returned records are also filtered based on paths that match the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> value.</span></span>  
  
-   <span data-ttu-id="d6a06-197">如果<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>属性不是`null`，返回的记录也是匹配的筛选基于的用户名称<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>属性值。</span><span class="sxs-lookup"><span data-stu-id="d6a06-197">If the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> property is not `null`, the returned records are also filtered based on user names that match the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> property value.</span></span>  
  
-   <span data-ttu-id="d6a06-198">如果<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A>属性不等于<xref:System.DateTime.MaxValue>，则返回的记录也将筛选以仅返回的记录与非活动用户关联。</span><span class="sxs-lookup"><span data-stu-id="d6a06-198">If the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> property is not equal to <xref:System.DateTime.MaxValue>, then the returned records are also filtered to return only those records associated with inactive users.</span></span> <span data-ttu-id="d6a06-199">比较内容包括记录其中<xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A>属性小于或等于<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-199">The comparison includes records where the <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> property is less than or equal to the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> property.</span></span>  
  
 <span data-ttu-id="d6a06-200">请注意，此方法不会验证查询参数的组合。</span><span class="sxs-lookup"><span data-stu-id="d6a06-200">Note that this method does not validate combinations of query parameters.</span></span> <span data-ttu-id="d6a06-201">例如，代码可以请求一的组与共享作用域中指定的用户名相关联的个性化设置状态记录。</span><span class="sxs-lookup"><span data-stu-id="d6a06-201">For example, code can request a set of personalization state records associated with a specific user name in the shared scope.</span></span> <span data-ttu-id="d6a06-202">由于用户名不是共享的信息关联，则返回的集合将为空。</span><span class="sxs-lookup"><span data-stu-id="d6a06-202">Because user names are not associated with shared information, the returned collection would be empty.</span></span>  
  
 <span data-ttu-id="d6a06-203">有可能会返回非空集合的参数组合包括：</span><span class="sxs-lookup"><span data-stu-id="d6a06-203">Parameter combinations that have the potential to return a non-empty collection include:</span></span>  
  
-   <span data-ttu-id="d6a06-204"><xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> 作用域结合<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-204"><xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope in combination with the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> property.</span></span>  
  
-   <span data-ttu-id="d6a06-205"><xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 结合使用的值的任何或所有作用域<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>， <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>，和<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-205"><xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> scope in combination with the values for any or all of the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>, <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>, and <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> properties.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="GetCountOfState">
      <MemberSignature Language="C#" Value="public abstract int GetCountOfState (System.Web.UI.WebControls.WebParts.PersonalizationScope scope, System.Web.UI.WebControls.WebParts.PersonalizationStateQuery query);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance int32 GetCountOfState(valuetype System.Web.UI.WebControls.WebParts.PersonalizationScope scope, class System.Web.UI.WebControls.WebParts.PersonalizationStateQuery query) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.GetCountOfState(System.Web.UI.WebControls.WebParts.PersonalizationScope,System.Web.UI.WebControls.WebParts.PersonalizationStateQuery)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Function GetCountOfState (scope As PersonalizationScope, query As PersonalizationStateQuery) As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract int GetCountOfState(System::Web::UI::WebControls::WebParts::PersonalizationScope scope, System::Web::UI::WebControls::WebParts::PersonalizationStateQuery ^ query);" />
      <MemberSignature Language="F#" Value="abstract member GetCountOfState : System.Web.UI.WebControls.WebParts.PersonalizationScope * System.Web.UI.WebControls.WebParts.PersonalizationStateQuery -&gt; int" Usage="personalizationProvider.GetCountOfState (scope, query)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="scope" Type="System.Web.UI.WebControls.WebParts.PersonalizationScope" />
        <Parameter Name="query" Type="System.Web.UI.WebControls.WebParts.PersonalizationStateQuery" />
      </Parameters>
      <Docs>
        <param name="scope">
          <span data-ttu-id="d6a06-206">要查询的个性化设置信息的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-206">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" /> of the personalization information to be queried.</span>
          </span>
          <span data-ttu-id="d6a06-207">此值不能为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-207">This value cannot be <see langword="null" />.</span>
          </span>
        </param>
        <param name="query">
          <span data-ttu-id="d6a06-208">包含查询的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-208">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery" /> containing a query.</span>
          </span>
          <span data-ttu-id="d6a06-209">此值可为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-209">This value can be <see langword="null" />.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-210">在派生类中重写时，返回基础数据存储区中存在于指定范围内的行数。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-210">When overridden in a derived class, returns the number of rows in the underlying data store that exist within the specified scope.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d6a06-211">针对指定 <paramref name="scope" /> 参数的基础数据存储区的行数。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-211">The number of rows in the underlying data store that exist for the specified <paramref name="scope" /> parameter.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-212">此方法是一种管理方法来检索个性化设置数据的计数的抽象定义。</span><span class="sxs-lookup"><span data-stu-id="d6a06-212">This method is the abstract definition of an administrative method for retrieving counts of personalization data.</span></span> <span data-ttu-id="d6a06-213">派生的实现应遵循下面所述的逻辑。</span><span class="sxs-lookup"><span data-stu-id="d6a06-213">Derived implementations should follow the logic described below.</span></span>  
  
 <span data-ttu-id="d6a06-214">此方法将查询通配符字符传递给基础数据存储区。</span><span class="sxs-lookup"><span data-stu-id="d6a06-214">This method passes query wildcard characters to the underlying data store.</span></span> <span data-ttu-id="d6a06-215">对通配符字符的支持是当前依赖于每个提供程序如何处理字符，如星号 （\*）、 百分号 （%） 或下划线 (_)。</span><span class="sxs-lookup"><span data-stu-id="d6a06-215">Support for wildcard characters is currently dependent on how each provider handles characters such as an asterisk (\*), a percent symbol (%), or an underscore (_).</span></span>  
  
 <span data-ttu-id="d6a06-216">通常情况下，对于符合 SQL 数据存储，你可以执行通配符搜索分部路径上加上使其不显示在开头、 末尾或搜索字符串文本中的中间的通配符<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-216">Normally, for SQL-compliant data stores, you can perform a wildcard search on a partial path with the wildcard character appearing at the beginning, the end, or the middle of the search string text in the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> property.</span></span> <span data-ttu-id="d6a06-217">例如，若要查找以"~/vdir"开头的所有路径<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>属性将设置为"~/vdir%"。</span><span class="sxs-lookup"><span data-stu-id="d6a06-217">For example, to find all paths that start with "~/vdir", the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> property would be set to "~/vdir%".</span></span>  
  
 <span data-ttu-id="d6a06-218">同样，对部分用户名执行通配符搜索可以允许显示的文本字符串中的任意位置的通配符字符<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-218">Likewise, a wildcard search on a partial user name could have the wildcard character appear at any point in the text string of the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> property.</span></span> <span data-ttu-id="d6a06-219">例如，若要查找与"John"开头的所有用户名称<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>参数将如下所示"John %"。</span><span class="sxs-lookup"><span data-stu-id="d6a06-219">For example, to find all user names that start with "John", the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> parameter would look like "John%".</span></span>  
  
 <span data-ttu-id="d6a06-220">下面的查询约束适用：</span><span class="sxs-lookup"><span data-stu-id="d6a06-220">The following query constraints apply:</span></span>  
  
-   <span data-ttu-id="d6a06-221">如果只有`scope`提供，并`query`是`null`或上的所有属性`query`返回`null`或默认值，然后将匹配所指示的所有记录`scope`参数进行计数。</span><span class="sxs-lookup"><span data-stu-id="d6a06-221">If only `scope` is provided, and `query` is `null` or all the properties on `query` return either `null` or default values, then all records matching the indicated `scope` parameter are counted.</span></span>  
  
-   <span data-ttu-id="d6a06-222">如果<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>属性不是`null`，计数的记录也是匹配的筛选根据的路径<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>值。</span><span class="sxs-lookup"><span data-stu-id="d6a06-222">If the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> property is not `null`, the counted records are also filtered based on paths that match the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> value.</span></span>  
  
-   <span data-ttu-id="d6a06-223">如果<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>属性不是`null`，计数的记录也是匹配的筛选基于的用户名称<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>属性值。</span><span class="sxs-lookup"><span data-stu-id="d6a06-223">If the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> property is not `null`, the counted records are also filtered based on user names that match the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> property value.</span></span>  
  
-   <span data-ttu-id="d6a06-224">如果<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A>属性不等于<xref:System.DateTime.MaxValue>，则计数的记录也将筛选以仅返回的记录与非活动用户关联。</span><span class="sxs-lookup"><span data-stu-id="d6a06-224">If the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> property is not equal to <xref:System.DateTime.MaxValue>, then the counted records are also filtered to return only those records associated with inactive users.</span></span> <span data-ttu-id="d6a06-225">比较内容包括记录其中<xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A>属性小于或等于<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-225">The comparison includes records where the <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> property is less than or equal to the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> property.</span></span>  
  
 <span data-ttu-id="d6a06-226">请注意，此方法不会验证查询参数的组合。</span><span class="sxs-lookup"><span data-stu-id="d6a06-226">Note that this method does not validate combinations of query parameters.</span></span> <span data-ttu-id="d6a06-227">例如，代码可以请求与共享作用域中指定的用户名相关联的个性化设置状态记录的计数。</span><span class="sxs-lookup"><span data-stu-id="d6a06-227">For example, code can request a count of personalization state records associated with a specific user name in the shared scope.</span></span> <span data-ttu-id="d6a06-228">由于用户名不是共享的信息关联，则返回的计数将为零。</span><span class="sxs-lookup"><span data-stu-id="d6a06-228">Because user names are not associated with shared information, the returned count would be zero.</span></span>  
  
 <span data-ttu-id="d6a06-229">有可能会返回非零值计数的参数组合包括：</span><span class="sxs-lookup"><span data-stu-id="d6a06-229">Parameter combinations that have the potential to return a non-zero count include:</span></span>  
  
-   <span data-ttu-id="d6a06-230"><xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> 作用域结合<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-230"><xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope in combination with the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> property.</span></span>  
  
-   <span data-ttu-id="d6a06-231"><xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 结合使用的值的任何或所有作用域<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>， <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>，和<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="d6a06-231"><xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> scope in combination with the values for any or all of the <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A>, <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A>, and <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> properties.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="LoadPersonalizationBlobs">
      <MemberSignature Language="C#" Value="protected abstract void LoadPersonalizationBlobs (System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName, ref byte[] sharedDataBlob, ref byte[] userDataBlob);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig newslot virtual instance void LoadPersonalizationBlobs(class System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName, unsigned int8[]&amp; sharedDataBlob, unsigned int8[]&amp; userDataBlob) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationBlobs(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[]@,System.Byte[]@)" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; abstract void LoadPersonalizationBlobs(System::Web::UI::WebControls::WebParts::WebPartManager ^ webPartManager, System::String ^ path, System::String ^ userName, cli::array &lt;System::Byte&gt; ^ % sharedDataBlob, cli::array &lt;System::Byte&gt; ^ % userDataBlob);" />
      <MemberSignature Language="F#" Value="abstract member LoadPersonalizationBlobs : System.Web.UI.WebControls.WebParts.WebPartManager * string * string *  *  -&gt; unit" Usage="personalizationProvider.LoadPersonalizationBlobs (webPartManager, path, userName, sharedDataBlob, userDataBlob)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="webPartManager" Type="System.Web.UI.WebControls.WebParts.WebPartManager" />
        <Parameter Name="path" Type="System.String" />
        <Parameter Name="userName" Type="System.String" />
        <Parameter Name="sharedDataBlob" Type="System.Byte[]" RefType="ref" />
        <Parameter Name="userDataBlob" Type="System.Byte[]" RefType="ref" />
      </Parameters>
      <Docs>
        <param name="webPartManager">
          <span data-ttu-id="d6a06-232">管理个性化设置数据的 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-232">The <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" /> managing the personalization data.</span>
          </span>
        </param>
        <param name="path">
          <span data-ttu-id="d6a06-233">要用作检索关键字的个性化设置信息的路径。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-233">The path for personalization information to be used as the retrieval key.</span>
          </span>
        </param>
        <param name="userName">
          <span data-ttu-id="d6a06-234">要用作检索关键字的个性化设置信息的用户名。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-234">The user name for personalization information to be used as the retrieval key.</span>
          </span>
        </param>
        <param name="sharedDataBlob">
          <span data-ttu-id="d6a06-235">为 <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" /> 范围返回的数据。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-235">The returned data for the <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" /> scope.</span>
          </span>
        </param>
        <param name="userDataBlob">
          <span data-ttu-id="d6a06-236">为 <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> 范围返回的数据。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-236">The returned data for the <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> scope.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-237">在派生类中重写时，从基础数据存储区加载原始个性化设置数据。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-237">When overridden in a derived class, loads raw personalization data from the underlying data store.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-238">派生的类<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider>，并应使用此方法的实现`webPartManager`， `path`，和`username`用作检索关键字的参数。</span><span class="sxs-lookup"><span data-stu-id="d6a06-238">Classes that derive from <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider> and implement this method should use the `webPartManager`, `path`, and `username` parameters as retrieval keys.</span></span> <span data-ttu-id="d6a06-239">而不考虑数据的方式存储在数据存储中 （某些数据存储可能会执行某种类型的智能存储），必须返回数据的个性化设置为一组已打包的两个数组中的字节数。</span><span class="sxs-lookup"><span data-stu-id="d6a06-239">Regardless of how the data is stored in the data store (some data stores might perform some type of intelligent storage), the personalization data must be returned as a packed set of bytes in two arrays.</span></span> <span data-ttu-id="d6a06-240">返回的数据必须符合以下规则：</span><span class="sxs-lookup"><span data-stu-id="d6a06-240">The returned data must conform to the following rules:</span></span>  
  
-   <span data-ttu-id="d6a06-241">数据<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>作用域必须始终以返回`sharedDataBlob`参数。</span><span class="sxs-lookup"><span data-stu-id="d6a06-241">The data for the <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope must always be returned in the `sharedDataBlob` parameter.</span></span>  
  
-   <span data-ttu-id="d6a06-242">根据键的值，<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>中返回数据`userDataBlob`参数。</span><span class="sxs-lookup"><span data-stu-id="d6a06-242">Depending on the key values, <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> data is returned in the `userDataBlob` parameter.</span></span> <span data-ttu-id="d6a06-243">非`null`值`userName`参数指示<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>还应检索数据。</span><span class="sxs-lookup"><span data-stu-id="d6a06-243">A non-`null` value for the `userName` parameter indicates that <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> data should also be retrieved.</span></span>  
  
 <span data-ttu-id="d6a06-244">个性化设置提供程序派生<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider>并实现此方法可以优化与自己的数据存储之间的交互通过检索一个往返行程中的所有个性化设置数据而不是检索<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>和<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>中两个数据单独的往返操作。</span><span class="sxs-lookup"><span data-stu-id="d6a06-244">A personalization provider that derives from <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider> and implements this method can optimize interactions with its data store by retrieving all personalization data in one round trip, as opposed to retrieving <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> and <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> data in two separate round trips.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="LoadPersonalizationState">
      <MemberSignature Language="C#" Value="public virtual System.Web.UI.WebControls.WebParts.PersonalizationState LoadPersonalizationState (System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, bool ignoreCurrentUser);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance class System.Web.UI.WebControls.WebParts.PersonalizationState LoadPersonalizationState(class System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, bool ignoreCurrentUser) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationState(System.Web.UI.WebControls.WebParts.WebPartManager,System.Boolean)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual System::Web::UI::WebControls::WebParts::PersonalizationState ^ LoadPersonalizationState(System::Web::UI::WebControls::WebParts::WebPartManager ^ webPartManager, bool ignoreCurrentUser);" />
      <MemberSignature Language="F#" Value="abstract member LoadPersonalizationState : System.Web.UI.WebControls.WebParts.WebPartManager * bool -&gt; System.Web.UI.WebControls.WebParts.PersonalizationState&#xA;override this.LoadPersonalizationState : System.Web.UI.WebControls.WebParts.WebPartManager * bool -&gt; System.Web.UI.WebControls.WebParts.PersonalizationState" Usage="personalizationProvider.LoadPersonalizationState (webPartManager, ignoreCurrentUser)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.WebParts.PersonalizationState</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="webPartManager" Type="System.Web.UI.WebControls.WebParts.WebPartManager" />
        <Parameter Name="ignoreCurrentUser" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="webPartManager">
          <span data-ttu-id="d6a06-245">管理个性化设置数据的 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-245">The <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" /> managing the personalization data.</span>
          </span>
        </param>
        <param name="ignoreCurrentUser">
          <span data-ttu-id="d6a06-246">
            <see cref="T:System.Boolean" />，指示是否应将用户名传递给个性化设置提供程序。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-246">A <see cref="T:System.Boolean" /> indicating whether the user name should be passed to the personalization provider.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-247">从基础数据存储区加载原始数据，并将该数据转换为 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationState" /> 对象。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-247">Loads the raw data from the underlying data store and converts that data into a <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationState" /> object.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d6a06-248">
            <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationState" />，包含个性化设置数据。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-248">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationState" /> containing personalization data.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-249">此方法是使用的主入口点<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization>类加载个性化设置数据。</span><span class="sxs-lookup"><span data-stu-id="d6a06-249">This method is the main entry point used by the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization> class to load personalization data.</span></span> <span data-ttu-id="d6a06-250">默认实现从基础数据存储区加载原始数据 （派生的提供程序中实施功能），然后将转换到的原始数据<xref:System.Web.UI.WebControls.WebParts.PersonalizationState>实例。</span><span class="sxs-lookup"><span data-stu-id="d6a06-250">The default implementation loads the raw data from the underlying data store (functionality is implemented in derived providers) and then converts the raw data into a <xref:System.Web.UI.WebControls.WebParts.PersonalizationState> instance.</span></span>  
  
 <span data-ttu-id="d6a06-251">如果`ignoreCurrentUser`参数是`true`，没有用户名称传递给<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationBlobs%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="d6a06-251">If the `ignoreCurrentUser` parameter is `true`, no user name is passed to the <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationBlobs%2A> method.</span></span> <span data-ttu-id="d6a06-252">个性化设置提供程序可以选择将此视为这意味着使用该唯一个性化设置状态<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>作用域应检索从基础数据存储区。</span><span class="sxs-lookup"><span data-stu-id="d6a06-252">A personalization provider can choose to interpret this as meaning that only personalization state with a <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope should be retrieved from the underlying data store.</span></span>  
  
 <span data-ttu-id="d6a06-253">当<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.Load%2A>方法执行时，它调用<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationState%2A>方法，并且有三种类型的状态为正在加载，因此可能出现的反序列化错误。</span><span class="sxs-lookup"><span data-stu-id="d6a06-253">When the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.Load%2A> method is executing, it calls the <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationState%2A> method, and there are three types of deserialization errors that can occur as the state is being loaded.</span></span> <span data-ttu-id="d6a06-254">这些特定错误发生时，不引发任何异常，通过的运行状况监视功能而是记录错误事件 (运行状况监视和访问由它创建的日志的信息，请参阅[ASP.NET 运行状况监视概述](http://msdn.microsoft.com/library/e003f224-70fe-4cd8-a71a-2dc81e2d7e4c)).</span><span class="sxs-lookup"><span data-stu-id="d6a06-254">When these specific errors occur, no exception is thrown, and the error events are logged instead by the Health Monitoring feature (for information on health monitoring and accessing the logs created by it, see [ASP.NET Health Monitoring Overview](http://msdn.microsoft.com/library/e003f224-70fe-4cd8-a71a-2dc81e2d7e4c)).</span></span> <span data-ttu-id="d6a06-255">以下三种方案导致反序列化要写入到日志的错误事件：</span><span class="sxs-lookup"><span data-stu-id="d6a06-255">The following three scenarios cause deserialization error events to be written to the log:</span></span>  
  
-   <span data-ttu-id="d6a06-256">反序列化使用中的字符串属性类型的尝试失败的<xref:System.ComponentModel.TypeConverter>。</span><span class="sxs-lookup"><span data-stu-id="d6a06-256">A failed attempt to deserialize a property type that uses a string <xref:System.ComponentModel.TypeConverter>.</span></span>  
  
-   <span data-ttu-id="d6a06-257">在尝试失败反序列化使用二进制序列化的属性类型。</span><span class="sxs-lookup"><span data-stu-id="d6a06-257">A failed attempt to deserialize a property type that uses binary serialization.</span></span>  
  
-   <span data-ttu-id="d6a06-258">键入要反序列化属性的尝试失败，因为无法创建类型的实例。</span><span class="sxs-lookup"><span data-stu-id="d6a06-258">A failed attempt to deserialize a property type because an instance of the type cannot be created.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="d6a06-259">
            <paramref name="webPartManager" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-259">The <paramref name="webPartManager" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentException">
          <span data-ttu-id="d6a06-260">与 <paramref name="webPartManager" /> 关联的页为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-260">The page associated with <paramref name="webPartManager" /> is <see langword="null" />.</span>
          </span>
          <span data-ttu-id="d6a06-261">\- 或 -</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-261">\- or -</span>
          </span>
          <span data-ttu-id="d6a06-262">与页关联的请求为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-262">The request associated with the page is <see langword="null" />.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="ResetPersonalizationBlob">
      <MemberSignature Language="C#" Value="protected abstract void ResetPersonalizationBlob (System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig newslot virtual instance void ResetPersonalizationBlob(class System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetPersonalizationBlob(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String)" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; abstract void ResetPersonalizationBlob(System::Web::UI::WebControls::WebParts::WebPartManager ^ webPartManager, System::String ^ path, System::String ^ userName);" />
      <MemberSignature Language="F#" Value="abstract member ResetPersonalizationBlob : System.Web.UI.WebControls.WebParts.WebPartManager * string * string -&gt; unit" Usage="personalizationProvider.ResetPersonalizationBlob (webPartManager, path, userName)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="webPartManager" Type="System.Web.UI.WebControls.WebParts.WebPartManager" />
        <Parameter Name="path" Type="System.String" />
        <Parameter Name="userName" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="webPartManager">
          <span data-ttu-id="d6a06-263">管理个性化设置数据的 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-263">The <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" /> managing the personalization data.</span>
          </span>
        </param>
        <param name="path">
          <span data-ttu-id="d6a06-264">要用作数据存储区关键字的个性化设置信息的路径。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-264">The path for personalization information to be used as the data store key.</span>
          </span>
        </param>
        <param name="userName">
          <span data-ttu-id="d6a06-265">要用作数据存储区关键字的个性化设置信息的用户名。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-265">The user name for personalization information to be used as the data store key.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-266">在派生类中重写时，从基础数据存储区删除原始个性化设置数据。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-266">When overridden in a derived class, deletes raw personalization data from the underlying data store.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-267">派生的类<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider>，并应使用此方法的实现`webPartManager`， `path`，和`userName`参数作为存储密钥。</span><span class="sxs-lookup"><span data-stu-id="d6a06-267">Classes that derive from <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider> and implement this method should use the `webPartManager`, `path`, and `userName` parameters as storage keys.</span></span> <span data-ttu-id="d6a06-268">派生的实现必须修改数据存储区，以便有效地删除提供的存储区关键字的个性化设置数据。</span><span class="sxs-lookup"><span data-stu-id="d6a06-268">Derived implementations must modify the data store so that personalization data for supplied storage keys is effectively deleted.</span></span> <span data-ttu-id="d6a06-269">负责派生的实现中关于如何它们以物理方式实现此目的。</span><span class="sxs-lookup"><span data-stu-id="d6a06-269">It is up to the derived implementations as to how they physically accomplish this.</span></span>  
  
 <span data-ttu-id="d6a06-270">派生的个性化设置提供程序必须能够区分基于每个页面的个性化设置数据。</span><span class="sxs-lookup"><span data-stu-id="d6a06-270">The derived personalization provider must be able to distinguish personalization data on a per-page basis.</span></span> <span data-ttu-id="d6a06-271">此外，对于给定的页状态个性化设置提供程序必须能够区分<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>和<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>数据范围。</span><span class="sxs-lookup"><span data-stu-id="d6a06-271">Furthermore, for a given page's state, the personalization provider must be able to distinguish between <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> and <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> scope data.</span></span> <span data-ttu-id="d6a06-272">如果将非`null`提供的用户名称，然后重置操作适用于<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>作用域; 否则，重置操作应用于<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>作用域。</span><span class="sxs-lookup"><span data-stu-id="d6a06-272">If a non-`null` user name is provided, then the reset operation applies to the <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> scope; otherwise, the reset operation applies to the <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="ResetPersonalizationState">
      <MemberSignature Language="C#" Value="public virtual void ResetPersonalizationState (System.Web.UI.WebControls.WebParts.WebPartManager webPartManager);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void ResetPersonalizationState(class System.Web.UI.WebControls.WebParts.WebPartManager webPartManager) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetPersonalizationState(System.Web.UI.WebControls.WebParts.WebPartManager)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual void ResetPersonalizationState(System::Web::UI::WebControls::WebParts::WebPartManager ^ webPartManager);" />
      <MemberSignature Language="F#" Value="abstract member ResetPersonalizationState : System.Web.UI.WebControls.WebParts.WebPartManager -&gt; unit&#xA;override this.ResetPersonalizationState : System.Web.UI.WebControls.WebParts.WebPartManager -&gt; unit" Usage="personalizationProvider.ResetPersonalizationState webPartManager" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="webPartManager" Type="System.Web.UI.WebControls.WebParts.WebPartManager" />
      </Parameters>
      <Docs>
        <param name="webPartManager">
          <span data-ttu-id="d6a06-273">管理个性化设置数据的 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-273">The <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" /> managing the personalization data.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-274">将个性化设置数据重置到基础数据存储区。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-274">Resets personalization data to the underlying data store.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-275">此方法是使用的主入口点<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization>类，以重置的个性化设置数据。</span><span class="sxs-lookup"><span data-stu-id="d6a06-275">This method is the main entry point used by the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization> class to reset personalization data.</span></span> <span data-ttu-id="d6a06-276">默认实现使用<xref:System.Web.UI.WebControls.WebParts.WebPartManager>控件来确定要重置的数据的路径和用户名称。</span><span class="sxs-lookup"><span data-stu-id="d6a06-276">The default implementation uses the <xref:System.Web.UI.WebControls.WebParts.WebPartManager> control to determine the path and user name for the data to be reset.</span></span> <span data-ttu-id="d6a06-277">然后，默认实现调用<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetPersonalizationBlob%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="d6a06-277">The default implementation then calls the <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetPersonalizationBlob%2A> method.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="d6a06-278">
            <paramref name="webPartManager" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-278">
              <paramref name="webPartManager" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentException">
          <span data-ttu-id="d6a06-279">
            <paramref name="webPartManager" /> 不与页相关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-279">
              <paramref name="webPartManager" /> is not associated with a page.</span>
          </span>
          <span data-ttu-id="d6a06-280">\- 或 -</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-280">\- or -</span>
          </span>
          <span data-ttu-id="d6a06-281">页不与正在进行的 <see cref="T:System.Web.HttpRequest" /> 关联。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-281">The page is not associated with an in-progress <see cref="T:System.Web.HttpRequest" />.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="ResetState">
      <MemberSignature Language="C#" Value="public abstract int ResetState (System.Web.UI.WebControls.WebParts.PersonalizationScope scope, string[] paths, string[] usernames);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance int32 ResetState(valuetype System.Web.UI.WebControls.WebParts.PersonalizationScope scope, string[] paths, string[] usernames) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetState(System.Web.UI.WebControls.WebParts.PersonalizationScope,System.String[],System.String[])" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Function ResetState (scope As PersonalizationScope, paths As String(), usernames As String()) As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract int ResetState(System::Web::UI::WebControls::WebParts::PersonalizationScope scope, cli::array &lt;System::String ^&gt; ^ paths, cli::array &lt;System::String ^&gt; ^ usernames);" />
      <MemberSignature Language="F#" Value="abstract member ResetState : System.Web.UI.WebControls.WebParts.PersonalizationScope * string[] * string[] -&gt; int" Usage="personalizationProvider.ResetState (scope, paths, usernames)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="scope" Type="System.Web.UI.WebControls.WebParts.PersonalizationScope" />
        <Parameter Name="paths" Type="System.String[]" />
        <Parameter Name="usernames" Type="System.String[]" />
      </Parameters>
      <Docs>
        <param name="scope">
          <span data-ttu-id="d6a06-282">要重置的个性化设置信息的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-282">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" /> of the personalization information to be reset.</span>
          </span>
          <span data-ttu-id="d6a06-283">此值不能为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-283">This value cannot be <see langword="null" />.</span>
          </span>
        </param>
        <param name="paths">
          <span data-ttu-id="d6a06-284">要删除的个性化设置信息的路径。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-284">The paths for personalization information to be deleted.</span>
          </span>
        </param>
        <param name="usernames">
          <span data-ttu-id="d6a06-285">要删除的个性化设置信息的用户名。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-285">The user names for personalization information to be deleted.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-286">在派生类中重写时，根据指定的参数从基础数据存储区删除个性化设置状态。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-286">When overridden in a derived class, deletes personalization state from the underlying data store based on the specified parameters.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d6a06-287">删除的行数。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-287">The number of rows deleted.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-288">此方法是用于删除个性化设置数据的管理方法的抽象定义。</span><span class="sxs-lookup"><span data-stu-id="d6a06-288">This method is the abstract definition of an administrative method for deleting personalization data.</span></span> <span data-ttu-id="d6a06-289">派生的实现应遵循下面所述的逻辑。</span><span class="sxs-lookup"><span data-stu-id="d6a06-289">Derived implementations should follow the logic described below.</span></span>  
  
 <span data-ttu-id="d6a06-290">此方法不支持任何通配符搜索。</span><span class="sxs-lookup"><span data-stu-id="d6a06-290">No wildcard character searches are supported by this method.</span></span> <span data-ttu-id="d6a06-291">如果个性化设置提供程序公开一个识别事务的数据存储区中的数据，则此方法应作为单个原子事务执行其操作。</span><span class="sxs-lookup"><span data-stu-id="d6a06-291">If the personalization provider exposes data from a transaction-aware data store, this method should perform its operations as a single atomic transaction.</span></span>  
  
 <span data-ttu-id="d6a06-292">允许仅以下参数的组合：</span><span class="sxs-lookup"><span data-stu-id="d6a06-292">Only the following combinations of parameters are allowed:</span></span>  
  
-   <span data-ttu-id="d6a06-293">`scope`参数设置，并且所有其他参数设置为`null`。</span><span class="sxs-lookup"><span data-stu-id="d6a06-293">The `scope` parameter is set, and all other parameters are set to `null`.</span></span> <span data-ttu-id="d6a06-294">此组合中删除与所指示的个性化设置范围关联的所有 Web 部件个性化设置数据`scope`。</span><span class="sxs-lookup"><span data-stu-id="d6a06-294">This combination deletes all Web Parts personalization data associated with the personalization scope indicated by `scope`.</span></span>  
  
-   <span data-ttu-id="d6a06-295">`scope`参数设置，和`paths`参数包含至少一个值。</span><span class="sxs-lookup"><span data-stu-id="d6a06-295">The `scope` parameter is set, and the `paths` parameter contains at least one value.</span></span> <span data-ttu-id="d6a06-296">此组合中删除指定的路径或路径所指示的个性化设置范围中所有 Web 部件个性化设置数据`scope`。</span><span class="sxs-lookup"><span data-stu-id="d6a06-296">This combination deletes all Web Parts personalization data for the specified path or paths in the personalization scope indicated by `scope`.</span></span>  
  
-   <span data-ttu-id="d6a06-297">`scope`参数设置为<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>，则`paths`参数已设置且只包含一个数值和`usernames`参数包含至少一个值。</span><span class="sxs-lookup"><span data-stu-id="d6a06-297">The `scope` parameter is set to <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>, the `paths` parameter is set and contains only one value, and the `usernames` parameter contains at least one value.</span></span> <span data-ttu-id="d6a06-298">此组合中删除所有用户个性化设置给定的路径或多个用户中包含与该键关联的 Web 部件数据`usernames`。</span><span class="sxs-lookup"><span data-stu-id="d6a06-298">This combination deletes all user personalization Web Parts data for the given path that is associated with the user or users contained in `usernames`.</span></span>  
  
-   <span data-ttu-id="d6a06-299">`scope`参数设置为<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>，则`paths`参数设置为`null`，和`usernames`参数包含至少一个值。</span><span class="sxs-lookup"><span data-stu-id="d6a06-299">The `scope` parameter is set to <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>, the `paths` parameter is set to `null`, and the `usernames` parameter contains at least one value.</span></span> <span data-ttu-id="d6a06-300">此组合中包含的用户与关联的所有路径在删除所有每用户个性化设置 Web 部件数据`usernames`。</span><span class="sxs-lookup"><span data-stu-id="d6a06-300">This combination deletes all per-user personalization Web Parts data, across all paths, associated with the user or users contained in `usernames`.</span></span>  
  
 <span data-ttu-id="d6a06-301">任何其他参数值的组合无效，将引发<xref:System.ArgumentException>异常。</span><span class="sxs-lookup"><span data-stu-id="d6a06-301">Any other combination of parameter values is invalid and will throw an <xref:System.ArgumentException> exception.</span></span> <span data-ttu-id="d6a06-302">具体而言，不允许使用以下两个组合：</span><span class="sxs-lookup"><span data-stu-id="d6a06-302">Specifically, the following two combinations are not allowed:</span></span>  
  
-   <span data-ttu-id="d6a06-303">`usernames`参数不能提供何时`scope`设置为<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>。</span><span class="sxs-lookup"><span data-stu-id="d6a06-303">The `usernames` parameter cannot be provided when `scope` is set to <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>.</span></span>  
  
-   <span data-ttu-id="d6a06-304">`paths`参数不能包含多个条目时`usernames`参数不是`null`。</span><span class="sxs-lookup"><span data-stu-id="d6a06-304">The `paths` parameter cannot contain more than one entry when the `usernames` parameter is not `null`.</span></span>  
  
 <span data-ttu-id="d6a06-305">任何`paths`和`usernames`包含在各自数组中的参数值必须满足以下验证规则。</span><span class="sxs-lookup"><span data-stu-id="d6a06-305">Any `paths` and `usernames` parameter values contained within the respective arrays must meet the following validation rules.</span></span> <span data-ttu-id="d6a06-306">如果任何验证规则失败以及参数数组的任何成员<xref:System.ArgumentException>引发异常。</span><span class="sxs-lookup"><span data-stu-id="d6a06-306">If any validation rules fail for any member of the parameter arrays, an <xref:System.ArgumentException> exception is thrown.</span></span> <span data-ttu-id="d6a06-307">验证规则是：</span><span class="sxs-lookup"><span data-stu-id="d6a06-307">The validation rules are:</span></span>  
  
-   <span data-ttu-id="d6a06-308">`null` 不允许值。</span><span class="sxs-lookup"><span data-stu-id="d6a06-308">`null` values are not allowed.</span></span>  
  
-   <span data-ttu-id="d6a06-309">空字符串 ("") 不允许。</span><span class="sxs-lookup"><span data-stu-id="d6a06-309">An empty string ("") is not allowed.</span></span> <span data-ttu-id="d6a06-310">参数应在执行为空字符串检查之前进行修整。</span><span class="sxs-lookup"><span data-stu-id="d6a06-310">Parameters should be trimmed prior to performing an empty string check.</span></span>  
  
-   <span data-ttu-id="d6a06-311">`usernames`参数不能包含逗号 （，）。</span><span class="sxs-lookup"><span data-stu-id="d6a06-311">The `usernames` parameter cannot contain commas (,).</span></span>  
  
-   <span data-ttu-id="d6a06-312">长度`paths`参数不能超过 256 个字符的 SQL 数据库。</span><span class="sxs-lookup"><span data-stu-id="d6a06-312">The length of the `paths` parameter cannot be greater than 256 characters for a SQL database.</span></span>  
  
-   <span data-ttu-id="d6a06-313">长度`usernames`参数不能超过 256 个字符的 SQL 数据库。</span><span class="sxs-lookup"><span data-stu-id="d6a06-313">The length of the `usernames` parameter cannot be greater than 256 characters for a SQL database.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="ResetUserState">
      <MemberSignature Language="C#" Value="public abstract int ResetUserState (string path, DateTime userInactiveSinceDate);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance int32 ResetUserState(string path, valuetype System.DateTime userInactiveSinceDate) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetUserState(System.String,System.DateTime)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Function ResetUserState (path As String, userInactiveSinceDate As DateTime) As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract int ResetUserState(System::String ^ path, DateTime userInactiveSinceDate);" />
      <MemberSignature Language="F#" Value="abstract member ResetUserState : string * DateTime -&gt; int" Usage="personalizationProvider.ResetUserState (path, userInactiveSinceDate)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="path" Type="System.String" />
        <Parameter Name="userInactiveSinceDate" Type="System.DateTime" />
      </Parameters>
      <Docs>
        <param name="path">
          <span data-ttu-id="d6a06-314">要删除的个性化设置数据的路径。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-314">The path of the personalization data to be deleted.</span>
          </span>
          <span data-ttu-id="d6a06-315">此值可以为 <see langword="null" />，但不能为空字符串 ("")。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-315">This value can be <see langword="null" /> but cannot be an empty string ("").</span>
          </span>
        </param>
        <param name="userInactiveSinceDate">
          <span data-ttu-id="d6a06-316">日期，指示网站用户上次更改个性化设置数据的时间。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-316">The date indicating the last time a Web site user changed personalization data.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-317">在派生类中重写时，根据指定的参数从基础数据存储区删除 Web 部件个性化设置数据。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-317">When overridden in a derived class, deletes Web Parts personalization data from the underlying data store based on the specified parameters.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d6a06-318">从基础数据存储区中删除的行数。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-318">The number of rows deleted from the underlying data store.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-319">此方法是用于删除个性化设置数据的管理方法的抽象定义。</span><span class="sxs-lookup"><span data-stu-id="d6a06-319">This method is the abstract definition of an administrative method for deleting personalization data.</span></span> <span data-ttu-id="d6a06-320">请注意，此方法只影响用户个性化设置数据和非共享的数据。</span><span class="sxs-lookup"><span data-stu-id="d6a06-320">Note that this method affects only user personalization data, and not shared data.</span></span>  
  
 <span data-ttu-id="d6a06-321">派生的实现应遵循下面所述的逻辑：</span><span class="sxs-lookup"><span data-stu-id="d6a06-321">Derived implementations should follow the logic described below:</span></span>  
  
-   <span data-ttu-id="d6a06-322">`path`参数不能包含通配符字符。</span><span class="sxs-lookup"><span data-stu-id="d6a06-322">The `path` parameter cannot contain wildcard characters.</span></span>  
  
-   <span data-ttu-id="d6a06-323">如果提供程序公开一个识别事务的数据存储区中的数据，则此方法应在单个原子事务中执行其操作。</span><span class="sxs-lookup"><span data-stu-id="d6a06-323">If the provider exposes data from a transaction-aware data store, this method should perform its operations in a single atomic transaction.</span></span>  
  
-   <span data-ttu-id="d6a06-324">如果`path`参数为非`null`，然后仅每用户个性化设置记录与关联`path`将被删除。</span><span class="sxs-lookup"><span data-stu-id="d6a06-324">If the `path` parameter is non-`null`, then only per-user personalization records associated with `path` will be deleted.</span></span>  
  
-   <span data-ttu-id="d6a06-325">与中指示的日期之后被视为处于非活动状态的用户相关联的仅每用户个性化设置记录`userInactiveSinceDate`参数将被删除。</span><span class="sxs-lookup"><span data-stu-id="d6a06-325">Only per-user personalization records associated with users that are considered inactive since the date indicated in the `userInactiveSinceDate` parameter will be deleted.</span></span> <span data-ttu-id="d6a06-326">具体而言，记录<xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A>小于或等于<xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A>被删除。</span><span class="sxs-lookup"><span data-stu-id="d6a06-326">Specifically, records where <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> is less than or equal to <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> are deleted.</span></span>  
  
-   <span data-ttu-id="d6a06-327">如果提供了两个参数，则将删除与这两个约束相匹配的记录。</span><span class="sxs-lookup"><span data-stu-id="d6a06-327">If both parameters are provided, then records that match both constraints are deleted.</span></span>  
  
-   <span data-ttu-id="d6a06-328">`path`参数可以是`null`。</span><span class="sxs-lookup"><span data-stu-id="d6a06-328">The `path` parameter can be `null`.</span></span>  
  
-   <span data-ttu-id="d6a06-329">`path`参数不能为空字符串。</span><span class="sxs-lookup"><span data-stu-id="d6a06-329">The `path` parameter cannot be an empty string.</span></span> <span data-ttu-id="d6a06-330">它应在执行此检查之前进行修整。</span><span class="sxs-lookup"><span data-stu-id="d6a06-330">It should be trimmed prior to performing this check.</span></span>  
  
-   <span data-ttu-id="d6a06-331"><xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> 属性不能为 `null`。</span><span class="sxs-lookup"><span data-stu-id="d6a06-331">The <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> property cannot be `null`.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="SavePersonalizationBlob">
      <MemberSignature Language="C#" Value="protected abstract void SavePersonalizationBlob (System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName, byte[] dataBlob);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig newslot virtual instance void SavePersonalizationBlob(class System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName, unsigned int8[] dataBlob) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.SavePersonalizationBlob(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[])" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; abstract void SavePersonalizationBlob(System::Web::UI::WebControls::WebParts::WebPartManager ^ webPartManager, System::String ^ path, System::String ^ userName, cli::array &lt;System::Byte&gt; ^ dataBlob);" />
      <MemberSignature Language="F#" Value="abstract member SavePersonalizationBlob : System.Web.UI.WebControls.WebParts.WebPartManager * string * string * byte[] -&gt; unit" Usage="personalizationProvider.SavePersonalizationBlob (webPartManager, path, userName, dataBlob)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="webPartManager" Type="System.Web.UI.WebControls.WebParts.WebPartManager" />
        <Parameter Name="path" Type="System.String" />
        <Parameter Name="userName" Type="System.String" />
        <Parameter Name="dataBlob" Type="System.Byte[]" />
      </Parameters>
      <Docs>
        <param name="webPartManager">
          <span data-ttu-id="d6a06-332">管理个性化设置数据的 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-332">The <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" /> managing the personalization data.</span>
          </span>
        </param>
        <param name="path">
          <span data-ttu-id="d6a06-333">要用作数据存储区关键字的个性化设置信息的路径。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-333">The path for personalization information to be used as the data store key.</span>
          </span>
        </param>
        <param name="userName">
          <span data-ttu-id="d6a06-334">要用作关键字的个性化设置信息的用户名。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-334">The user name for personalization information to be used as the key.</span>
          </span>
        </param>
        <param name="dataBlob">
          <span data-ttu-id="d6a06-335">要保存的数据的字节数组。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-335">The byte array of data to be saved.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-336">在派生类中重写时，将原始个性化设置数据保存到基础数据存储区中。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-336">When overridden in a derived class, saves raw personalization data to the underlying data store.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-337">此方法是方法的用于将原始个性化设置数据保存到基础数据存储区的抽象定义。</span><span class="sxs-lookup"><span data-stu-id="d6a06-337">This method is the abstract definition of the method used for saving raw personalization data to the underlying data store.</span></span>  
  
 <span data-ttu-id="d6a06-338">派生的实现应使用`webPartManager`， `path`，和`userName`参数作为存储密钥。</span><span class="sxs-lookup"><span data-stu-id="d6a06-338">Derived implementations should use the `webPartManager`, `path`, and `userName` parameters as storage keys.</span></span> <span data-ttu-id="d6a06-339">派生的个性化设置提供程序必须能够区分基于每个页面的个性化设置数据。</span><span class="sxs-lookup"><span data-stu-id="d6a06-339">The derived personalization provider must be able to distinguish personalization data on a per-page basis.</span></span> <span data-ttu-id="d6a06-340">此外，对于给定的页面的状态，该提供程序必须能够区分<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>和<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>作用域。</span><span class="sxs-lookup"><span data-stu-id="d6a06-340">Furthermore, for a given page's state, the provider must be able to distinguish between <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> and <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> scope.</span></span> <span data-ttu-id="d6a06-341">如果将非`null`提供用户名称，则`dataBlob`参数位于<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>作用域; 否则为`dataBlob`参数被假定为在<xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>作用域。</span><span class="sxs-lookup"><span data-stu-id="d6a06-341">If a non-`null` user name is provided, then the `dataBlob` parameter is in <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> scope; otherwise, the `dataBlob` parameter is assumed to be in <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="SavePersonalizationState">
      <MemberSignature Language="C#" Value="public virtual void SavePersonalizationState (System.Web.UI.WebControls.WebParts.PersonalizationState state);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void SavePersonalizationState(class System.Web.UI.WebControls.WebParts.PersonalizationState state) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.SavePersonalizationState(System.Web.UI.WebControls.WebParts.PersonalizationState)" />
      <MemberSignature Language="VB.NET" Value="Public Overridable Sub SavePersonalizationState (state As PersonalizationState)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual void SavePersonalizationState(System::Web::UI::WebControls::WebParts::PersonalizationState ^ state);" />
      <MemberSignature Language="F#" Value="abstract member SavePersonalizationState : System.Web.UI.WebControls.WebParts.PersonalizationState -&gt; unit&#xA;override this.SavePersonalizationState : System.Web.UI.WebControls.WebParts.PersonalizationState -&gt; unit" Usage="personalizationProvider.SavePersonalizationState state" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="state" Type="System.Web.UI.WebControls.WebParts.PersonalizationState" />
      </Parameters>
      <Docs>
        <param name="state">
          <span data-ttu-id="d6a06-342">
            <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationState" />，包含要保存的个性化设置数据。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-342">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationState" /> containing personalization data to be saved.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d6a06-343">将个性化设置数据保存到数据存储区中。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-343">Saves personalization data to a data store.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d6a06-344">此方法是使用的主入口点<xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization>类，以保存个性化设置数据。</span><span class="sxs-lookup"><span data-stu-id="d6a06-344">This method is the main entry point used by the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization> class to save personalization data.</span></span>  
  
 <span data-ttu-id="d6a06-345">此方法的默认实现使用的内部实现的方法<xref:System.Web.UI.WebControls.WebParts.PersonalizationState>个性化设置数据打包到一个字节数组。</span><span class="sxs-lookup"><span data-stu-id="d6a06-345">The default implementation of this method uses the methods of an internal implementation of <xref:System.Web.UI.WebControls.WebParts.PersonalizationState> to pack personalization data into a byte array.</span></span> <span data-ttu-id="d6a06-346">如果此打包的结果创建一个空字节数组 （因为属性提取不导致任何个性化设置数据），则默认实现调用<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetPersonalizationBlob%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="d6a06-346">If the results of this packing create an empty byte array (because property extraction resulted in no personalization data), the default implementation calls the <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetPersonalizationBlob%2A> method.</span></span> <span data-ttu-id="d6a06-347">否则，默认实现调用<xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.SavePersonalizationBlob%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="d6a06-347">Otherwise, the default implementation calls the <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider.SavePersonalizationBlob%2A> method.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="d6a06-348">
            <paramref name="state" /> 为 <see langword="null" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-348">
              <paramref name="state" /> is <see langword="null" />.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentException">
          <span data-ttu-id="d6a06-349">正在保存的 <paramref name="state" /> 对象与 <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationState(System.Web.UI.WebControls.WebParts.WebPartManager,System.Boolean)" /> 方法返回的 <paramref name="state" /> 对象类型不同。</span>
          <span class="sxs-lookup">
            <span data-stu-id="d6a06-349">The <paramref name="state" /> object being saved has a different type from the <paramref name="state" /> object that was returned by the <see cref="M:System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationState(System.Web.UI.WebControls.WebParts.WebPartManager,System.Boolean)" /> method.</span>
          </span>
        </exception>
      </Docs>
    </Member>
  </Members>
</Type>